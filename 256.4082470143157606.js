"use strict";(self.webpackChunkbaseWeb=self.webpackChunkbaseWeb||[]).push([[256],{1256:(ge,h,i)=>{i.r(h),i.d(h,{UsersModule:()=>_e});var c=i(6019),d=i(8239),p=i(481);class y{}var a=i(3164),e=i(3668),s=i(7537),x=i(5246),q=i(4444),N=i(5286),T=i(397),A=i(7043),w=i(6898),J=i(7797),I=i(4750);function M(o,r){1&o&&e._uU(0," Cargando... ")}function Q(o,r){1&o&&(e.TgZ(0,"small",27),e._uU(1,"Nombre es requerido"),e.qZA())}function D(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Q,2,0,"small",26),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formUser.controls.name.errors.required)}}function Y(o,r){1&o&&(e.TgZ(0,"small",29),e._uU(1,"Rol es requerido"),e.qZA())}function k(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Y,2,0,"small",28),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formUser.controls.roleId.errors.required)}}function F(o,r){1&o&&(e.TgZ(0,"small",31),e._uU(1,"Usuario es requerido"),e.qZA())}function L(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,F,2,0,"small",30),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formUser.controls.userName.errors.required)}}function V(o,r){1&o&&(e.TgZ(0,"small",33),e._uU(1,"Tema es requerido"),e.qZA())}function S(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,V,2,0,"small",32),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formUser.controls.themeId.errors.required)}}function E(o,r){1&o&&(e.TgZ(0,"small",35),e._uU(1,"Contrase\xf1a es requerido"),e.qZA())}function O(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,E,2,0,"small",34),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formUser.controls.password.errors.required)}}function B(o,r){1&o&&(e.TgZ(0,"small",37),e._uU(1,"Correo es requerido"),e.qZA())}function R(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,B,2,0,"small",36),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formUser.controls.email.errors.required)}}function H(o,r){if(1&o&&(e.TgZ(0,"div",23),e._UZ(1,"p-checkbox",38),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("formControl",t.formUser.controls.active)}}const u=function(o){return{"is-invalid":o}};function P(o,r){if(1&o&&(e.TgZ(0,"form",5),e.TgZ(1,"div",6),e.TgZ(2,"div",7),e.TgZ(3,"span",8),e._UZ(4,"i",9),e._UZ(5,"input",10),e.TgZ(6,"label",11),e._uU(7,"Nombre"),e.qZA(),e.qZA(),e.YNc(8,D,2,1,"div",12),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"span",8),e._UZ(11,"i",9),e._UZ(12,"p-dropdown",13),e.TgZ(13,"label",14),e._uU(14,"Rol"),e.qZA(),e.qZA(),e.YNc(15,k,2,1,"div",12),e.qZA(),e.TgZ(16,"div",7),e.TgZ(17,"span",8),e._UZ(18,"i",9),e._UZ(19,"input",15),e.TgZ(20,"label",16),e._uU(21,"Usuario"),e.qZA(),e.qZA(),e.YNc(22,L,2,1,"div",12),e.qZA(),e.TgZ(23,"div",7),e.TgZ(24,"span",8),e._UZ(25,"i",9),e._UZ(26,"p-dropdown",17),e.TgZ(27,"label",18),e._uU(28,"Tema"),e.qZA(),e.qZA(),e.YNc(29,S,2,1,"div",12),e.qZA(),e.TgZ(30,"div",7),e.TgZ(31,"span",8),e._UZ(32,"i",9),e._UZ(33,"input",19),e.TgZ(34,"label",20),e._uU(35,"Contrase\xf1a"),e.qZA(),e.qZA(),e.YNc(36,O,2,1,"div",12),e.qZA(),e.TgZ(37,"div",7),e.TgZ(38,"span",8),e._UZ(39,"i",9),e._UZ(40,"input",21),e.TgZ(41,"label",22),e._uU(42,"Correo"),e.qZA(),e.qZA(),e.YNc(43,R,2,1,"div",12),e.qZA(),e.TgZ(44,"div",23),e._UZ(45,"p-checkbox",24),e.qZA(),e.YNc(46,H,2,1,"div",25),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.Q6J("formGroup",t.formUser),e.xp6(5),e.Q6J("ngClass",e.VKq(16,u,t.submitted&&t.f.name.errors)),e.xp6(3),e.Q6J("ngIf",t.formUser.controls.name.invalid&&t.formUser.controls.name.dirty),e.xp6(4),e.Q6J("options",t.roles),e.xp6(3),e.Q6J("ngIf",t.formUser.controls.roleId.invalid&&t.formUser.controls.roleId.dirty),e.xp6(4),e.Q6J("disabled",!t.isAdd)("ngClass",e.VKq(18,u,t.submitted&&t.f.userName.errors)),e.xp6(3),e.Q6J("ngIf",t.formUser.controls.userName.invalid&&t.formUser.controls.userName.dirty),e.xp6(4),e.Q6J("options",t.themes),e.xp6(3),e.Q6J("ngIf",t.formUser.controls.themeId.invalid&&t.formUser.controls.themeId.dirty),e.xp6(4),e.Q6J("ngClass",e.VKq(20,u,t.submitted&&t.f.password.errors)),e.xp6(3),e.Q6J("ngIf",t.formUser.controls.password.invalid&&t.formUser.controls.password.dirty),e.xp6(4),e.Q6J("ngClass",e.VKq(22,u,t.submitted&&t.f.email.errors)),e.xp6(3),e.Q6J("ngIf",t.formUser.controls.email.invalid&&t.formUser.controls.email.dirty),e.xp6(2),e.Q6J("formControl",t.formUser.controls.salesPerson),e.xp6(1),e.Q6J("ngIf",!t.isAdd)}}function G(o,r){if(1&o&&(e.YNc(0,P,47,24,"form",4),e._UZ(1,"br"),e._UZ(2,"br"),e._UZ(3,"br"),e._UZ(4,"br")),2&o){const t=e.oxw();e.Q6J("ngIf",t.formUser)}}function j(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).add()}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",t.formUser.invalid||t.loading)}}function z(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).edit()}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",t.formUser.invalid||t.loading)}}function K(o,r){if(1&o&&(e.YNc(0,j,1,1,"ng-template",1),e.YNc(1,z,1,1,"ng-template",null,39,e.W1O)),2&o){const t=e.MAs(2),n=e.oxw();e.Q6J("ngIf",n.isAdd)("ngIfElse",t)}}const W=function(){return{width:"50vw"}};let C=(()=>{class o{constructor(t,n,l,m){this.fb=t,this.userService=n,this.commonService=l,this.toastMesage=m,this.userModify=new e.vpe,this.roles=[],this.themes=[],this.loading=!1,this.display=!1}ngOnInit(){}_getRoles(){var t=this;return(0,d.Z)(function*(){try{t.loading=!0,t.roles=yield t.userService.getRoles(),t.themes=yield t.userService.getThemes(),t.roles.unshift({roleId:0,description:"Seleccione un Rol",active:!0,detail:[]}),t.themes.unshift({themeId:0,description:"Seleccione un Tema",active:!0}),t.loading=!1}catch(n){a.V.warning("Advertencia",n),t.loading=!1}})()}showDialog(t,n){this.new(),this.isAdd=n,this.user=t,this._createFormBuild(),this.display=!0,this._getRoles()}_createFormBuild(){var t,n,l,m,g,f,Z,U,v;this.formUser=this.fb.group({userId:[null!==(t=this.user.userId)&&void 0!==t?t:0],name:[null!==(n=this.user.name)&&void 0!==n?n:"",s.kI.required],userName:[null!==(l=this.user.userName)&&void 0!==l?l:"",s.kI.required],password:[null!==(m=this.user.password)&&void 0!==m?m:"",s.kI.compose(this.isAdd?[s.kI.required]:[])],email:[null!==(g=this.user.email)&&void 0!==g?g:"",s.kI.compose([s.kI.required,s.kI.email])],roleId:[null!==(f=this.user.roleId)&&void 0!==f?f:0,s.kI.compose([s.kI.required,s.kI.min(1)])],themeId:[null!==(Z=this.user.themeId)&&void 0!==Z?Z:0,s.kI.compose([s.kI.required,s.kI.min(1)])],active:[null!==(U=this.user.active)&&void 0!==U&&U],salesPerson:[null!==(v=this.user.salesPerson)&&void 0!==v&&v]})}new(){this.user=void 0,this.formUser=void 0}add(){var t=this;return(0,d.Z)(function*(){if(t.formUser.valid)try{a.V.loading("Agregando","Agregando Usuario");let n=yield t.userService.add(t.formUser.value);a.V.closeLoading(),t.toastMesage.add({severity:"success",summary:"Felicidades",detail:"Agregado correctamente."}),t.userModify.emit(n),t.display=!1}catch(n){a.V.closeLoading(),a.V.warning("Advertencia",n)}})()}edit(){var t=this;return(0,d.Z)(function*(){if(t.formUser.valid)try{a.V.loading("Editando","Editando Usuario");let n=yield t.userService.edit(t.formUser.value);a.V.closeLoading(),t.toastMesage.add({severity:"success",summary:"Felicidades",detail:"Editado correctamente."}),t.userModify.emit(n),t.display=!1}catch(n){a.V.closeLoading(),a.V.warning("Advertencia",n)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(x.K),e.Y36(q.v),e.Y36(p.ez))},o.\u0275cmp=e.Xpm({type:o,selectors:[["user-dialog-component"]],outputs:{userModify:"userModify"},decls:6,vars:7,consts:[["modal","true","blockScroll","true",3,"header","visible","visibleChange"],[3,"ngIf","ngIfElse"],["data",""],["pTemplate","footer"],["class","mb-5",3,"formGroup",4,"ngIf"],[1,"mb-5",3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],[1,"mt-4","p-float-label","p-input-icon-left"],[1,"pi","pi-user"],["id","name","type","text","pInputText","","formControlName","name",3,"ngClass"],["for","name"],[4,"ngIf"],["formControlName","roleId","optionValue","roleId","optionLabel","description",3,"options"],["for","roleId"],["id","userName","type","text","pInputText","","formControlName","userName",3,"disabled","ngClass"],["for","userName"],["formControlName","themeId","optionValue","themeId","optionLabel","description",3,"options"],["for","theme"],["id","password","type","password","pInputText","","formControlName","password",3,"ngClass"],["for","password"],["id","email","type","text","pInputText","","formControlName","email",3,"ngClass"],["for","email"],[1,"col-12","md:col-12"],["binary","true","label","Personal de ventas","name","groupname",3,"formControl"],["class","col-12 md:col-12",4,"ngIf"],["id","name","class","p-error block",4,"ngIf"],["id","name",1,"p-error","block"],["id","roleId","class","p-error block",4,"ngIf"],["id","roleId",1,"p-error","block"],["id","userName","class","p-error block",4,"ngIf"],["id","userName",1,"p-error","block"],["id","themeId","class","p-error block",4,"ngIf"],["id","themeId",1,"p-error","block"],["id","password","class","p-error block",4,"ngIf"],["id","password",1,"p-error","block"],["id","email","class","p-error block",4,"ngIf"],["id","email",1,"p-error","block"],["binary","true","label","Activo","name","groupname",3,"formControl"],["addButton",""],["pButton","","type","button","label","Agregar",3,"disabled","click"],["pButton","","type","button","label","Editar",3,"disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(m){return n.display=m}),e._UZ(1,"p-toast"),e.YNc(2,M,1,0,"ng-template",1),e.YNc(3,G,5,1,"ng-template",null,2,e.W1O),e.YNc(5,K,3,2,"ng-template",3),e.qZA()),2&t){const l=e.MAs(4);e.Akn(e.DdM(6,W)),e.MGl("header","",n.isAdd?"Agregar":"Editar"," Usuario"),e.Q6J("visible",n.display),e.xp6(2),e.Q6J("ngIf",n.loading)("ngIfElse",l)}},directives:[N.V,T.FN,c.O5,p.jx,s._Y,s.JL,s.sg,s.Fj,A.o,s.JJ,s.u,c.mk,w.Lt,J.XZ,s.oH,I.Hq],encapsulation:2}),o})();var X=i(2592),$=i(5819),_=i(7548),ee=i(5759),te=i(9430),oe=i(1703);function ne(o,r){if(1&o&&e._UZ(0,"skeleton-table-component",6),2&o){const t=e.oxw();e.Q6J("title",t.title)}}function re(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",12),e._uU(2,"Id "),e._UZ(3,"p-sortIcon",13),e._UZ(4,"p-columnFilter",14),e.qZA(),e.TgZ(5,"th",15),e._uU(6,"Nombre "),e._UZ(7,"p-sortIcon",16),e._UZ(8,"p-columnFilter",17),e.qZA(),e.TgZ(9,"th",18),e._uU(10,"Usuario "),e._UZ(11,"p-sortIcon",19),e._UZ(12,"p-columnFilter",20),e.qZA(),e.TgZ(13,"th",21),e._uU(14,"Rol "),e._UZ(15,"p-sortIcon",22),e._UZ(16,"p-columnFilter",23),e.qZA(),e.TgZ(17,"th",24),e._uU(18,"Correo "),e._UZ(19,"p-sortIcon",25),e._UZ(20,"p-columnFilter",26),e.qZA(),e.TgZ(21,"th",27),e._uU(22,"Estado "),e._UZ(23,"p-sortIcon",28),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Acci\xf3n"),e.qZA(),e.qZA())}function ie(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"h4",29),e._uU(1),e.qZA(),e.TgZ(2,"div",30),e.TgZ(3,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addUser()}),e.qZA(),e.TgZ(4,"span",32),e._UZ(5,"i",33),e.TgZ(6,"input",34),e.NdJ("input",function(l){return e.CHM(t),e.oxw(),e.MAs(2).filterGlobal(l.target.value,"contains")}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.title)}}function se(o,r){1&o&&e._UZ(0,"p-chip",44)}function le(o,r){1&o&&e._UZ(0,"p-chip",45)}function ae(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",35),e._uU(2),e.qZA(),e.TgZ(3,"td",36),e._uU(4),e.qZA(),e.TgZ(5,"td",37),e._uU(6),e.qZA(),e.TgZ(7,"td",38),e._uU(8),e.qZA(),e.TgZ(9,"td",39),e._uU(10),e.qZA(),e.TgZ(11,"td",40),e.YNc(12,se,1,0,"ng-template",3),e.YNc(13,le,1,0,"ng-template",null,41,e.W1O),e.qZA(),e.TgZ(15,"td",42),e.TgZ(16,"button",43),e.NdJ("click",function(){const m=e.CHM(t).$implicit;return e.oxw(2).editUser(m)}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit,n=e.MAs(14);e.xp6(2),e.Oqu(t.userId),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.userName),e.xp6(2),e.Oqu(t.role),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Q6J("ngIf",t.active)("ngIfElse",n)}}const me=function(){return["userId","name","userName","email"]};function pe(o,r){if(1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"p-table",7,8),e.YNc(3,re,26,0,"ng-template",9),e.YNc(4,ie,7,1,"ng-template",10),e.YNc(5,ae,17,7,"ng-template",11),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("value",t.users)("paginator",!0)("rows",5)("globalFilterFields",e.DdM(4,me))}}let ce=(()=>{class o{constructor(t,n){this.userService=t,this.auth=n,this.loading=!1,this.title="Listado de Usuarios"}ngOnInit(){this._getUsers()}_getUsers(){var t=this;return(0,d.Z)(function*(){try{t.loading=!0,t.users=yield t.userService.get(),a.V.closeLoading(),t.loading=!1}catch(n){t.loading=!1,a.V.warning("Advertencia",n)}})()}editUser(t){this.auth.hasPermission("btn_edit_user")?this.UserDialog.showDialog(t,!1):a.V.warning("No tiene acceso","No puede editar por favor solicite el acceso")}addUser(){this.auth.hasPermission("btn_add_user")?this.UserDialog.showDialog(new y,!0):a.V.warning("No tiene acceso","No puede agregar por favor solicite el acceso")}userModify(t){this.users=t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(x.K),e.Y36(X.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(C,5),2&t){let l;e.iGM(l=e.CRH())&&(n.UserDialog=l.first)}},features:[e._Bn([p.ez,p.YP])],decls:7,vars:2,consts:[[1,"grid"],[1,"col-12","xl:col-12"],[1,"card"],[3,"ngIf","ngIfElse"],["showTable",""],[3,"userModify"],[3,"title"],["responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines",3,"value","paginator","rows","globalFilterFields"],["dt",""],["pTemplate","header"],["pTemplate","caption"],["pTemplate","body"],["pSortableColumn","userId"],["field","userId"],["type","text","field","userId","display","menu",1,"ml-auto"],["pSortableColumn","name"],["field","name"],["type","text","field","name","display","menu",1,"ml-auto"],["pSortableColumn","userName"],["field","userName"],["type","text","field","userName","display","menu",1,"ml-auto"],["pSortableColumn","role"],["field","roleId"],["type","text","field","role","display","menu",1,"ml-auto"],["pSortableColumn","email"],["field","email"],["type","text","field","email","display","menu",1,"ml-auto"],["pSortableColumn","active"],["field","active"],[1,"mt-2"],[1,"flex"],["pButton","","pRipple","","type","button","pTooltip","Agregar nuevo usuario","tooltipPosition","bottom","label","Agregar",1,"ml-2",3,"click"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar una palabra",3,"input"],[2,"width","10%","min-width","2rem"],[2,"width","35%","min-width","7rem"],[2,"width","25%","min-width","4rem"],[2,"width","20%","min-width","4rem"],[2,"width","35%","min-width","5rem"],[2,"width","15%","min-width","4rem"],["inactive",""],[2,"width","20%"],["pButton","","pRipple","","type","button","icon","pi pi-pencil",1,"p-button","p-component","p-button-text","p-button-icon-only",3,"click"],["label","Activo","styleClass","custom-chip","icon","pi pi-check"],["label","Inactivo","icon","pi pi-check"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,ne,1,1,"ng-template",3),e.YNc(4,pe,6,5,"ng-template",null,4,e.W1O),e.qZA(),e.qZA(),e.TgZ(6,"user-dialog-component",5),e.NdJ("userModify",function(m){return n.userModify(m)}),e.qZA(),e.qZA()),2&t){const l=e.MAs(5);e.xp6(3),e.Q6J("ngIf",n.loading)("ngIfElse",l)}},directives:[c.O5,C,$.i,T.FN,_.iA,p.jx,_.lQ,_.fz,_.xl,I.Hq,ee.H,te.u,A.o,oe.A],styles:["[_nghost-%COMP%]     .p-chip.custom-chip{background:var(--primary-color)!important;color:var(--primary-color-text)!important}"]}),o})();var b=i(1654);const de=[{path:"",children:[{path:"listado-usuarios",component:ce},{path:"**",redirectTo:"listado-usuarios"}]}];let ue=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[b.Bz.forChild(de)],b.Bz]}),o})(),_e=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[c.ez,ue]]}),o})()}}]);