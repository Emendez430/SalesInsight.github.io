"use strict";(self.webpackChunkbaseWeb=self.webpackChunkbaseWeb||[]).push([[723],{6723:(An,ae,C)=>{C.r(ae),C.d(ae,{MasterMasteryModule:()=>Tn});var T=C(6019),ne=C(1654),u=C(8239),s=C(7537),c=C(3164),p=C(8347),e=C(3668),f=C(8260),h=C(2394),G=C(4522);let le=(()=>{class o{constructor(t){this.http=t}getCobros(t,a,n,i){var d=this;return(0,u.Z)(function*(){return yield(0,h.z)(d.http.get(`${f.N.MarketMastery}AvanceCobrosGlobal/Get/${t}/${a}/${n}/${i}`))})()}getCobrosetalle(t,a,n){var i=this;return(0,u.Z)(function*(){return yield(0,h.z)(i.http.get(`${f.N.MarketMastery}AvanceCobrosGlobal/GetDetalle/${t}/${a}/${n}`))})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(G.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var I=C(1052),q=C(481),w=C(397),S=C(4634),Z=C(7548),P=C(5179),O=C(4750),L=C(6898),V=C(5759);const ce=["tabView"];function se(o,r){if(1&o&&e._UZ(0,"skeleton-table-component",5),2&o){const t=e.oxw();e.Q6J("title",t.title)}}function ue(o,r){1&o&&(e.TgZ(0,"small",27),e._uU(1,"El Rango de fecha es requerido"),e.qZA())}function de(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ue,2,0,"small",26),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.rangeDate.errors.required)}}function pe(o,r){1&o&&(e.TgZ(0,"small",30),e._uU(1,"El asesor es requerido"),e.qZA())}function _e(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,pe,2,0,"small",29),e.qZA()),2&o){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.codAgt.errors.required)}}function me(o,r){if(1&o&&(e.TgZ(0,"div",19),e.TgZ(1,"label",20),e._uU(2,"Seleccione un Asesor"),e.qZA(),e._UZ(3,"p-dropdown",28),e.YNc(4,_e,2,1,"div",22),e.qZA()),2&o){const t=e.oxw(3);e.xp6(3),e.Q6J("options",t.AsesoresDDL),e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.codAgt.invalid&&t.formFilter.controls.codAgt.dirty)}}function ge(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"form",17),e.TgZ(1,"div",18),e.TgZ(2,"div",19),e.TgZ(3,"label",20),e._uU(4,"Seleccione un rango de fecha"),e.qZA(),e._UZ(5,"p-calendar",21),e.YNc(6,de,2,1,"div",22),e.qZA(),e.YNc(7,me,5,2,"div",23),e.TgZ(8,"div",19),e.TgZ(9,"label",24),e._uU(10,"\u200e "),e.qZA(),e.TgZ(11,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).getFilter()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("formGroup",t.formFilter),e.xp6(5),e.Q6J("readonlyInput",!0),e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.rangeDate.invalid&&t.formFilter.controls.rangeDate.dirty),e.xp6(1),e.Q6J("ngIf",t.IsAdmin)}}function Ze(o,r){1&o&&(e.TgZ(0,"tr"),e._UZ(1,"th",31),e.TgZ(2,"th",32),e._uU(3,"Nombre Asesor"),e._UZ(4,"p-column",33),e.qZA(),e.TgZ(5,"th",34),e._uU(6,"Meta"),e._UZ(7,"p-column",35),e.qZA(),e.TgZ(8,"th",36),e._uU(9,"Avance"),e._UZ(10,"p-column",37),e.qZA(),e.TgZ(11,"th",38),e._uU(12,"Porcentaje"),e._UZ(13,"p-column",39),e.qZA(),e.TgZ(14,"th",40),e._uU(15,"Zona"),e._UZ(16,"p-column",41),e.qZA(),e.qZA())}function Te(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",42),e.TgZ(2,"button",43),e.NdJ("click",function(){const n=e.CHM(t),i=n.$implicit,d=n.expanded;return e.oxw(2).GetCobrosDetalle(i.codigo,d)}),e.qZA(),e.qZA(),e.TgZ(3,"td",44),e._uU(4),e.qZA(),e.TgZ(5,"td",44),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"td",44),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"td",44),e._uU(12),e.ALo(13,"number"),e.qZA(),e.TgZ(14,"td",44),e._uU(15),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit,a=r.expanded;e.xp6(2),e.Q6J("pRowToggler",t)("icon",a?"pi pi-chevron-down":"pi pi-chevron-right"),e.xp6(2),e.Oqu(t.nombre_Asesor),e.xp6(2),e.Oqu(e.xi3(7,7,t.meta,"Lps.")),e.xp6(3),e.Oqu(e.xi3(10,10,t.avance,"Lps.")),e.xp6(3),e.hij("",e.xi3(13,13,t.avance/t.meta*100,"1.0-0"),"%"),e.xp6(3),e.Oqu(t.zona)}}function Ae(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",45),e._uU(2,"Nombre Asesor"),e._UZ(3,"p-column",33),e.qZA(),e.TgZ(4,"th",46),e._uU(5,"Codigo Cliente"),e._UZ(6,"p-columnFilter",47),e.qZA(),e.TgZ(7,"th",48),e._uU(8,"Nombre Cliente"),e._UZ(9,"p-columnFilter",49),e.qZA(),e.TgZ(10,"th",50),e._uU(11,"Documento SBO"),e._UZ(12,"p-columnFilter",51),e.qZA(),e.TgZ(13,"th",52),e._uU(14,"Factura"),e._UZ(15,"p-columnFilter",53),e.qZA(),e.TgZ(16,"th",54),e._uU(17,"Total Factura"),e._UZ(18,"p-columnFilter",55),e.qZA(),e.TgZ(19,"th",56),e._uU(20,"Valor Pagado"),e._UZ(21,"p-columnFilter",57),e.qZA(),e.TgZ(22,"th",58),e._uU(23,"Isv"),e._UZ(24,"p-columnFilter",59),e.qZA(),e.TgZ(25,"th",60),e._uU(26,"Fecha Factura"),e._UZ(27,"p-columnFilter",61),e.qZA(),e.TgZ(28,"th",62),e._uU(29,"Fecha Pago"),e._UZ(30,"p-columnFilter",63),e.qZA(),e.TgZ(31,"th",64),e._uU(32,"Plazo"),e._UZ(33,"p-columnFilter",65),e.qZA(),e.qZA())}function be(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",66),e._uU(2),e.qZA(),e.TgZ(3,"td",66),e._uU(4),e.qZA(),e.TgZ(5,"td",66),e._uU(6),e.qZA(),e.TgZ(7,"td",66),e._uU(8),e.qZA(),e.TgZ(9,"td",66),e._uU(10),e.qZA(),e.TgZ(11,"td",66),e._uU(12),e.ALo(13,"currency"),e.qZA(),e.TgZ(14,"td",66),e._uU(15),e.ALo(16,"currency"),e.qZA(),e.TgZ(17,"td",66),e._uU(18),e.ALo(19,"currency"),e.qZA(),e.TgZ(20,"td",66),e._uU(21),e.ALo(22,"date"),e.qZA(),e.TgZ(23,"td",66),e._uU(24),e.ALo(25,"date"),e.qZA(),e.TgZ(26,"td",66),e._uU(27),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombre_Asesor),e.xp6(2),e.Oqu(t.cliente),e.xp6(2),e.Oqu(t.nombre_Cliente),e.xp6(2),e.Oqu(t.documento),e.xp6(2),e.Oqu(t.factura),e.xp6(2),e.Oqu(e.xi3(13,11,t.totalFactura,"Lps.")),e.xp6(3),e.Oqu(e.xi3(16,14,t.valorPagado,"Lps.")),e.xp6(3),e.Oqu(e.xi3(19,17,t.isv,"Lps.")),e.xp6(3),e.Oqu(e.xi3(22,20,t.fechaFactura,"dd/MM/yyyy")),e.xp6(3),e.Oqu(e.xi3(25,23,t.fechaPago,"dd/MM/yyyy")),e.xp6(3),e.Oqu(t.plazo)}}function fe(o,r){if(1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"center"),e.TgZ(2,"h1",6),e._uU(3),e.qZA(),e.qZA(),e._UZ(4,"hr"),e._UZ(5,"br"),e.YNc(6,ge,12,4,"form",7),e.TgZ(7,"p-tabView",8,9),e.TgZ(9,"p-tabPanel",10),e.TgZ(10,"p-table",11,12),e.YNc(12,Ze,17,0,"ng-template",13),e.YNc(13,Te,16,16,"ng-template",14),e.qZA(),e.qZA(),e.TgZ(14,"p-tabPanel",15),e.TgZ(15,"p-table",16,12),e.YNc(17,Ae,34,0,"ng-template",13),e.YNc(18,be,28,26,"ng-template",14),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.title),e.xp6(3),e.Q6J("ngIf",t.formFilter),e.xp6(1),e.Q6J("activeIndex",t.activeTabIndex),e.xp6(3),e.Q6J("value",t.avancesCobro2)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40),e.xp6(5),e.Q6J("value",t.AvanceCobrosDetalle)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40)}}let he=(()=>{class o{constructor(t,a,n,i){this.CobrosService=t,this.fb=a,this.generalService=n,this.messageService=i,this.activeTabIndex=0,this.avancesCobro=[],this.avancesCobro2=[],this.title="Avance Cobros Por Asesor",this.AsesorEncabezado=[],this.Accessor=[],this.TablaFechaEncabezado=[],this.TablaFecha=[],this.AsesoresDDL=[],this.AvanceCobrosDet=[],this.AvanceCobrosDetalle=[]}ngOnInit(){const t=localStorage.getItem("currentUser");this.UsuarioData=JSON.parse(t),this.IsAdmin="Administrador"==this.UsuarioData.role,console.log(this.UsuarioData.saleId),this.getAll()}getAll(){var t=this;return(0,u.Z)(function*(){yield t.getTable(),yield t.getAsesores(),yield t.BuildFormFilter(t.TablaFecha[0].fechaInicial,t.TablaFecha[0].fechaFinal),yield t._BuildForm(t.TablaFecha[0].fechaInicial,t.TablaFecha[0].fechaFinal),yield t.getFilter(),yield t.GetCobros()})()}getTable(){var t=this;return(0,u.Z)(function*(){t.TablaFechaEncabezado=yield t.generalService.getTableFecha(),t.TablaFecha=t.TablaFechaEncabezado.dataResult})()}BuildFormFilter(t,a){var n=this;return(0,u.Z)(function*(){n.formFilter=n.fb.group({rangeDate:["",s.kI.required],op:[1==n.IsAdmin?2:1],codAgt:[1==n.IsAdmin?0:n.UsuarioData.saleId,s.kI.required]})})()}_BuildForm(t,a){var n=this;return(0,u.Z)(function*(){n.formFil=n.fb.group({fechaInicio:[new Date(t).toISOString().substring(0,10),s.kI.required],fechaFin:[new Date(a).toISOString().substring(0,10),s.kI.required],op:[1==n.IsAdmin?2:1],codAgt:[1==n.IsAdmin?0:1,s.kI.required]})})()}getFilter(){var t=this;return(0,u.Z)(function*(){try{""==t.formFilter.value.rangeDate?t.messageService.add({severity:"warn",summary:"Warn",detail:p.G.FormularioInvalido}):(t.loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),0!=t.formFilter.value.codAgt&&(t.formFilter.value.op=1),t.avancesCobro=yield t.CobrosService.getCobros(new Date(t.formFilter.value.rangeDate[0]).toISOString().substring(0,10),new Date(t.formFilter.value.rangeDate[1]).toISOString().substring(0,10),t.formFilter.value.op,t.formFilter.value.codAgt),t.avancesCobro2=t.avancesCobro.dataResult,c.V.closeLoading(),t.loading=!1)}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}GetCobros(){var t=this;return(0,u.Z)(function*(){try{t.loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),t.avancesCobro=yield t.CobrosService.getCobros(new Date(t.TablaFecha[0].fechaInicial).toISOString().substring(0,10),new Date(t.TablaFecha[0].fechaFinal).toISOString().substring(0,10),1==t.IsAdmin?2:1,1==t.IsAdmin?0:t.UsuarioData.saleId),t.avancesCobro2=t.avancesCobro.dataResult,c.V.closeLoading(),t.loading=!1}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}GetCobrosDetalle(t,a){var n=this;return(0,u.Z)(function*(){try{console.log(n.formFilter.value.rangeDate),n.formFilter.value.codAgt=t,n.loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),n.AvanceCobrosDet=yield n.CobrosService.getCobrosetalle(""==n.formFilter.value.rangeDate?new Date(n.TablaFecha[0].fechaInicial).toISOString().substring(0,10):new Date(n.formFilter.value.rangeDate[0]).toISOString().substring(0,10),""==n.formFilter.value.rangeDate?new Date(n.TablaFecha[0].fechaFinal).toISOString().substring(0,10):new Date(n.formFilter.value.rangeDate[1]).toISOString().substring(0,10),n.formFilter.value.codAgt),n.AvanceCobrosDetalle=n.AvanceCobrosDet.dataResult,n.activeTabIndex=1,c.V.closeLoading(),n.loading=!1}catch(i){c.V.closeLoading(),c.V.warning(i)}})()}getAsesores(){var t=this;return(0,u.Z)(function*(){t.AsesorEncabezado=yield t.generalService.getAsesores(),t.Accessor=t.AsesorEncabezado.dataResult,t.AsesoresDDL=t.Accessor.map(a=>({salesPrson:a.salesPrson,nombreUsuario:a.nombreUsuario})),t.AsesoresDDL.unshift({salesPrson:0,nombreUsuario:"Seleccionar Todos"})})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(le),e.Y36(s.qu),e.Y36(I.m),e.Y36(q.ez))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-cobros"]],viewQuery:function(t,a){if(1&t&&e.Gf(ce,5),2&t){let n;e.iGM(n=e.CRH())&&(a.tabView=n.first)}},decls:6,vars:2,consts:[[1,"grid"],[1,"col-12","xl:col-12"],[1,"card"],[3,"ngIf","ngIfElse"],["showTable",""],[3,"title"],[1,"mt-2"],["class","mb-5",3,"formGroup",4,"ngIf"],[3,"activeIndex"],["tabView",""],["header","Todos"],["dataKey","codigo","responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","scrollHeight","450px",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],["dt",""],["pTemplate","header"],["pTemplate","body"],["header","Detalle"],["responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","scrollHeight","450px",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],[1,"mb-5",3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],["for","AsesoresDDL"],["formControlName","rangeDate","selectionMode","range",3,"readonlyInput"],[4,"ngIf"],["class","col-12 md:col-6",4,"ngIf"],["for","sub"],["pButton","","type","button","label","Buscar",1,"p-button-secondary","p-button-outlined",3,"click"],["id","rangeDate","class","p-error block",4,"ngIf"],["id","rangeDate",1,"p-error","block"],["formControlName","codAgt","optionValue","salesPrson","optionLabel","nombreUsuario",3,"options"],["id","codAgt","class","p-error block",4,"ngIf"],["id","codAgt",1,"p-error","block"],[2,"width","1rem"],["pSortableColumn","nombreAsesor",2,"width","9rem"],["type","text","field","nombreAsesor","display","menu",1,"ml-auto"],["pSortableColumn","meta",2,"width","9rem"],["type","text","field","meta","display","menu",1,"ml-auto"],["pSortableColumn","avance",2,"width","9rem"],["type","text","field","avance","display","menu",1,"ml-auto"],["pSortableColumn","porcentaje",2,"width","9rem"],["type","text","field","porcentaje","display","menu",1,"ml-auto"],["pSortableColumn","zona",2,"width","9rem"],["type","text","field","zona","display","menu",1,"ml-auto"],[2,"width","2rem"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon","click"],[2,"width","15%","min-width","2rem"],["pSortableColumn","nombre_Asesor",2,"width","70rem"],["pSortableColumn","cliente"],["type","text","field","metaGrupo1","display","menu",1,"ml-auto"],["pSortableColumn","nombre_Cliente"],["type","text","field","avanceG1","display","menu",1,"ml-auto"],["pSortableColumn","documento"],["type","text","field","ncG1","display","menu",1,"ml-auto"],["pSortableColumn","factura"],["type","text","field","vtaNetaG1","display","menu",1,"ml-auto"],["pSortableColumn","totalFactura"],["type","text","field","porcenG1","display","menu",1,"ml-auto"],["pSortableColumn","valorPagado"],["type","text","field","entregadO_DESPACHO_G1","display","menu",1,"ml-auto"],["pSortableColumn","isv"],["type","text","field","eN_PROCESO_G1","display","menu",1,"ml-auto"],["pSortableColumn","fechaFactura"],["type","text","field","pendientE_DE_FACTURACION_G1","display","menu",1,"ml-auto"],["pSortableColumn","fechaPago"],["type","text","field","totaTuberiaG1","display","menu",1,"ml-auto"],["pSortableColumn","plazo"],["type","text","field","zonaTuberiaG1","display","menu",1,"ml-auto"],[2,"width","10%","min-width","2rem"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,se,1,1,"ng-template",3),e.YNc(4,fe,19,15,"ng-template",null,4,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(5);e.xp6(3),e.Q6J("ngIf",a.loading)("ngIfElse",n)}},directives:[T.O5,w.FN,S.xf,S.x4,Z.iA,q.jx,s._Y,s.JL,s.sg,P.f,s.JJ,s.u,O.Hq,L.Lt,Z.lQ,V.H,Z.jB,Z.xl],pipes:[T.H9,T.JJ,T.uU],styles:[""]}),o})(),Ce=(()=>{class o{constructor(t){this.http=t}getCoberturaDC(t,a,n,i){var d=this;return(0,u.Z)(function*(){return yield(0,h.z)(d.http.get(`${f.N.MarketMastery}Cobertura/CoberturaDC/${t}/${a}/${n}/${i}`))})()}getCoberturaDCP(t,a,n,i,d){var m=this;return(0,u.Z)(function*(){return yield(0,h.z)(m.http.get(`${f.N.MarketMastery}Cobertura/CoberturaDCP/${t}/${a}/${n}/${i}/${d}`))})()}getDetalleCC2(t,a,n,i){var d=this;return(0,u.Z)(function*(){return yield(0,h.z)(d.http.get(`${f.N.MarketMastery}Cobertura/DetalleCC/${t}/${a}/${n}/${i}`))})()}getDetalleCA(t,a,n,i){var d=this;return(0,u.Z)(function*(){return yield(0,h.z)(d.http.get(`${f.N.MarketMastery}Cobertura/DetalleCA/${t}/${a}/${n}/${i}`))})()}GetCobertura(t,a,n,i,d){var m=this;return(0,u.Z)(function*(){return yield(0,h.z)(m.http.get(`${f.N.MarketMastery}Cobertura/Get/${t}/${a}/${n}/${i}/${d}`))})()}GetCoverturas(t,a){var n=this;return(0,u.Z)(function*(){return yield(0,h.z)(n.http.get(`${f.N.MarketMastery}Cobertura/GetCoverturas/${t}/${a}`))})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(G.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const qe=["tabView"],ve=["class","premio"];function xe(o,r){if(1&o&&e._UZ(0,"skeleton-table-component",5),2&o){const t=e.oxw();e.Q6J("title",t.Title)}}function Ue(o,r){1&o&&(e.TgZ(0,"small",32),e._uU(1,"La fecha es requerida"),e.qZA())}function Fe(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Ue,2,0,"small",31),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.rangeDates.errors.required)}}function ye(o,r){1&o&&(e.TgZ(0,"small",34),e._uU(1,"La Promocion es requerido"),e.qZA())}function De(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ye,2,0,"small",33),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.idC.errors.required)}}function Se(o,r){1&o&&(e.TgZ(0,"small",37),e._uU(1,"El asesor es requerido"),e.qZA())}function Oe(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Se,2,0,"small",36),e.qZA()),2&o){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.codAgt.errors.required)}}function Ie(o,r){if(1&o&&(e.TgZ(0,"div",22),e.TgZ(1,"label",23),e._uU(2,"Seleccione un Asesor"),e.qZA(),e._UZ(3,"p-dropdown",35),e.YNc(4,Oe,2,1,"div",25),e.qZA()),2&o){const t=e.oxw(3);e.xp6(3),e.Q6J("options",t.AsesoresDDL),e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.codAgt.invalid&&t.formFilter.controls.codAgt.dirty)}}function we(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"form",20),e.TgZ(1,"div",21),e.TgZ(2,"div",22),e.TgZ(3,"label",23),e._uU(4,"Seleccione una fecha"),e.qZA(),e._UZ(5,"p-calendar",24),e.YNc(6,Fe,2,1,"div",25),e.qZA(),e.TgZ(7,"div",22),e.TgZ(8,"label",26),e._uU(9,"Seleccione una Promocion"),e.qZA(),e._UZ(10,"p-dropdown",27),e.YNc(11,De,2,1,"div",25),e.qZA(),e.YNc(12,Ie,5,2,"div",28),e.TgZ(13,"div",22),e.TgZ(14,"label",29),e._uU(15,"\u200e "),e.qZA(),e.TgZ(16,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).getFilter()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("formGroup",t.formFilter),e.xp6(6),e.Q6J("ngIf",t.formFilter.controls.rangeDates.invalid&&t.formFilter.controls.rangeDates.dirty),e.xp6(4),e.Q6J("options",t.CoberturasDDL),e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.idC.invalid&&t.formFilter.controls.idC.dirty),e.xp6(1),e.Q6J("ngIf",t.IsAdmin)}}function Ge(o,r){1&o&&(e.TgZ(0,"tr"),e._UZ(1,"th",38),e.TgZ(2,"th",39),e._uU(3,"Nombre de Asesor "),e._UZ(4,"p-columnFilter",40),e.qZA(),e.TgZ(5,"th",41),e._uU(6,"Clientes Actuales"),e._UZ(7,"p-column",42),e.qZA(),e.TgZ(8,"th",43),e._uU(9,"Meta Cobertura"),e._UZ(10,"p-columnFilter",44),e.qZA(),e.TgZ(11,"th",45),e._uU(12,"Cumplimineto"),e._UZ(13,"p-columnFilter",46),e.qZA(),e.TgZ(14,"th",47),e._uU(15,"Bono "),e._UZ(16,"p-columnFilter",48),e.qZA(),e.qZA())}function Le(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",49),e.TgZ(2,"button",50),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).getDetalleCC(i.idC,i.idAsesor)}),e.qZA(),e.qZA(),e.TgZ(3,"td",51),e._uU(4),e.qZA(),e.TgZ(5,"td",51),e._uU(6),e.qZA(),e.TgZ(7,"td",51),e._uU(8),e.qZA(),e.TgZ(9,"td",51),e._uU(10),e.qZA(),e.TgZ(11,"td",51),e._uU(12),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit,a=e.oxw(2);e.xp6(2),e.Q6J("pRowToggler",t)("icon",a.expanded?"pi pi-chevron-down":"pi pi-chevron-right"),e.xp6(2),e.Oqu(t.nombreAsesor),e.xp6(2),e.Oqu(t.clientes),e.xp6(2),e.Oqu(t.metaCobertura),e.xp6(2),e.Oqu(t.cumplimiento),e.xp6(2),e.Oqu(t.bono)}}function Pe(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",39),e._uU(2,"Nombre de Asesor"),e._UZ(3,"p-columnFilter",40),e.qZA(),e.TgZ(4,"th",53),e._uU(5,"C\xf3digo de Cliente"),e._UZ(6,"p-column",54),e.qZA(),e.TgZ(7,"th",55),e._uU(8,"Cumplimineto"),e._UZ(9,"p-columnFilter",56),e.qZA(),e.TgZ(10,"th",45),e._uU(11,"Cumplimiento"),e._UZ(12,"p-columnFilter",46),e.qZA(),e.qZA())}function Ne(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",51),e._uU(2),e.qZA(),e.TgZ(3,"td",51),e._uU(4),e.qZA(),e.TgZ(5,"td",51),e._uU(6),e.qZA(),e.TgZ(7,"td",51),e._uU(8),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombreAsesor),e.xp6(2),e.Oqu(t.cardCode),e.xp6(2),e.Oqu(t.nombreCliente),e.xp6(2),e.Oqu(t.cumplimiento)}}function Me(o,r){if(1&o&&(e.TgZ(0,"div"),e.TgZ(1,"p-table",52,12),e.YNc(3,Pe,13,0,"ng-template",13),e.YNc(4,Ne,9,4,"ng-template",14),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("value",t.CoberturaCC)("paginator",!0)("rows",10)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40)}}function Ve(o,r){1&o&&(e.TgZ(0,"p"),e._uU(1,"No hay detalles disponibles para mostrar."),e.qZA())}function Re(o,r){1&o&&(e.TgZ(0,"tr"),e._UZ(1,"th",57),e.TgZ(2,"th",39),e._uU(3,"Nombre de Asesor"),e._UZ(4,"p-columnFilter",40),e.qZA(),e.TgZ(5,"th",41),e._uU(6,"Clientes Actuales"),e._UZ(7,"p-column",42),e.qZA(),e.TgZ(8,"th",43),e._uU(9,"Meta Cobertura"),e._UZ(10,"p-columnFilter",44),e.qZA(),e.TgZ(11,"th",45),e._uU(12,"Cumplimineto"),e._UZ(13,"p-columnFilter",46),e.qZA(),e.TgZ(14,"th",47),e._uU(15,"Bono "),e._UZ(16,"p-columnFilter",48),e.qZA(),e.TgZ(17,"th",58),e._uU(18,"Incentivo Cumplimineto"),e._UZ(19,"p-columnFilter",59),e.qZA(),e.TgZ(20,"th",60),e._uU(21,"Zona"),e._UZ(22,"p-columnFilter",61),e.qZA(),e.qZA())}function ke(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",49),e.TgZ(2,"button",50),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).getCoberturaDCP(i.idC,i.idAsesor)}),e.qZA(),e.qZA(),e.TgZ(3,"td",51),e._uU(4),e.qZA(),e.TgZ(5,"td",51),e._uU(6),e.qZA(),e.TgZ(7,"td",51),e._uU(8),e.qZA(),e.TgZ(9,"td",51),e._uU(10),e.qZA(),e.TgZ(11,"td",51),e._uU(12),e.qZA(),e.TgZ(13,"td",51),e._uU(14),e.qZA(),e.TgZ(15,"td",51),e._uU(16),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit,a=e.oxw(2);e.xp6(2),e.Q6J("pRowToggler",t)("icon",a.expanded?"pi pi-chevron-down":"pi pi-chevron-right"),e.xp6(2),e.Oqu(t.nombreAsesor),e.xp6(2),e.Oqu(t.clientes),e.xp6(2),e.Oqu(t.metaCobertura),e.xp6(2),e.Oqu(t.cumplimiento),e.xp6(2),e.Oqu(t.bono),e.xp6(2),e.Oqu(t.incentivo),e.xp6(2),e.Oqu(t.zona)}}function Je(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",39),e._uU(2,"Nombre de Asesor"),e._UZ(3,"p-columnFilter",40),e.qZA(),e.TgZ(4,"th",53),e._uU(5,"C\xf3digo de Cliente"),e._UZ(6,"p-column",54),e.qZA(),e.TgZ(7,"th",55),e._uU(8,"Cumplimineto"),e._UZ(9,"p-columnFilter",56),e.qZA(),e.TgZ(10,"th",45),e._uU(11,"Cumplimiento"),e._UZ(12,"p-columnFilter",46),e.qZA(),e.qZA())}function Ee(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",51),e._uU(2),e.qZA(),e.TgZ(3,"td",51),e._uU(4),e.qZA(),e.TgZ(5,"td",51),e._uU(6),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombreAsesor),e.xp6(2),e.Oqu(t.nombreCliente),e.xp6(2),e.Oqu(t.cumplimiento)}}function Ye(o,r){if(1&o&&(e.TgZ(0,"div"),e.TgZ(1,"p-table",52,12),e.YNc(3,Je,13,0,"ng-template",13),e.YNc(4,Ee,7,3,"ng-template",14),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("value",t.CoberturaDCP)("paginator",!0)("rows",10)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40)}}function Qe(o,r){1&o&&(e.TgZ(0,"p"),e._uU(1,"No hay detalles disponibles para mostrar."),e.qZA())}function ze(o,r){if(1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"center"),e.TgZ(2,"h1",6),e._uU(3),e.qZA(),e.qZA(),e._UZ(4,"hr"),e._UZ(5,"br"),e.YNc(6,we,17,5,"form",7),e.TgZ(7,"p-tabView",8,9),e.TgZ(9,"p-tabPanel",10),e.TgZ(10,"p-table",11,12),e.YNc(12,Ge,17,0,"ng-template",13),e.YNc(13,Le,13,7,"ng-template",14),e.qZA(),e.qZA(),e.TgZ(14,"p-tabPanel",15),e.YNc(15,Me,5,6,"div",16),e.YNc(16,Ve,2,0,"ng-template",null,17,e.W1O),e.qZA(),e.TgZ(18,"p-tabPanel",18),e.TgZ(19,"p-table",11,12),e.YNc(21,Re,23,0,"ng-template",13),e.YNc(22,ke,17,9,"ng-template",14),e.qZA(),e.qZA(),e.TgZ(23,"p-tabPanel",19),e.YNc(24,Ye,5,6,"div",16),e.YNc(25,Qe,2,0,"ng-template",null,17,e.W1O),e.qZA(),e.qZA()),2&o){const t=e.MAs(17),a=e.oxw();e.xp6(3),e.Oqu(a.Title),e.xp6(3),e.Q6J("ngIf",a.formFilter),e.xp6(1),e.Q6J("activeIndex",a.activeTabIndex),e.xp6(3),e.Q6J("value",a.CoberturaDetalle)("paginator",!0)("rows",10)("scrollable",!0)("virtualScroll",a.False)("virtualRowHeight",40),e.xp6(5),e.Q6J("ngIf",a.CoberturaCC&&a.CoberturaCC.length>0)("ngIfElse",t),e.xp6(4),e.Q6J("value",a.CoberturaDetalle)("paginator",!0)("rows",10)("scrollable",!0)("virtualScroll",a.False)("virtualRowHeight",40),e.xp6(5),e.Q6J("ngIf",a.CoberturaDCP&&a.CoberturaDCP.length>0)("ngIfElse",t)}}let $e=(()=>{class o{constructor(t,a,n,i){this.fromG=t,this.Coberturaervice=a,this.messageService=n,this.generalService=i,this.activeTabIndex=0,this.Title="Cobertura Premio",this.CoberturaEncabezado=[],this.CoberturaDetalle=[],this.CoberturaPremioData=[],this.CoberturaCCEncabezado=[],this.CoberturaCC=[],this.CoberturaDCPEncabezado=[],this.CoberturaDCP=[],this.expandedRows={},this.TablaFechaEncabezado=[],this.TablaFecha=[],this.AsesorEncabezado=[],this.Accessor=[],this.AsesoresDDL=[],this.CoberturasDDL=[]}ngOnInit(){const t=localStorage.getItem("currentUser");this.UsuarioData=JSON.parse(t),this.IsAdmin="Administrador"==this.UsuarioData.role,this.getAll()}getAll(){var t=this;return(0,u.Z)(function*(){yield t.getTable(),yield t.getCoberturas(),yield t.formFil(),yield t.GetEncaCob(),yield t.getAsesores()})()}formFil(){var t=this;return(0,u.Z)(function*(){t.formFilter=t.fromG.group({AAA:[new Date(t.TablaFecha[0].fechaInicial).toISOString().substring(0,10)],MM:[new Date(t.TablaFecha[0].fechaFinal).toISOString().substring(0,10)],Op:[1==t.IsAdmin?2:1],codAgt:[1==t.IsAdmin?0:t.UsuarioData.saleId,s.kI.required],idC:[t.Coberturas[0].idC,s.kI.required],rangeDates:["",s.kI.required]})})()}getTable(){var t=this;return(0,u.Z)(function*(){t.TablaFechaEncabezado=yield t.generalService.getTableFecha(),t.TablaFecha=t.TablaFechaEncabezado.dataResult})()}GetEncaCob(){var t=this;return(0,u.Z)(function*(){try{t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription);const a=new Date(t.TablaFecha[0].fechaInicial).getFullYear(),n=new Date(t.TablaFecha[0].fechaInicial).getMonth()+1;console.log("Mes es "+n),t.CoberturaEncabezado=yield t.Coberturaervice.GetCobertura(t.formFilter.value.idC,a,n,1==t.IsAdmin?0:t.UsuarioData.saleId,1==t.IsAdmin?2:1),t.CoberturaDetalle=t.CoberturaEncabezado.dataResult,console.log(t.CoberturaEncabezado.dataResult),c.V.closeLoading(),t.Loading=!1}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}CleanVariable(){this.activeTabIndex=0}getFilter(){var t=this;return(0,u.Z)(function*(){try{if(""==t.formFilter.value.rangeDates)t.messageService.add({severity:"warn",summary:"Warn",detail:p.G.FormularioInvalido});else{t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription);const a=new Date(t.formFilter.value.rangeDates).getFullYear(),n=new Date(t.formFilter.value.rangeDates).getMonth()+1;0!=t.formFilter.value.codAgt&&(t.formFilter.value.Op=1),t.CoberturaEncabezado=yield t.Coberturaervice.GetCobertura(t.formFilter.value.idC,a,n,t.formFilter.value.codAgt,t.formFilter.value.Op),t.CoberturaDetalle=t.CoberturaEncabezado.dataResult,t.CleanVariable(),c.V.closeLoading(),t.Loading=!1}}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}getAsesores(){var t=this;return(0,u.Z)(function*(){t.AsesorEncabezado=yield t.generalService.getAsesores(),t.Accessor=t.AsesorEncabezado.dataResult,t.AsesoresDDL=t.Accessor.map(a=>({salesPrson:a.salesPrson,nombreUsuario:a.nombreUsuario})),t.AsesoresDDL.unshift({salesPrson:0,nombreUsuario:"Seleccionar Todos"})})()}getCoberturas(){var t=this;return(0,u.Z)(function*(){const a=new Date(t.TablaFecha[0].fechaInicial).getFullYear(),n=new Date(t.TablaFecha[0].fechaInicial).getMonth();console.log(t.TablaFecha[0].fechaInicial),console.log(new Date(t.TablaFecha[0].fechaInicial)),console.log(n),t.CoberturasEncabezado=yield t.Coberturaervice.GetCoverturas(a,n+1),t.Coberturas=t.CoberturasEncabezado.dataResult,console.log(t.Coberturas),t.CoberturasDDL=t.Coberturas.map(i=>({idC:i.idC,descripcion:i.descripcion}))})()}getDetalleCC(t,a){var n=this;return(0,u.Z)(function*(){try{n.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),console.log("icd "+t+" Agt "+a);const i=""==n.formFilter.value.rangeDates?new Date(n.TablaFecha[0].fechaInicial).getFullYear():n.formFilter.value.rangeDates.getFullYear(),d=""==n.formFilter.value.rangeDates?new Date(n.TablaFecha[0].fechaInicial).getMonth():n.formFilter.value.rangeDates.getMonth()+1;0!=n.formFilter.value.codAgt&&(n.formFilter.value.Op=1),n.CoberturaCCEncabezado=yield n.Coberturaervice.getDetalleCC2(t,i,d,a),n.CoberturaCC=n.CoberturaCCEncabezado.dataResult,n.activeTabIndex=1,console.log(n.CoberturaCCEncabezado.dataResult),console.log(n.formFilter.value),c.V.closeLoading(),n.Loading=!1}catch(i){c.V.closeLoading(),c.V.warning(i)}})()}getCoberturaDCP(t,a){var n=this;return(0,u.Z)(function*(){try{n.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription);const i=""==n.formFilter.value.rangeDates?new Date(n.TablaFecha[0].fechaInicial).getFullYear():n.formFilter.value.rangeDates.getFullYear(),d=""==n.formFilter.value.rangeDates?new Date(n.TablaFecha[0].fechaInicial).getMonth():n.formFilter.value.rangeDates.getMonth()+1;0!=n.formFilter.value.codAgt&&(n.formFilter.value.Op=1),n.CoberturaDCPEncabezado=yield n.Coberturaervice.getDetalleCA(t,i,d,a),n.CoberturaDCP=n.CoberturaDCPEncabezado.dataResult,console.log(n.CoberturaDCPEncabezado.dataResult),n.activeTabIndex=3,c.V.closeLoading(),n.Loading=!1}catch(i){c.V.closeLoading(),c.V.warning(i)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(Ce),e.Y36(q.ez),e.Y36(I.m))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-cobertura",8,"premio"]],viewQuery:function(t,a){if(1&t&&e.Gf(qe,5),2&t){let n;e.iGM(n=e.CRH())&&(a.tabView=n.first)}},attrs:ve,decls:6,vars:2,consts:[[1,"grid"],[1,"col-12","xl:col-12"],[1,"card"],[3,"ngIf","ngIfElse"],["showTable",""],[3,"title"],[1,"mt-2"],["class","mb-5",3,"formGroup",4,"ngIf"],[3,"activeIndex"],["tabView",""],["header","Detalle por producto"],["responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","scrollHeight","350px","dataKey","idC",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],["dt",""],["pTemplate","header"],["pTemplate","body"],["header","Detalle Producto"],[4,"ngIf","ngIfElse"],["noData",""],["header","Detalle por Cliente"],["header","Detalle Cliente"],[1,"mb-5",3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],["for","AsesoresDDL"],["formControlName","rangeDates","view","month","dateFormat","mm/yy"],[4,"ngIf"],["for","CoberturasDDL"],["formControlName","idC","optionValue","idC","optionLabel","descripcion",3,"options"],["class","col-12 md:col-6",4,"ngIf"],["for","sub"],["pButton","","type","button","label","Buscar",1,"p-button-secondary","p-button-outlined",3,"click"],["id","rangeDates","class","p-error block",4,"ngIf"],["id","rangeDates",1,"p-error","block"],["id","idC","class","p-error block",4,"ngIf"],["id","idC",1,"p-error","block"],["formControlName","codAgt","optionValue","salesPrson","optionLabel","nombreUsuario",3,"options"],["id","codAgt","class","p-error block",4,"ngIf"],["id","codAgt",1,"p-error","block"],[2,"width","1rem"],["pSortableColumn","nombreAsesor",2,"width","60rem"],["type","text","field","nombreAsesor","display","menu",1,"ml-auto"],["pSortableColumn","clientes"],["type","text","field","clientes","display","menu",1,"ml-auto"],["pSortableColumn","metaCobertura"],["type","text","field","metaCobertura","display","menu",1,"ml-auto"],["pSortableColumn","cumplimiento"],["type","text","field","cumplimiento","display","menu",1,"ml-auto"],["pSortableColumn","bono"],["type","text","field","bono","display","menu",1,"ml-auto"],[2,"width","5%","min-width","2rem"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon","click"],[2,"width","10%","min-width","2rem"],["responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","scrollHeight","350px",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],["pSortableColumn","cardCode"],["type","text","field","cardCode","display","menu",1,"ml-auto"],["pSortableColumn","nombreCliente"],["type","text","field","nombreCliente","display","menu",1,"ml-auto"],[2,"width","2rem"],["pSortableColumn","incentivo"],["type","text","field","incentivo","display","menu",1,"ml-auto"],["pSortableColumn","zona"],["type","text","field","zona","display","menu",1,"ml-auto"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,xe,1,1,"ng-template",3),e.YNc(4,ze,27,19,"ng-template",null,4,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(5);e.xp6(3),e.Q6J("ngIf",a.Loading)("ngIfElse",n)}},directives:[T.O5,w.FN,S.xf,S.x4,Z.iA,q.jx,s._Y,s.JL,s.sg,P.f,s.JJ,s.u,L.Lt,O.Hq,Z.lQ,Z.xl,V.H,Z.jB],styles:[""]}),o})(),He=(()=>{class o{constructor(t){this.http=t}getIncentivo(t,a,n,i){var d=this;return(0,u.Z)(function*(){return yield(0,h.z)(d.http.get(`${f.N.MarketMastery}Liquidacion/Get/${t}/${a}/${n}/${i}`))})()}getLiquidacionAsesor(t,a,n,i,d){var m=this;return(0,u.Z)(function*(){return yield(0,h.z)(m.http.get(`${f.N.MarketMastery}Liquidacion/LiquidacionAsesor/${t}/${a}/${n}/${i}/${d}`))})()}getDetalleLiquidacionXAsesor(t,a,n,i){var d=this;return(0,u.Z)(function*(){return yield(0,h.z)(d.http.get(`${f.N.MarketMastery}Liquidacion/DetalleLiquidacionXAsesorDTO/${t}/${a}/${n}/${i}`))})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(G.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Be=["tabView"],je=["class","miscelaneo"];function Xe(o,r){if(1&o&&e._UZ(0,"skeleton-table-component",3),2&o){const t=e.oxw();e.Q6J("title",t.Title)}}function We(o,r){1&o&&(e.TgZ(0,"small",28),e._uU(1,"La fecha es requerida"),e.qZA())}function Ke(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,We,2,0,"small",27),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formFilterAsesor.controls.rangeDates.errors.required)}}function et(o,r){1&o&&(e.TgZ(0,"small",30),e._uU(1,"L fecha es requerido"),e.qZA())}function tt(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,et,2,0,"small",29),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formFilterAsesor.controls.tipoLiquidacion.errors.required)}}function ot(o,r){if(1&o&&(e.TgZ(0,"div",18),e.TgZ(1,"label",31),e._uU(2,"Seleccione un Asesor"),e.qZA(),e._UZ(3,"p-dropdown",32),e.qZA()),2&o){const t=e.oxw(3);e.xp6(3),e.Q6J("options",t.AsesoresDDL)}}function at(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"form",16),e._UZ(1,"p-toast"),e.TgZ(2,"div",17),e.TgZ(3,"div",18),e.TgZ(4,"label",19),e._uU(5,"Seleccione un mes"),e.qZA(),e._UZ(6,"p-calendar",20),e.YNc(7,Ke,2,1,"div",21),e.qZA(),e.TgZ(8,"div",18),e.TgZ(9,"label",22),e._uU(10,"Seleccione una marca"),e.qZA(),e._UZ(11,"p-dropdown",23),e.YNc(12,tt,2,1,"div",21),e.qZA(),e.YNc(13,ot,4,1,"div",24),e.TgZ(14,"div",18),e.TgZ(15,"label",25),e._uU(16,"\u200e "),e.qZA(),e.TgZ(17,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).getLiquidacionAsesor()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("formGroup",t.formFilterAsesor),e.xp6(7),e.Q6J("ngIf",t.formFilterAsesor.controls.rangeDates.invalid&&t.formFilterAsesor.controls.rangeDates.dirty),e.xp6(4),e.Q6J("options",t.LiquidacionesDDL),e.xp6(1),e.Q6J("ngIf",t.formFilterAsesor.controls.tipoLiquidacion.invalid&&t.formFilterAsesor.controls.tipoLiquidacion.dirty),e.xp6(1),e.Q6J("ngIf",t.IsAdmin),e.xp6(4),e.Q6J("disabled",t.formFilterAsesor.invalid)}}function nt(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"\u3164Tabla Maestra"),e.qZA())}function rt(o,r){1&o&&(e.TgZ(0,"tr"),e._UZ(1,"th",33),e.TgZ(2,"th",34),e._uU(3,"Nobre Asesor "),e._UZ(4,"p-sorticon",35),e.qZA(),e.TgZ(5,"th",36),e._uU(6,"Meta "),e._UZ(7,"p-sorticon",37),e.qZA(),e.TgZ(8,"th",38),e._uU(9,"Avance "),e._UZ(10,"p-sorticon",39),e.qZA(),e.TgZ(11,"th",40),e._uU(12,"NC "),e._UZ(13,"p-sorticon",41),e.qZA(),e.TgZ(14,"th",42),e._uU(15,"Venta Neta"),e._UZ(16,"p-sorticon",43),e.qZA(),e.TgZ(17,"th",44),e._uU(18,"Cumplimineto"),e._UZ(19,"p-sorticon",45),e.qZA(),e.TgZ(20,"th",46),e._uU(21,"comision"),e._UZ(22,"p-sorticon",47),e.qZA(),e.TgZ(23,"th",48),e._uU(24,"Incentivo Cumplimiento"),e._UZ(25,"p-sorticon",49),e.qZA(),e.TgZ(26,"th",50),e._uU(27,"Zona"),e._UZ(28,"p-sorticon",51),e.qZA(),e.qZA())}function it(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"button",52),e.NdJ("click",function(){const n=e.CHM(t),i=n.$implicit,d=n.expanded;return e.oxw(2).GetDetalle(i.idAgt,d)}),e.qZA(),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"currency"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.ALo(16,"number"),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.ALo(19,"number"),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit,a=r.expanded;e.xp6(2),e.Q6J("pRowToggler",t)("icon",a?"pi pi-chevron-down":"pi pi-chevron-right"),e.xp6(2),e.Oqu(t.nombreAsesor),e.xp6(2),e.Oqu(e.xi3(7,11,t.meta,"Lps. ")),e.xp6(3),e.Oqu(e.xi3(10,14,t.avance,"Lps. ")),e.xp6(3),e.Oqu(e.xi3(13,17,t.nc,"Lps. ")),e.xp6(3),e.hij("Lps. ",e.xi3(16,20,t.avance-t.nc,"1.0-0"),""),e.xp6(3),e.hij(" ",e.xi3(19,23,(t.avance-t.nc)/t.meta*100,"1.0-0"),"%"),e.xp6(3),e.hij("Lps. ",(t.avance-t.nc)/t.meta>=1?t.bono:0,""),e.xp6(2),e.hij("Lps. ",t.bono,""),e.xp6(2),e.Oqu(t.zona)}}function lt(o,r){if(1&o&&(e.TgZ(0,"tr"),e._UZ(1,"td",53),e.TgZ(2,"td",54),e._uU(3,"Total:"),e.qZA(),e.TgZ(4,"td",54),e._uU(5),e.ALo(6,"number"),e.qZA(),e.TgZ(7,"td",54),e._uU(8),e.ALo(9,"number"),e.qZA(),e.TgZ(10,"td",54),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td",54),e._uU(14),e.ALo(15,"number"),e.qZA(),e._UZ(16,"td",54),e.TgZ(17,"td",54),e._uU(18),e.ALo(19,"number"),e.qZA(),e.TgZ(20,"td",54),e._uU(21),e.ALo(22,"number"),e.qZA(),e._UZ(23,"td",54),e._UZ(24,"td",54),e.qZA()),2&o){const t=e.oxw(2);e.xp6(5),e.Oqu(e.xi3(6,6,t.TMeta,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(9,9,t.TAvance,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(12,12,t.TNC,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(15,15,t.TVentaNeta,"1.0-0")),e.xp6(4),e.Oqu(e.xi3(19,18,t.Tcomision,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(22,21,t.TBono,"1.0-0"))}}function ct(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"\u3164Detalle"),e.qZA())}function st(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",57),e._uU(2,"Codigo Cliente"),e._UZ(3,"p-sorticon",58),e.qZA(),e.TgZ(4,"th",59),e._uU(5,"Nombre Cliente"),e._UZ(6,"p-sorticon",60),e.qZA(),e.TgZ(7,"th",61),e._uU(8,"Documento"),e._UZ(9,"p-sorticon",62),e.qZA(),e.TgZ(10,"th",63),e._uU(11,"Fecha"),e._UZ(12,"p-sorticon",64),e.qZA(),e.TgZ(13,"th",65),e._uU(14,"Codigo de Documento"),e._UZ(15,"p-sorticon",66),e.qZA(),e.TgZ(16,"th",67),e._uU(17,"Descripci\xf3n"),e._UZ(18,"p-sorticon",64),e.qZA(),e.TgZ(19,"th",68),e._uU(20,"Cantidad"),e._UZ(21,"p-sorticon",69),e.qZA(),e.TgZ(22,"th",70),e._uU(23,"Unidad de Medida"),e._UZ(24,"p-sorticon",71),e.qZA(),e.TgZ(25,"th",72),e._uU(26,"Precio"),e._UZ(27,"p-sorticon",73),e.qZA(),e.TgZ(28,"th",74),e._uU(29,"Linea Total"),e._UZ(30,"p-sorticon",75),e.qZA(),e.TgZ(31,"th",76),e._uU(32,"Tipo"),e._UZ(33,"p-sorticon",77),e.qZA(),e.qZA())}function ut(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.ALo(20,"currency"),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.ALo(23,"currency"),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.cardCode),e.xp6(2),e.Oqu(t.cardName),e.xp6(2),e.Oqu(t.documento),e.xp6(2),e.Oqu(e.xi3(9,11,t.docDate,"dd/MM/yyyy")),e.xp6(3),e.Oqu(t.itemCode),e.xp6(2),e.Oqu(t.dscription),e.xp6(2),e.Oqu(t.quantity),e.xp6(2),e.Oqu(t.unitMsr),e.xp6(2),e.Oqu(e.xi3(20,14,t.price,"Lps. ")),e.xp6(3),e.Oqu(e.xi3(23,17,t.lineTotal,"Lps. ")),e.xp6(3),e.Oqu(t.tipo)}}function dt(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",78),e._uU(2,"No hay contenido en este detalle."),e.qZA(),e.qZA())}function pt(o,r){if(1&o&&(e.TgZ(0,"div"),e.TgZ(1,"p-table",55),e.YNc(2,st,34,0,"ng-template",8),e.YNc(3,ut,26,20,"ng-template",11),e.YNc(4,dt,3,0,"ng-template",56),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("value",t.incentivoDetalle)}}function _t(o,r){1&o&&(e.TgZ(0,"p"),e._uU(1,"No hay detalles para mostrar."),e.qZA())}const mt=function(){return[10,25,50]},gt=function(){return["nombreAsesor"]},Zt=function(){return{"min-width":"60rem"}};function Tt(o,r){if(1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"center"),e.TgZ(2,"h1",4),e._uU(3),e.qZA(),e.qZA(),e._UZ(4,"hr"),e._UZ(5,"br"),e.YNc(6,at,18,6,"form",5),e.TgZ(7,"p-tabView",null,6),e.TgZ(9,"p-tabPanel",7),e.YNc(10,nt,2,0,"ng-template",8),e.TgZ(11,"p-table",9,10),e.YNc(13,rt,29,0,"ng-template",8),e.YNc(14,it,26,26,"ng-template",11),e.YNc(15,lt,25,24,"ng-template",12),e.qZA(),e.qZA(),e.TgZ(16,"p-tabPanel",13),e.YNc(17,ct,2,0,"ng-template",8),e.YNc(18,pt,5,1,"div",14),e.YNc(19,_t,2,0,"ng-template",null,15,e.W1O),e.qZA(),e.qZA()),2&o){const t=e.MAs(20),a=e.oxw();e.xp6(3),e.Oqu(a.Title),e.xp6(3),e.Q6J("ngIf",a.formFilterAsesor),e.xp6(5),e.Q6J("value",a.LiquidacionesxAsesor)("rows",10)("paginator",!0)("rowsPerPageOptions",e.DdM(10,mt))("globalFilterFields",e.DdM(11,gt))("tableStyle",e.DdM(12,Zt)),e.xp6(7),e.Q6J("ngIf",a.incentivoDetalle.length>0)("ngIfElse",t)}}let At=(()=>{class o{constructor(t,a,n,i){this.fromG=t,this.incentivoService=a,this.generalService=n,this.messageService=i,this.Title="Incentivo Miselaneo",this.incentivo_Miscelaneo=[],this.Incentivo=[],this.inceitivo_MicelaneoDetalle=[],this.incentivoDetalle=[],this.LiquidacionesXAsesorEncabezado=[],this.LiquidacionesxAsesor=[],this.AsesorEncabezado=[],this.Accessor=[],this.TablaFechaEncabezado=[],this.TablaFecha=[],this.AsesoresDDL=[],this.LiquidacionesDDL=[],this.TMeta=0,this.TAvance=0,this.TNC=0,this.TVentaNeta=0,this.Tcomision=0,this.TBono=0}ngOnInit(){const t=localStorage.getItem("currentUser");this.UsuarioData=JSON.parse(t),this.IsAdmin="Administrador"==this.UsuarioData.role,this._getAll()}_getAll(){var t=this;return(0,u.Z)(function*(){yield t.getTable(),yield t.getAsesores(),yield t._BuildFormFilterXX(t.TablaFecha[0].fechaInicial,t.TablaFecha[0].fechaFinal),yield t.getIncentivo(),yield t.getFilter(),yield t.BuildFormFilterAsesor(t.TablaFecha[0].fechaInicial)})()}_BuildFormFilterXX(t,a){var n=this;return(0,u.Z)(function*(){n.formFilter=n.fromG.group({fechaInicio:[new Date(t).toISOString().substring(0,10)],fechaFin:[new Date(a).toISOString().substring(0,10)],op:[1==n.IsAdmin?2:1],codAgt:[1==n.IsAdmin?0:1,s.kI.required],tipoLiquidacion:[0,s.kI.required],rangeDates:[new Date("fechaInicial"),s.kI.required]})})()}BuildFormAsesor(){var t=this;return(0,u.Z)(function*(){t.formFilterAsesor=t.fromG.group({tipoLiquidacion:[0,s.kI.required],rangeDates:[new Date("fechaInicial"),s.kI.required],op:[1==t.IsAdmin?2:1],codAgt:[1==t.IsAdmin?0:1,s.kI.required]})})()}BuildFormFilterAsesor(t){var a=this;return(0,u.Z)(function*(){const n=a.formatDateToCustomString(new Date(t));console.log(n),a.formFilterAsesor=a.fromG.group({tipoLiquidacion:[0,s.kI.required],rangeDates:["",s.kI.required],op:[1==a.IsAdmin?2:1],codAgt:[1==a.IsAdmin?0:a.UsuarioData.saleId,s.kI.required]})})()}formatDateToCustomString(t){const i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()],d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],m=t.getDate(),b=t.getFullYear(),A=t.getHours(),_=t.getMinutes().toString().padStart(2,"0"),v=t.getSeconds().toString().padStart(2,"0"),U=-t.getTimezoneOffset();return`${i} ${d} ${m} ${b} ${A}:${_}:${v} GMT${U>=0?"+":"-"}${Math.floor(Math.abs(U)/60).toString().padStart(2,"0")}${(Math.abs(U)%60).toString().padStart(2,"0")} (hora est\xe1ndar central)`}getLiquidacionAsesor(){var t=this;return(0,u.Z)(function*(){try{t.loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription);const a=t.formFilterAsesor.value.rangeDates.getFullYear(),n=t.formFilterAsesor.value.rangeDates.getMonth()+1;0!=t.formFilterAsesor.value.codAgt&&(t.formFilterAsesor.value.op=1),t.LiquidacionesXAsesorEncabezado=yield t.incentivoService.getLiquidacionAsesor(t.formFilterAsesor.value.tipoLiquidacion,a,n,t.formFilterAsesor.value.codAgt,t.formFilterAsesor.value.op),console.log(t.formFilterAsesor.value),t.LiquidacionesxAsesor=t.LiquidacionesXAsesorEncabezado.dataResult;let i=0,d=0,m=0,b=0,A=0,_=0;t.LiquidacionesxAsesor.forEach(v=>{i+=v.meta,d+=v.avance,m+=v.nc,b+=v.avance-v.nc,A+=v.comision,_+=v.bono}),t.TMeta=i,t.TAvance=d,t.TNC=m,t.TVentaNeta=b,t.Tcomision=A,t.TBono=_,c.V.closeLoading(),t.loading=!1}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}getAsesores(){var t=this;return(0,u.Z)(function*(){t.AsesorEncabezado=yield t.generalService.getAsesores(),t.Accessor=t.AsesorEncabezado.dataResult,t.AsesoresDDL=t.Accessor.map(a=>({salesPrson:a.salesPrson,nombreUsuario:a.nombreUsuario})),t.AsesoresDDL.unshift({salesPrson:0,nombreUsuario:"Seleccionar Todos"})})()}getTable(){var t=this;return(0,u.Z)(function*(){t.TablaFechaEncabezado=yield t.generalService.getTableFecha(),t.TablaFecha=t.TablaFechaEncabezado.dataResult})()}getIncentivo(){var t=this;return(0,u.Z)(function*(){t.incentivo_Miscelaneo=yield t.incentivoService.getIncentivo(t.formFilter.value.fechaInicio,t.formFilter.value.fechaFin,t.formFilter.value.op,t.formFilter.value.codAgt),t.Incentivo=t.incentivo_Miscelaneo.dataResult,t.LiquidacionesDDL=t.Incentivo.map(a=>({idMarca:a.idMarca,descripcion:a.descripcion})),t.LiquidacionesDDL.unshift({idMarca:0,descripcion:"Seleccione una marca"})})()}getFilter(){var t=this;return(0,u.Z)(function*(){if(t.formFilter.invalid)t.formFilter.markAllAsTouched();else{console.log(t.formFilter.value);try{t.loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),t.LiquidacionesXAsesorEncabezado=yield t.incentivoService.getLiquidacionAsesor(t.Incentivo[0].idMarca,new Date(t.TablaFecha[0].fechaInicial).getFullYear(),new Date(t.TablaFecha[0].fechaInicial).getMonth(),1==t.IsAdmin?0:t.UsuarioData.saleId,1==t.IsAdmin?2:1),t.LiquidacionesxAsesor=t.LiquidacionesXAsesorEncabezado.dataResult,console.log(t.LiquidacionesxAsesor);let a=0,n=0,i=0,d=0,m=0,b=0;t.LiquidacionesxAsesor.forEach(A=>{a+=A.meta,n+=A.avance,i+=A.nc,d+=A.avance-A.nc,m+=A.comision,b+=A.bono}),t.TMeta=a,t.TAvance=n,t.TNC=i,t.TVentaNeta=d,t.Tcomision=m,t.TBono=b,c.V.closeLoading(),t.loading=!1}catch(a){c.V.warning(a),c.V.closeLoading()}}})()}GetDetalle(t,a){var n=this;return(0,u.Z)(function*(){try{c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription);const i=""==n.formFilterAsesor.value.rangeDates?new Date(n.TablaFecha[0].fechaInicial).getFullYear():n.formFilterAsesor.value.rangeDates.getFullYear(),d=""==n.formFilterAsesor.value.rangeDates?new Date(n.TablaFecha[0].fechaInicial).getMonth():n.formFilterAsesor.value.rangeDates.getMonth()+1;n.inceitivo_MicelaneoDetalle=yield n.incentivoService.getDetalleLiquidacionXAsesor(n.Incentivo[0].idMarca,i,d,t),n.tabView.activeIndex=1,n.tabView.activeIndex=1,n.incentivoDetalle=n.inceitivo_MicelaneoDetalle.dataResult,c.V.closeLoading()}catch(i){c.V.closeLoading(),c.V.warning(i)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(He),e.Y36(I.m),e.Y36(q.ez))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-incentico",8,"miscelaneo"]],viewQuery:function(t,a){if(1&t&&e.Gf(Be,5),2&t){let n;e.iGM(n=e.CRH())&&(a.tabView=n.first)}},attrs:je,decls:4,vars:2,consts:[[1,"card"],[3,"ngIf","ngIfElse"],["showTable",""],[3,"title"],[1,"mt-2"],["class","mb-5",3,"formGroup",4,"ngIf"],["tabView",""],["header","Tabla Maestra"],["pTemplate","header"],["dataKey","idAgt","responsiveLayout","scroll",3,"value","rows","paginator","rowsPerPageOptions","globalFilterFields","tableStyle"],["TableIncentivo",""],["pTemplate","body"],["pTemplate","footer"],["header","Detalle"],[4,"ngIf","ngIfElse"],["noDetalle",""],[1,"mb-5",3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],["for","rangeDates"],["formControlName","rangeDates","view","month","dateFormat","mm/yy"],[4,"ngIf"],["for","LiquidacionesDDL"],["optionValue","idMarca","formControlName","tipoLiquidacion","optionLabel","descripcion",3,"options"],["class","col-12 md:col-6",4,"ngIf"],["for","sub"],["pButton","","type","button","label","Buscar",1,"p-button-secondary","p-button-outlined",3,"disabled","click"],["id","rangeDates","class","p-error block",4,"ngIf"],["id","rangeDates",1,"p-error","block"],["id","tipoLiquidacion","class","p-error block",4,"ngIf"],["id","tipoLiquidacion",1,"p-error","block"],["for","Asesor"],["optionValue","salesPrson","formControlName","codAgt","optionLabel","nombreUsuario",3,"options"],[2,"width","10rem"],["pSortableColumn","nombreAsesor",2,"width","70rem"],["field","nombreAsesor"],["pSortableColumn","meta",2,"width","40rem"],["field","meta"],["pSortableColumn","avance",2,"width","40rem"],["field","avance"],["pSortableColumn","nc",2,"width","40rem"],["field","nc"],["pSortableColumn","vtaNeta",2,"width","40rem"],["field","vtaNeta"],["pSortableColumn","Cumplimineto",2,"width","40rem"],["field","Cumplimineto"],["pSortableColumn","comision",2,"width","40rem"],["field","comision"],["pSortableColumn","bono",2,"width","40rem"],["field","bono"],["pSortableColumn","zona",2,"width","40rem"],["field","zona"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon","click"],[2,"width","2rem"],[2,"width","15%","min-width","12rem"],["dataKey","cardCode","responsiveLayout","scroll",3,"value"],["pTemplate","emptymessage"],["pSortableColumn","cardCode",2,"width","10rem"],["field","cardCode"],["pSortableColumn","cardName"],["field","cardName"],["pSortableColumn","documento"],["field","documento"],["pSortableColumn","docDate"],["field","dscription"],["pSortableColumn","itemCode"],["field","itemCode"],["pSortableColumn","dscription"],["pSortableColumn","quantity"],["field","quantity"],["pSortableColumn","unitMsr"],["field","unitMsr"],["pSortableColumn","price",2,"width","10rem"],["field","price"],["pSortableColumn","lineTotal",2,"width","10rem"],["field","lineTotal"],["pSortableColumn","tipo"],["field","tipo"],["colspan","11"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Xe,1,1,"ng-template",1),e.YNc(2,Tt,21,13,"ng-template",null,2,e.W1O),e.qZA()),2&t){const n=e.MAs(3);e.xp6(1),e.Q6J("ngIf",a.loading)("ngIfElse",n)}},directives:[T.O5,w.FN,S.xf,S.x4,q.jx,Z.iA,s._Y,s.JL,s.sg,P.f,s.JJ,s.u,L.Lt,O.Hq,Z.lQ,V.H,Z.jB],pipes:[T.H9,T.JJ,T.uU],styles:[""]}),o})(),bt=(()=>{class o{constructor(t){this.http=t}getf(t,a,n){var i=this;return(0,u.Z)(function*(){return yield(0,h.z)(i.http.get(`${f.N.MarketMastery}SaludFinanciera/Get/${t}/${a}/${n}`))})()}getDetalle(t,a){var n=this;return(0,u.Z)(function*(){return yield(0,h.z)(n.http.get(`${f.N.MarketMastery}SaludFinanciera/Detalle/${t}/${a}`))})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(G.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const ft=["class","financiera"];function ht(o,r){if(1&o&&e._UZ(0,"skeleton-table-component",3),2&o){const t=e.oxw();e.Q6J("title",t.Title)}}function Ct(o,r){1&o&&(e.TgZ(0,"small",20),e._uU(1,"El asesor es requerido"),e.qZA())}function qt(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Ct,2,0,"small",19),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formFil.controls.codAgt.errors.required)}}function vt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"form",11),e.TgZ(1,"div",12),e.TgZ(2,"div",13),e.TgZ(3,"label",14),e._uU(4,"Seleccione un Asesor"),e.qZA(),e._UZ(5,"p-dropdown",15),e.YNc(6,qt,2,1,"div",16),e.qZA(),e.TgZ(7,"div",13),e.TgZ(8,"label",17),e._uU(9,"\u200e "),e.qZA(),e.TgZ(10,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).getFilter()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("formGroup",t.formFil),e.xp6(5),e.Q6J("options",t.AsesoresDDL),e.xp6(1),e.Q6J("ngIf",t.formFil.controls.codAgt.invalid&&t.formFil.controls.codAgt.dirty)}}function xt(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",21),e.TgZ(2,"div",22),e.TgZ(3,"div",23),e.TgZ(4,"div",24),e.TgZ(5,"div"),e._UZ(6,"i",25),e._uU(7," Corriente "),e.TgZ(8,"div",26),e._uU(9),e.ALo(10,"number"),e.qZA(),e.qZA(),e.TgZ(11,"div",27),e.TgZ(12,"p",28),e._uU(13),e.ALo(14,"number"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"th"),e.TgZ(16,"div",22),e.TgZ(17,"div",23),e.TgZ(18,"div",24),e.TgZ(19,"div"),e._UZ(20,"i",25),e._uU(21," De 1 a 30 "),e.TgZ(22,"div",26),e._uU(23),e.ALo(24,"number"),e.qZA(),e.qZA(),e.TgZ(25,"div",27),e.TgZ(26,"p",28),e._uU(27),e.ALo(28,"number"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"th"),e.TgZ(30,"div",22),e.TgZ(31,"div",23),e.TgZ(32,"div",24),e.TgZ(33,"div"),e._UZ(34,"i",25),e._uU(35," De 31 a 60 "),e.TgZ(36,"div",26),e._uU(37),e.ALo(38,"number"),e.qZA(),e.qZA(),e.TgZ(39,"div",27),e.TgZ(40,"p",28),e._uU(41),e.ALo(42,"number"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"th"),e.TgZ(44,"div",22),e.TgZ(45,"div",23),e.TgZ(46,"div",24),e.TgZ(47,"div"),e._UZ(48,"i",25),e._uU(49," De 61 a 90 "),e.TgZ(50,"div",26),e._uU(51),e.ALo(52,"number"),e.qZA(),e.qZA(),e.TgZ(53,"div",27),e.TgZ(54,"p",28),e._uU(55),e.ALo(56,"number"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"th"),e.TgZ(58,"div",22),e.TgZ(59,"div",23),e.TgZ(60,"div",24),e.TgZ(61,"div"),e._UZ(62,"i",25),e._uU(63," De 91 a 120 "),e.TgZ(64,"div",26),e._uU(65),e.ALo(66,"number"),e.qZA(),e.qZA(),e.TgZ(67,"div",27),e.TgZ(68,"p",28),e._uU(69),e.ALo(70,"number"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(71,"th"),e.TgZ(72,"div",22),e.TgZ(73,"div",23),e.TgZ(74,"div",24),e.TgZ(75,"div"),e._UZ(76,"i",25),e._uU(77," Mas de 120 "),e.TgZ(78,"div",26),e._uU(79),e.ALo(80,"number"),e.qZA(),e.qZA(),e.TgZ(81,"div",27),e.TgZ(82,"p",28),e._uU(83),e.ALo(84,"number"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(85,"th"),e.TgZ(86,"div",22),e.TgZ(87,"div",23),e.TgZ(88,"div",24),e.TgZ(89,"div"),e._UZ(90,"i",25),e._uU(91," N/C "),e.TgZ(92,"div",26),e._uU(93),e.ALo(94,"number"),e.qZA(),e.qZA(),e.TgZ(95,"div",27),e.TgZ(96,"p",28),e._uU(97),e.ALo(98,"number"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(99,"th"),e.TgZ(100,"div",22),e.TgZ(101,"div",23),e.TgZ(102,"div",24),e.TgZ(103,"div"),e._UZ(104,"i",25),e._uU(105," Total "),e.TgZ(106,"div",26),e._uU(107),e.ALo(108,"number"),e.qZA(),e.qZA(),e.TgZ(109,"div",27),e.TgZ(110,"p",28),e._uU(111),e.ALo(112,"number"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(9),e.hij("Lps. ",e.xi3(10,16,t.VCorr,"1.0-0")," "),e.xp6(4),e.hij(" ",e.xi3(14,19,t.VCorrP,"1.0-0"),"% "),e.xp6(10),e.hij("Lps. ",e.xi3(24,22,t.VDe1a30,"1.0-0")," "),e.xp6(4),e.hij(" ",e.xi3(28,25,t.VDe1a30P,"1.0-0"),"% "),e.xp6(10),e.hij("Lps. ",e.xi3(38,28,t.VDe31a60,"1.0-0")," "),e.xp6(4),e.hij(" ",e.xi3(42,31,t.VDe31a60P,"1.0-0"),"% "),e.xp6(10),e.hij("Lps. ",e.xi3(52,34,t.VDe61a90,"1.0-0")," "),e.xp6(4),e.hij(" ",e.xi3(56,37,t.VDe61a90P,"1.0-0"),"% "),e.xp6(10),e.hij("Lps. ",e.xi3(66,40,t.VDe91a120,"1.0-0")," "),e.xp6(4),e.hij(" ",e.xi3(70,43,t.VDe91a120P,"1.0-0"),"% "),e.xp6(10),e.hij("Lps. ",e.xi3(80,46,t.VM120,"1.0-0")," "),e.xp6(4),e.hij(" ",e.xi3(84,49,t.VM120P,"1.0-0"),"% "),e.xp6(10),e.hij("Lps. ",e.xi3(94,52,t.VNC,"1.0-0")," "),e.xp6(4),e.hij(" ",e.xi3(98,55,t.VNCP,"1.0-0"),"% "),e.xp6(10),e.hij("Lps. ",e.xi3(108,58,t.VTlt,"1.0-0")," "),e.xp6(4),e.hij(" ",e.xi3(112,61,t.VTltP,"1.0-0"),"% ")}}function Ut(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",29),e._uU(2,"Asesor "),e._UZ(3,"p-columnFilter",30),e.qZA(),e.TgZ(4,"th",31),e._uU(5,"Codigo Cliente "),e._UZ(6,"p-column",32),e.qZA(),e.TgZ(7,"th",33),e._uU(8,"Nombre Cliente"),e._UZ(9,"p-columnFilter",34),e.qZA(),e.TgZ(10,"th",35),e._uU(11,"Total"),e._UZ(12,"p-columnFilter",36),e.qZA(),e.TgZ(13,"th",37),e._uU(14,"Limite Credito"),e._UZ(15,"p-columnFilter",38),e.qZA(),e.TgZ(16,"th",39),e._uU(17,"Disponible"),e._UZ(18,"p-columnFilter",40),e.qZA(),e.TgZ(19,"th",41),e._uU(20,"% Disponible"),e._UZ(21,"p-columnFilter",42),e.qZA(),e.TgZ(22,"th",43),e._uU(23,"Plazo"),e._UZ(24,"p-columnFilter",44),e.qZA(),e.TgZ(25,"th",45),e._uU(26,"Ultima Compra "),e._UZ(27,"p-columnFilter",46),e.qZA(),e.TgZ(28,"th",47),e._uU(29,"Dias Ult. Compra "),e._UZ(30,"p-columnFilter",48),e.qZA(),e.TgZ(31,"th",49),e._uU(32,"Ultimo pago "),e._UZ(33,"p-columnFilter",50),e.qZA(),e.TgZ(34,"th",51),e._uU(35,"corriente "),e._UZ(36,"p-columnFilter",52),e.qZA(),e.TgZ(37,"th",53),e._uU(38,"De 1-15 "),e._UZ(39,"p-columnFilter",52),e.qZA(),e.TgZ(40,"th",54),e._uU(41,"De 16-30 "),e._UZ(42,"p-columnFilter",52),e.qZA(),e.TgZ(43,"th",55),e._uU(44,"De 31-60 "),e._UZ(45,"p-columnFilter",52),e.qZA(),e.TgZ(46,"th",56),e._uU(47,"De 61-90 "),e._UZ(48,"p-columnFilter",52),e.qZA(),e.TgZ(49,"th",57),e._uU(50,"De 91 "),e._UZ(51,"p-columnFilter",52),e.qZA(),e.TgZ(52,"th",58),e._uU(53,"M\xe1s de 120 "),e._UZ(54,"p-columnFilter",52),e.qZA(),e.TgZ(55,"th",59),e._uU(56,"N/C "),e._UZ(57,"p-columnFilter",52),e.qZA(),e.TgZ(58,"th",60),e._uU(59,"chqposf"),e._UZ(60,"p-columnFilter",52),e.qZA(),e.TgZ(61,"th",61),e._uU(62,"Telefono #1"),e._UZ(63,"p-columnFilter",52),e.qZA(),e.TgZ(64,"th",62),e._uU(65,"Telefono #2 "),e._UZ(66,"p-columnFilter",52),e.qZA(),e.TgZ(67,"th",63),e._uU(68,"Canal"),e._UZ(69,"p-columnFilter",52),e.qZA(),e.TgZ(70,"th",64),e._uU(71,"Ruta "),e._UZ(72,"p-columnFilter",52),e.qZA(),e.TgZ(73,"th",65),e._uU(74,"Zona "),e._UZ(75,"p-columnFilter",52),e.qZA(),e.qZA())}function Ft(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",66),e._uU(2),e.qZA(),e.TgZ(3,"td",67),e._uU(4),e.qZA(),e.TgZ(5,"td",67),e._uU(6),e.qZA(),e.TgZ(7,"td",67),e._uU(8),e.ALo(9,"number"),e.qZA(),e.TgZ(10,"td",67),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td",67),e._uU(14),e.ALo(15,"number"),e.qZA(),e.TgZ(16,"td",67),e._uU(17),e.ALo(18,"number"),e.ALo(19,"number"),e.qZA(),e.TgZ(20,"td",67),e._uU(21),e.qZA(),e.TgZ(22,"td",67),e._uU(23),e.ALo(24,"date"),e.qZA(),e.TgZ(25,"td",67),e._uU(26),e.qZA(),e.TgZ(27,"td",67),e._uU(28),e.ALo(29,"date"),e.qZA(),e.TgZ(30,"td",67),e._uU(31),e.ALo(32,"currency"),e.qZA(),e.TgZ(33,"td",67),e._uU(34),e.ALo(35,"currency"),e.qZA(),e.TgZ(36,"td",67),e._uU(37),e.ALo(38,"currency"),e.qZA(),e.TgZ(39,"td",67),e._uU(40),e.ALo(41,"currency"),e.qZA(),e.TgZ(42,"td",67),e._uU(43),e.ALo(44,"currency"),e.qZA(),e.TgZ(45,"td",67),e._uU(46),e.ALo(47,"currency"),e.qZA(),e.TgZ(48,"td",67),e._uU(49),e.ALo(50,"currency"),e.qZA(),e.TgZ(51,"td",67),e._uU(52),e.ALo(53,"currency"),e.qZA(),e.TgZ(54,"td",67),e._uU(55),e.qZA(),e.TgZ(56,"td",67),e._uU(57),e.qZA(),e.TgZ(58,"td",67),e._uU(59),e.qZA(),e.TgZ(60,"td",67),e._uU(61),e.qZA(),e.TgZ(62,"td",67),e._uU(63),e.qZA(),e.TgZ(64,"td",67),e._uU(65),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.asesor),e.xp6(2),e.Oqu(t.cardCode),e.xp6(2),e.Oqu(t.codigo_Nombre),e.xp6(2),e.hij("Lps.",e.xi3(9,25,t.total,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(12,28,t.creditLine,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(15,31,t.creditLine-t.total,"1.0-0"),""),e.xp6(3),e.hij(" ",e.xi3(18,34,(t.creditLine-t.total)/t.creditLine*100,"1.2-2")>0?e.xi3(19,37,(t.creditLine-t.total)/t.creditLine*100,"1.2-2"):0,"% "),e.xp6(4),e.Oqu(t.plazo),e.xp6(2),e.Oqu(e.xi3(24,40,t.ulCompra,"dd/MM/yyyy")),e.xp6(3),e.Oqu(t.diasUlCompra),e.xp6(2),e.Oqu(e.xi3(29,43,t.ulPago,"dd/MM/yyyy")),e.xp6(3),e.Oqu(e.xi3(32,46,t.corriente,"Lps.")),e.xp6(3),e.Oqu(e.xi3(35,49,t.de1_15,"Lps.")),e.xp6(3),e.Oqu(e.xi3(38,52,t.de16_30,"Lps.")),e.xp6(3),e.Oqu(e.xi3(41,55,t.de31_60,"Lps.")),e.xp6(3),e.Oqu(e.xi3(44,58,t.de61_90,"Lps.")),e.xp6(3),e.Oqu(e.xi3(47,61,t.de91,"Lps.")),e.xp6(3),e.Oqu(e.xi3(50,64,t.mas120,"Lps.")),e.xp6(3),e.Oqu(e.xi3(53,67,t.n_C,"Lps.")),e.xp6(3),e.Oqu(t.chqposf),e.xp6(2),e.Oqu(t.phone1),e.xp6(2),e.Oqu(t.phone2),e.xp6(2),e.Oqu(t.canal),e.xp6(2),e.Oqu(t.ruta),e.xp6(2),e.Oqu(t.zona)}}function yt(o,r){if(1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"center"),e.TgZ(2,"h1",4),e._uU(3),e.qZA(),e.qZA(),e._UZ(4,"hr"),e._UZ(5,"br"),e.YNc(6,vt,11,3,"form",5),e.TgZ(7,"p-table",6,7),e.YNc(9,xt,113,64,"ng-template",8),e.qZA(),e._UZ(10,"br"),e._UZ(11,"br"),e._UZ(12,"br"),e.TgZ(13,"p-table",9,7),e.YNc(15,Ut,76,0,"ng-template",8),e.YNc(16,Ft,66,70,"ng-template",10),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.Title),e.xp6(3),e.Q6J("ngIf",t.formFil&&t.IsAdmin),e.xp6(1),e.Q6J("value",t.saludData)("scrollable",!0),e.xp6(6),e.Q6J("value",t.saludData)("paginator",!0)("rows",10)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40)}}let Dt=(()=>{class o{constructor(t,a,n,i){this.fromG=t,this.saludService=a,this.generalService=n,this.messageService=i,this.Title="Salud Financiera",this.saludFinanciera=[],this.saludData=[],this.saludFinancieraDetalle=[],this.saludDataDetalle=[],this.first=0,this.rows=10,this.AsesorEncabezado=[],this.Accessor=[],this.AsesoresDDL=[]}ngOnInit(){const t=localStorage.getItem("currentUser");this.UsuarioData=JSON.parse(t),this.IsAdmin="Administrador"==this.UsuarioData.role,this.BuildForm(),this.BuildFormFilter(),this.getAsesores(),this.get()}BuildForm(){var t=this;return(0,u.Z)(function*(){t.formFilter=t.fromG.group({usuarioId:[1,s.kI.required],op:[1==t.IsAdmin?1:2,s.kI.required],codAgt:[1==t.IsAdmin?1:t.UsuarioData.saleId,s.kI.required]})})()}BuildFormFilter(){var t=this;return(0,u.Z)(function*(){t.formFil=t.fromG.group({usuarioId:[1,s.kI.required],op:[1==t.IsAdmin?1:2,s.kI.required],codAgt:[1==t.IsAdmin?1:t.UsuarioData.saleId,s.kI.required]})})()}getAsesores(){var t=this;return(0,u.Z)(function*(){t.AsesorEncabezado=yield t.generalService.getAsesores(),t.Accessor=t.AsesorEncabezado.dataResult,t.AsesoresDDL=t.Accessor.map(a=>({salesPrson:a.salesPrson,nombreUsuario:a.nombreUsuario})),t.AsesoresDDL.unshift({salesPrson:0,nombreUsuario:"Seleccionar todos"})})()}get(){var t=this;return(0,u.Z)(function*(){try{t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),t.saludFinanciera=yield t.saludService.getf(t.formFilter.value.usuarioId,t.formFilter.value.op,t.formFilter.value.codAgt),t.saludData=t.saludFinanciera.dataResult;let a=0,n=0,i=0,d=0,m=0,b=0,A=0,_=0;t.saludData.forEach(x=>{a+=x.corriente,n+=x.de1_30,i+=x.de31_60,d+=x.de61_90,m+=x.de91,b+=x.mas120,A+=x.n_C,_+=x.total});const v=0!==_?a/_*100:0,U=0!==_?n/_*100:0,F=0!==_?i/_*100:0,y=0!==_?d/_*100:0,D=0!==_?m/_*100:0,g=0!==_?b/_*100:0,N=0!==_?A/_*100:0,M=0!==_?_/_*100:0;t.VCorr=a,t.VDe1a30=n,t.VDe31a60=i,t.VDe61a90=d,t.VDe91a120=m,t.VM120=b,t.VNC=A,t.VTlt=_,t.VCorrP=v,t.VDe1a30P=U,t.VDe31a60P=F,t.VDe61a90P=y,t.VDe91a120P=D,t.VM120P=g,t.VNCP=N,t.VTltP=M,c.V.closeLoading(),t.Loading=!1}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}getFilter(){var t=this;return(0,u.Z)(function*(){try{if(0==t.formFil.value.codAgt)t.messageService.add({severity:"warn",summary:"Warn",detail:p.G.SeleccioneCampo});else{t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),t.saludFinanciera=yield t.saludService.getf(t.formFil.value.usuarioId,t.formFil.value.op,t.formFil.value.codAgt);let a=0,n=0,i=0,d=0,m=0,b=0,A=0,_=0;t.saludData.forEach(x=>{a+=x.corriente,n+=x.de1_30,i+=x.de31_60,d+=x.de61_90,m+=x.de91,b+=x.mas120,A+=x.n_C,_+=x.total});const v=0!==_?a/_*100:0,U=0!==_?n/_*100:0,F=0!==_?i/_*100:0,y=0!==_?d/_*100:0,D=0!==_?m/_*100:0,g=0!==_?b/_*100:0,N=0!==_?A/_*100:0,M=0!==_?_/_*100:0;t.VCorr=a,t.VDe1a30=n,t.VDe31a60=i,t.VDe61a90=d,t.VDe91a120=m,t.VM120=b,t.VNC=A,t.VTlt=_,t.VCorrP=v,t.VDe1a30P=U,t.VDe31a60P=F,t.VDe61a90P=y,t.VDe91a120P=D,t.VM120P=g,t.VNCP=N,t.VTltP=M,t.saludData=t.saludFinanciera.dataResult,c.V.closeLoading(),t.Loading=!1}}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(bt),e.Y36(I.m),e.Y36(q.ez))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-salud",8,"financiera"]],attrs:ft,decls:4,vars:2,consts:[[1,"card"],[3,"ngIf","ngIfElse"],["showTable",""],[3,"title"],[1,"mt-2"],["class","mb-5",3,"formGroup",4,"ngIf"],["scrollHeight","120px",1,"custom-table",3,"value","scrollable"],["dt",""],["pTemplate","header"],["responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","scrollHeight","600px",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],["pTemplate","body"],[1,"mb-5",3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],["for","AsesoresDDL"],["formControlName","codAgt","optionValue","salesPrson","optionLabel","nombreUsuario",3,"options"],[4,"ngIf"],["for","sub"],["pButton","","type","button","label","Buscar",1,"p-button-secondary","p-button-outlined",3,"click"],["id","codAgt","class","p-error block",4,"ngIf"],["id","codAgt",1,"p-error","block"],[2,"width","70rem"],[1,"col-12"],[1,"surface-card","shadow-2","p-3","border-round"],[1,"flex","justify-content-between","mb-1"],[1,"pi","pi-spin","pi-dollar",2,"font-size","1rem","color","green"],[1,"text-900","font-small","text-m"],[1,"flex","align-items-center","justify-content-center","bg-green-500","border-round",2,"width","3rem","height","1.3rem"],[1,"text-m",2,"color","aliceblue"],["pSortableColumn","asesor",2,"width","200rem"],["type","text","field","numeroDocumento","display","menu",1,"ml-auto"],["pSortableColumn","cardCode"],["type","text","field","fecha","display","menu",1,"ml-auto"],["pSortableColumn","codigo_Nombre"],["type","text","field","codigoCliente","display","menu",1,"ml-auto"],["pSortableColumn","total"],["type","text","field","cliente","display","menu",1,"ml-auto"],["pSortableColumn","creditLine"],["type","text","field","totalDocumento","display","menu",1,"ml-auto"],["pSortableColumn","disponibleLC"],["type","text","field","codigoProducto","display","menu",1,"ml-auto"],["pSortableColumn","PorcDispo"],["type","text","field","nombreProducto","display","menu",1,"ml-auto"],["pSortableColumn","plazo"],["type","text","field","cantidad","display","menu",1,"ml-auto"],["pSortableColumn","ulCompra"],["type","text","field","unidadMedida","display","menu",1,"ml-auto"],["pSortableColumn","diasUlCompra"],["type","text","field","precio","display","menu",1,"ml-auto"],["pSortableColumn","ulPago"],["type","text","field","isv","display","menu",1,"ml-auto"],["pSortableColumn","corriente"],["type","text","field","totalXLinea","display","menu",1,"ml-auto"],["pSortableColumn","de1_15"],["pSortableColumn","de16_30"],["pSortableColumn","de31_60"],["pSortableColumn","de61_90"],["pSortableColumn","de91"],["pSortableColumn","mas120"],["pSortableColumn","n_C"],["pSortableColumn","chqposf"],["pSortableColumn","phone1"],["pSortableColumn","phone2"],["pSortableColumn","canal"],["pSortableColumn","ruta"],["pSortableColumn","zona"],[2,"width","15%","min-width","4rem"],[2,"width","10%","min-width","2rem"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,ht,1,1,"ng-template",1),e.YNc(2,yt,17,10,"ng-template",null,2,e.W1O),e.qZA()),2&t){const n=e.MAs(3);e.xp6(1),e.Q6J("ngIf",a.Loading)("ngIfElse",n)}},directives:[T.O5,w.FN,Z.iA,q.jx,s._Y,s.JL,s.sg,L.Lt,s.JJ,s.u,O.Hq,Z.lQ,Z.xl],pipes:[T.JJ,T.uU,T.H9],styles:[".Classcard[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:.2rem;background-color:#fff;max-width:8px;border-radius:10px;box-shadow:10px 10px #323232;border:3px solid #323232}.Classcard[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{display:flex}.Classcard[_ngcontent-%COMP%]   .carddd[_ngcontent-%COMP%]{margin-left:10px;padding:10px}.Classcard[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;align-items:center}.Classcard[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;padding:10px;background-color:#10b981;width:5px;height:5px;border-radius:9999px}.Classcard[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:relative;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;height:1rem}.Classcard[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{margin-left:.5rem;color:#374151;font-size:14px}.Classcard[_ngcontent-%COMP%]   .percent[_ngcontent-%COMP%]{margin-left:5px;color:#02972f;font-weight:600;display:flex;font-size:20px}.Classcard[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start}.Classcard[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#1f2937;font-size:15px;line-height:2.5rem;font-weight:700;text-align:left}.Classcard[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .range[_ngcontent-%COMP%]{position:relative;background-color:#e5e7eb;width:100%;height:.5rem;border-radius:.25rem}.Classcard[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .range[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background-color:#10b981;width:76%;height:100%;border-radius:.25rem}@media (max-width: 768px){.Classcard[_ngcontent-%COMP%]{max-width:100%}}@media (max-width: 480px){.title[_ngcontent-%COMP%], .data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;display:block}.title-text[_ngcontent-%COMP%], .percent[_ngcontent-%COMP%]{margin:5px 0}}.custom-table[_ngcontent-%COMP%]   .p-datatable-scrollable-body[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.custom-table[_ngcontent-%COMP%]   .p-datatable-scrollable-body[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.custom-table[_ngcontent-%COMP%]   .p-datatable-scrollable-header[_ngcontent-%COMP%], .custom-table[_ngcontent-%COMP%]   .p-datatable-scrollable-footer[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.custom-table[_ngcontent-%COMP%]   .p-datatable-scrollable-header[_ngcontent-%COMP%]::-webkit-scrollbar, .custom-table[_ngcontent-%COMP%]   .p-datatable-scrollable-footer[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]}),o})();const St=["class","gm"];let Ot=(()=>{class o{constructor(){this.Title="Avance Venta po Asesor"}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-venta",8,"gm"]],attrs:St,decls:0,vars:0,template:function(t,a){},styles:[""]}),o})();var It=C(8861);let re=(()=>{class o{constructor(t){this.http=t}get(t,a,n,i){var d=this;return(0,u.Z)(function*(){return yield(0,h.z)(d.http.get(`${f.N.MarketMastery}VisitasGenerales/Get/${t}/${a}/${n}/${i}`))})()}getVisitaMG(t,a,n,i){var d=this;return(0,u.Z)(function*(){return yield(0,h.z)(d.http.get(`${f.N.MarketMastery}VisitasGenerales/VisitaMg/${t}/${a}/${n}/${i}`))})()}getDetalleVisita(t,a,n,i){var d=this;return(0,u.Z)(function*(){return yield(0,h.z)(d.http.get(`${f.N.MarketMastery}VisitasGenerales/DetalleVisita/${t}/${a}/${n}/${i}`))})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(G.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function wt(o,r){if(1&o&&e._UZ(0,"skeleton-table-component",5),2&o){const t=e.oxw();e.Q6J("title",t.title)}}function Gt(o,r){1&o&&(e.TgZ(0,"small",27),e._uU(1,"El Rango de fecha es requerido"),e.qZA())}function Lt(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Gt,2,0,"small",26),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.rangeDate.errors.required)}}function Pt(o,r){1&o&&(e.TgZ(0,"small",30),e._uU(1,"El asesor es requerido"),e.qZA())}function Nt(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Pt,2,0,"small",29),e.qZA()),2&o){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.codAgt.errors.required)}}function Mt(o,r){if(1&o&&(e.TgZ(0,"div",19),e.TgZ(1,"label",20),e._uU(2,"Seleccione un Asesor"),e.qZA(),e._UZ(3,"p-dropdown",28),e.YNc(4,Nt,2,1,"div",22),e.qZA()),2&o){const t=e.oxw(3);e.xp6(3),e.Q6J("options",t.AsesoresDDL),e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.codAgt.invalid&&t.formFilter.controls.codAgt.dirty)}}function Vt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"form",17),e.TgZ(1,"div",18),e.TgZ(2,"div",19),e.TgZ(3,"label",20),e._uU(4,"Seleccione un rango de fecha"),e.qZA(),e._UZ(5,"p-calendar",21),e.YNc(6,Lt,2,1,"div",22),e.qZA(),e.YNc(7,Mt,5,2,"div",23),e.TgZ(8,"div",19),e.TgZ(9,"label",24),e._uU(10,"\u200e "),e.qZA(),e.TgZ(11,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).getFilter()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("formGroup",t.formFilter),e.xp6(5),e.Q6J("readonlyInput",!0),e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.rangeDate.invalid&&t.formFilter.controls.rangeDate.dirty),e.xp6(1),e.Q6J("ngIf",t.IsAdmin)}}function Rt(o,r){1&o&&(e.TgZ(0,"tr"),e._UZ(1,"th",31),e.TgZ(2,"th",32),e._uU(3,"Asesor"),e._UZ(4,"p-columnFilter",33),e.qZA(),e.TgZ(5,"th",34),e._uU(6,"Meta "),e._UZ(7,"p-column",35),e.qZA(),e.TgZ(8,"th",36),e._uU(9,"Avance Venta"),e._UZ(10,"p-columnFilter",37),e.qZA(),e.TgZ(11,"th",38),e._uU(12,"NC Item"),e._UZ(13,"p-columnFilter",39),e.qZA(),e.TgZ(14,"th",40),e._uU(15,"NC Servicios"),e._UZ(16,"p-columnFilter",41),e.qZA(),e.TgZ(17,"th",42),e._uU(18,"Nota Credito"),e._UZ(19,"p-columnFilter",43),e.qZA(),e.TgZ(20,"th",44),e._uU(21,"Venta Neta"),e._UZ(22,"p-columnFilter",45),e.qZA(),e.TgZ(23,"th",46),e._uU(24,"%Cumplimiento "),e._UZ(25,"p-columnFilter",47),e.qZA(),e.TgZ(26,"th",48),e._uU(27,"Venta + tuberia"),e._UZ(28,"p-columnFilter",49),e.qZA(),e.TgZ(29,"th",50),e._uU(30,"%Tuberia "),e._UZ(31,"p-columnFilter",51),e.qZA(),e.TgZ(32,"th",52),e._uU(33,"Total Tuberia "),e._UZ(34,"p-columnFilter",51),e.qZA(),e.TgZ(35,"th",53),e._uU(36,"Entregado Despacho "),e._UZ(37,"p-columnFilter",54),e.qZA(),e.TgZ(38,"th",55),e._uU(39,"En Proceso"),e._UZ(40,"p-columnFilter",56),e.qZA(),e.TgZ(41,"th",57),e._uU(42,"Pendiente Fac."),e._UZ(43,"p-columnFilter",56),e.qZA(),e.TgZ(44,"th",58),e._uU(45,"Zona "),e._UZ(46,"p-columnFilter",56),e.qZA(),e.qZA())}function kt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",59),e.TgZ(2,"button",60),e.NdJ("click",function(){const n=e.CHM(t),i=n.$implicit,d=n.expanded;return e.oxw(2).GetCobrosDetalle(i.codigo,d)}),e.qZA(),e.qZA(),e.TgZ(3,"td",61),e._uU(4),e.qZA(),e.TgZ(5,"td",62),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"td",62),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"td",62),e._uU(12),e.ALo(13,"currency"),e.qZA(),e.TgZ(14,"td",62),e._uU(15),e.ALo(16,"currency"),e.qZA(),e.TgZ(17,"td",62),e._uU(18),e.ALo(19,"currency"),e.qZA(),e.TgZ(20,"td",62),e._uU(21),e.ALo(22,"currency"),e.qZA(),e.TgZ(23,"td",62),e._uU(24),e.ALo(25,"number"),e.qZA(),e.TgZ(26,"td",62),e._uU(27),e.ALo(28,"currency"),e.qZA(),e.TgZ(29,"td",62),e._uU(30),e.ALo(31,"number"),e.qZA(),e.TgZ(32,"td",62),e._uU(33),e.ALo(34,"currency"),e.qZA(),e.TgZ(35,"td",62),e._uU(36),e.qZA(),e.TgZ(37,"td",62),e._uU(38),e.qZA(),e.TgZ(39,"td",62),e._uU(40),e.qZA(),e.TgZ(41,"td",62),e._uU(42),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit,a=r.expanded;e.xp6(2),e.Q6J("pRowToggler",t)("icon",a?"pi pi-chevron-down":"pi pi-chevron-right"),e.xp6(2),e.Oqu(t.nombreAgt),e.xp6(2),e.Oqu(e.xi3(7,17,t.meta,"Lps.")),e.xp6(3),e.Oqu(e.xi3(10,20,t.avanceVta,"Lps.")),e.xp6(3),e.Oqu(e.xi3(13,23,t.nci,"Lps.")),e.xp6(3),e.Oqu(e.xi3(16,26,t.ncs,"Lps.")),e.xp6(3),e.Oqu(e.xi3(19,29,t.nc,"Lps.")),e.xp6(3),e.Oqu(e.xi3(22,32,t.avanceVta-t.nc,"Lps.")),e.xp6(3),e.hij("",e.xi3(25,35,(t.avanceVta-t.nc)/t.meta*100,"1.0-0"),"%"),e.xp6(3),e.Oqu(e.xi3(28,38,t.avanceVta-t.nc+(t.entregado+t.proceso+t.pendiente),"Lps.")),e.xp6(3),e.hij("",e.xi3(31,41,(t.avanceVta-t.nc+(t.entregado+t.proceso+t.pendiente))/t.meta*100,"1.0-0"),"%"),e.xp6(3),e.Oqu(e.xi3(34,44,t.entregado+t.proceso+t.pendiente,"Lps.")),e.xp6(3),e.Oqu(t.entregado),e.xp6(2),e.Oqu(t.proceso),e.xp6(2),e.Oqu(t.pendiente),e.xp6(2),e.Oqu(t.zonaAgt)}}function Jt(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",63),e._uU(2,"Codigo Cliente"),e._UZ(3,"p-columnFilter",33),e.qZA(),e.TgZ(4,"th",64),e._uU(5,"Nombre Cliente "),e._UZ(6,"p-column",65),e.qZA(),e.TgZ(7,"th",66),e._uU(8,"Documento SBO "),e._UZ(9,"p-column",67),e.qZA(),e.qZA())}function Et(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",61),e._uU(2),e.qZA(),e.TgZ(3,"td",62),e._uU(4),e.qZA(),e.TgZ(5,"td",62),e._uU(6),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.cardCode),e.xp6(2),e.Oqu(t.cardName),e.xp6(2),e.Oqu(t.documento)}}function Yt(o,r){if(1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"center"),e.TgZ(2,"h1",6),e._uU(3),e.qZA(),e.qZA(),e._UZ(4,"hr"),e._UZ(5,"br"),e.YNc(6,Vt,12,4,"form",7),e.TgZ(7,"p-tabView",8,9),e.TgZ(9,"p-tabPanel",10),e.TgZ(10,"p-table",11,12),e.YNc(12,Rt,47,0,"ng-template",13),e.YNc(13,kt,43,47,"ng-template",14),e.qZA(),e.qZA(),e.TgZ(14,"p-tabPanel",15),e.TgZ(15,"p-table",16,12),e.YNc(17,Jt,10,0,"ng-template",13),e.YNc(18,Et,7,3,"ng-template",14),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.Title),e.xp6(3),e.Q6J("ngIf",t.formFilter),e.xp6(1),e.Q6J("activeIndex",t.activeTabIndex),e.xp6(3),e.Q6J("value",t.venta)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40),e.xp6(5),e.Q6J("value",t.VentaDetalle)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40)}}let Qt=(()=>{class o{constructor(t,a,n,i,d){this.fromG=t,this.VentasServices=a,this.generalService=n,this.messageService=i,this.service=d,this.Title="Venta General",this.ventaData=[],this.venta=[],this.VentaDetalle=[],this.Detalle=[],this.first=0,this.rows=10,this.AsesorEncabezado=[],this.Accessor=[],this.TablaFechaEncabezado=[],this.TablaFecha=[],this.AsesoresDDL=[],this.activeTabIndex=0}ngOnInit(){const t=localStorage.getItem("currentUser");this.UsuarioData=JSON.parse(t),this.IsAdmin="Administrador"==this.UsuarioData.role,this.getAll()}getAll(){var t=this;return(0,u.Z)(function*(){yield t.getTable(),yield t.getAsesores(),yield t._BuildForm(t.TablaFecha[0].fechaInicial,t.TablaFecha[0].fechaFinal),yield t.BuildFormFilter(t.TablaFecha[0].fechaInicial,t.TablaFecha[0].fechaFinal),yield t.get()})()}_BuildForm(t,a){var n=this;return(0,u.Z)(function*(){n.formFilter=n.fromG.group({fechaInicio:[new Date(t).toISOString().substring(0,10),s.kI.required],fechaFin:[new Date(a).toISOString().substring(0,10),s.kI.required],op:[1==n.IsAdmin?2:1],codAgt:[1==n.IsAdmin?0:n.UsuarioData.saleId,s.kI.required],rangeDate:["",s.kI.required]})})()}GetCobrosDetalle(t,a){var n=this;return(0,u.Z)(function*(){try{n.formFilter.value.slpCode=t,n.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),n.VentaDetalle=yield n.service.getDetalleVisita(""==n.formFilter.value.rangeDate?new Date(n.TablaFecha[0].fechaInicial).toISOString().substring(0,10):new Date(n.formFilter.value.rangeDate[0]).toISOString().substring(0,10),""==n.formFilter.value.rangeDate?new Date(n.TablaFecha[0].fechaFinal).toISOString().substring(0,10):new Date(n.formFilter.value.rangeDate[1]).toISOString().substring(0,10),n.formFilter.value.op,n.formFilter.value.codAgt),n.VentaDetalle=n.VentaDetalle.dataResult,n.activeTabIndex=1,c.V.closeLoading(),n.Loading=!1}catch(i){c.V.closeLoading(),c.V.warning(i)}})()}BuildFormFilter(t,a){var n=this;return(0,u.Z)(function*(){n.formFil=n.fromG.group({rangeDate:["",s.kI.required],op:[1==n.IsAdmin?2:1],codAgt:[1==n.IsAdmin?0:n.UsuarioData.saleId,s.kI.required]})})()}getAsesores(){var t=this;return(0,u.Z)(function*(){t.AsesorEncabezado=yield t.generalService.getAsesores(),t.Accessor=t.AsesorEncabezado.dataResult,t.AsesoresDDL=t.Accessor.map(a=>({salesPrson:a.salesPrson,nombreUsuario:a.nombreUsuario})),t.AsesoresDDL.unshift({salesPrson:0,nombreUsuario:"Seleccionar todos"})})()}getTable(){var t=this;return(0,u.Z)(function*(){t.TablaFechaEncabezado=yield t.generalService.getTableFecha(),t.TablaFecha=t.TablaFechaEncabezado.dataResult})()}get(){var t=this;return(0,u.Z)(function*(){try{t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),t.ventaData=yield t.VentasServices.getAvanceVentas(new Date(t.TablaFecha[0].fechaInicial).toISOString().substring(0,10),new Date(t.TablaFecha[0].fechaFinal).toISOString().substring(0,10),1==t.IsAdmin?2:1,1==t.IsAdmin?0:t.UsuarioData.saleId),t.venta=t.ventaData.dataResult,c.V.closeLoading(),t.Loading=!1}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}getFilter(){var t=this;return(0,u.Z)(function*(){try{""==t.formFilter.value.rangeDate?t.messageService.add({severity:"warn",summary:"Warn",detail:p.G.FormularioInvalido}):(t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),0!=t.formFilter.value.codAgt&&(t.formFilter.value.op=1),t.ventaData=yield t.VentasServices.getAvanceVentas(new Date(t.formFilter.value.rangeDate[0]).toISOString().substring(0,10),new Date(t.formFilter.value.rangeDate[1]).toISOString().substring(0,10),t.formFilter.value.op,t.formFilter.value.codAgt),t.venta=t.ventaData.dataResult,c.V.closeLoading(),t.Loading=!1)}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(It.v),e.Y36(I.m),e.Y36(q.ez),e.Y36(re))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-ventas"]],decls:6,vars:2,consts:[[1,"grid"],[1,"col-12","xl:col-12"],[1,"card"],[3,"ngIf","ngIfElse"],["showTable",""],[3,"title"],[1,"mt-2"],["class","mb-5",3,"formGroup",4,"ngIf"],[3,"activeIndex"],["tabView",""],["header","Todos"],["dataKey","codigo","responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","scrollHeight","450px",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],["dt",""],["pTemplate","header"],["pTemplate","body"],["header","Detalle"],["responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","scrollHeight","450px",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],[1,"mb-5",3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],["for","AsesoresDDL"],["formControlName","rangeDate","selectionMode","range",3,"readonlyInput"],[4,"ngIf"],["class","col-12 md:col-6",4,"ngIf"],["for","sub"],["pButton","","type","button","label","Buscar",1,"p-button-secondary","p-button-outlined",3,"click"],["id","rangeDate","class","p-error block",4,"ngIf"],["id","rangeDate",1,"p-error","block"],["formControlName","codAgt","optionValue","salesPrson","optionLabel","nombreUsuario",3,"options"],["id","codAgt","class","p-error block",4,"ngIf"],["id","codAgt",1,"p-error","block"],[2,"width","2rem"],["pSortableColumn","nombreAgt",2,"width","70rem"],["type","text","field","numeroDocumento","display","menu",1,"ml-auto"],["pSortableColumn","meta"],["type","text","field","fecha","display","menu",1,"ml-auto"],["pSortableColumn","avanceVta"],["type","text","field","codigoCliente","display","menu",1,"ml-auto"],["pSortableColumn","nci"],["type","text","field","cliente","display","menu",1,"ml-auto"],["pSortableColumn","ncs"],["type","text","field","totalDocumento","display","menu",1,"ml-auto"],["pSortableColumn","nc"],["type","text","field","codigoProducto","display","menu",1,"ml-auto"],["pSortableColumn","vtaNeta"],["type","text","field","nombreProducto","display","menu",1,"ml-auto"],["pSortableColumn","porcen"],["type","text","field","cantidad","display","menu",1,"ml-auto"],["pSortableColumn","vtsMasTuberia"],["type","text","field","unidadMedida","display","menu",1,"ml-auto"],["pSortableColumn","porcenvtamastuberia"],["type","text","field","precio","display","menu",1,"ml-auto"],["pSortableColumn","totalTuberia"],["pSortableColumn","entregado"],["type","text","field","isv","display","menu",1,"ml-auto"],["pSortableColumn","proceso"],["type","text","field","totalXLinea","display","menu",1,"ml-auto"],["pSortableColumn","pendiente"],["pSortableColumn","zonaAgt"],[2,"width","5%","min-width","2rem"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon","click"],[2,"width","70rem"],[2,"width","10%","min-width","2rem"],["pSortableColumn","nombre",2,"width","70rem"],["pSortableColumn","nombreAsesor"],["type","text","field","nombreAsesor","display","menu",1,"ml-auto"],["pSortableColumn","documento"],["type","text","field","documento","display","menu",1,"ml-auto"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,wt,1,1,"ng-template",3),e.YNc(4,Yt,19,15,"ng-template",null,4,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(5);e.xp6(3),e.Q6J("ngIf",a.Loading)("ngIfElse",n)}},directives:[T.O5,w.FN,S.xf,S.x4,Z.iA,q.jx,s._Y,s.JL,s.sg,P.f,s.JJ,s.u,O.Hq,L.Lt,Z.lQ,Z.xl,V.H,Z.jB],pipes:[T.H9,T.JJ],styles:[""]}),o})();var ie=C(7043);function zt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"span",12),e._UZ(2,"i",13),e.TgZ(3,"input",14),e.NdJ("input",function(n){return e.CHM(t),e.oxw(),e.MAs(7).filterGlobal(n.target.value,"contains")}),e.qZA(),e.qZA(),e.qZA()}}function $t(o,r){1&o&&(e.TgZ(0,"tr"),e._UZ(1,"th",15),e.TgZ(2,"th",16),e._uU(3,"valor "),e._UZ(4,"p-sortIcon",17),e.qZA(),e.TgZ(5,"th",18),e._uU(6,"Id "),e._UZ(7,"p-sortIcon",19),e.qZA(),e.TgZ(8,"th",20),e._uU(9,"porcentajeCumplimiento "),e._UZ(10,"p-sortIcon",21),e.qZA(),e.qZA())}function Ht(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"button",22),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().GetDetalle(i.tipo)}),e.qZA(),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit,a=r.expanded;e.xp6(2),e.Q6J("pRowToggler",t)("icon",a?"pi pi-chevron-down":"pi pi-chevron-right"),e.xp6(2),e.Oqu(t.tipo),e.xp6(2),e.Oqu(t.valor),e.xp6(2),e.Oqu(t.porcentajeCumplimiento)}}function Bt(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",28),e._uU(2,"cardCode "),e._UZ(3,"p-sortIcon",29),e.qZA(),e.TgZ(4,"th",30),e._uU(5,"cardName "),e._UZ(6,"p-sortIcon",31),e.qZA(),e.TgZ(7,"th",32),e._uU(8,"documento "),e._UZ(9,"p-sortIcon",33),e.qZA(),e.TgZ(10,"th",34),e._uU(11,"docDate "),e._UZ(12,"p-sortIcon",35),e.qZA(),e.TgZ(13,"th",36),e._uU(14,"itemCode "),e._UZ(15,"p-sortIcon",37),e.qZA(),e.TgZ(16,"th",38),e._uU(17,"quantity "),e._UZ(18,"p-sortIcon",39),e.qZA(),e.TgZ(19,"th",40),e._uU(20,"dscription "),e._UZ(21,"p-sortIcon",35),e.qZA(),e.TgZ(22,"th",41),e._uU(23,"unitMsr "),e._UZ(24,"p-sortIcon",42),e.qZA(),e.TgZ(25,"th",43),e._uU(26,"price "),e._UZ(27,"p-sortIcon",44),e.qZA(),e.TgZ(28,"th",45),e._uU(29,"lineTotal "),e._UZ(30,"p-sortIcon",46),e.qZA(),e.TgZ(31,"th",47),e._uU(32,"tipo "),e._UZ(33,"p-sortIcon",19),e.qZA(),e._UZ(34,"th",48),e.qZA())}function jt(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e._uU(23," n "),e.TgZ(24,"td"),e._UZ(25,"p-button",49),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.cardCode),e.xp6(2),e.Oqu(t.cardName),e.xp6(2),e.Oqu(t.documento),e.xp6(2),e.Oqu(t.docDate),e.xp6(2),e.Oqu(t.itemCode),e.xp6(2),e.Oqu(t.dscription),e.xp6(2),e.Oqu(t.quantity),e.xp6(2),e.Oqu(t.unitMsr),e.xp6(2),e.Oqu(t.price),e.xp6(2),e.Oqu(t.lineTotal),e.xp6(2),e.Oqu(t.tipo)}}function Xt(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",50),e._uU(2,"No hay cointenido en este detalle."),e.qZA(),e.qZA())}function Wt(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",23),e.TgZ(2,"div",24),e.TgZ(3,"p-table",25),e.YNc(4,Bt,35,0,"ng-template",26),e.YNc(5,jt,26,11,"ng-template",9),e.YNc(6,Xt,3,0,"ng-template",27),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("value",t.ventaDetalle)}}const Kt=function(){return[10,25,50]},eo=function(){return["tipo","valor"]},to=function(){return{"min-width":"60rem"}};let oo=(()=>{class o{constructor(t,a){this.fromG=t,this.VentasServices=a,this.ventaData=[],this.venta=[],this.VentaDetalle=[],this.Detalle=[],this.first=0,this.rows=10}ngOnInit(){this._BuildFormFilter(),this.get()}_BuildFormFilter(){var t=this;return(0,u.Z)(function*(){t.formFilter=t.fromG.group({fechaInicio:[new Date("2024-05-01").toISOString().substring(0,10),s.kI.required],fechaFin:[new Date("2024-05-15").toISOString().substring(0,10),s.kI.required],op:[2,s.kI.required],codAgt:[0,s.kI.required]})})()}next(){this.first=this.first+this.rows}prev(){this.first=this.first-this.rows}reset(){this.first=0}pageChange(t){this.first=t.first,this.rows=t.rows}isLastPage(){return!this.venta||this.first===this.venta.length-this.rows}isFirstPage(){return!this.venta||0===this.first}get(){var t=this;return(0,u.Z)(function*(){try{t.loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),console.log(t.formFilter),t.ventaData=yield t.VentasServices.get(t.formFilter.value.fechaInicio,t.formFilter.value.fechaFin,t.formFilter.value.op,t.formFilter.value.codAgt),t.venta=t.ventaData.dataResult,console.log(t.venta),c.V.closeLoading(),t.loading=!1}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}GetDetalle(t){var a=this;return(0,u.Z)(function*(){try{a.loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),console.log(a.formFilter),a.VentaDetalle=yield a.VentasServices.getDetalleVisita(a.formFilter.value.fechaInicio,a.formFilter.value.fechaFin,a.formFilter.value.op,a.formFilter.value.codAgt),a.Detalle=a.VentaDetalle.dataResult,console.log(a.Detalle),c.V.closeLoading(),a.loading=!1}catch(n){c.V.closeLoading(),c.V.warning(n)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(re))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-asesor"]],decls:12,vars:12,consts:[[1,"card"],[1,"mb-3"],["type","button","icon","pi pi-chevron-left","styleClass","p-button-text",3,"disabled","click"],["type","button","icon","pi pi-refresh","styleClass","p-button-text",3,"click"],["type","button","icon","pi pi-chevron-right","styleClass","p-button-text",3,"disabled","click"],["responsiveLayout","scroll","dataKey","valor",3,"lazy","value","rows","paginator","rowsPerPageOptions","globalFilterFields","tableStyle"],["Tableventa",""],["pTemplate","caption"],["pTemplate","header","responsiveLayout","scroll"],["pTemplate","body"],["pTemplate","rowexpansion"],[1,"flex"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search keyword",3,"input"],[2,"width","5rem"],["pSortableColumn","valor",2,"width","40rem"],["field","valor"],["pSortableColumn","tipo",2,"width","40rem"],["field","tipo"],["pSortableColumn","porcentajeCumplimiento",2,"width","40rem"],["field","porcentajeCumplimiento"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon","click"],["colspan","7"],[1,"p-3"],["dataKey","cardCode",3,"value"],["pTemplate","header"],["pTemplate","emptymessage"],["pSortableColumn","cardCode"],["field","cardCode"],["pSortableColumn","cardName"],["field","cardName"],["pSortableColumn","documento"],["field","documento"],["pSortableColumn","docDate"],["field","dscription"],["pSortableColumn","itemCode"],["field","itemCode"],["pSortableColumn","quantity"],["field","quantity"],["pSortableColumn","dscription"],["pSortableColumn","unitMsr"],["field","unitMsr"],["pSortableColumn","price"],["field","price"],["pSortableColumn","lineTotal"],["field","lineTotal"],["pSortableColumn","tipo"],[2,"width","4rem"],["type","button","icon","pi pi-plus"],["colspan","6"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"p-button",2),e.NdJ("click",function(){return a.prev()}),e.qZA(),e.TgZ(4,"p-button",3),e.NdJ("click",function(){return a.reset()}),e.qZA(),e.TgZ(5,"p-button",4),e.NdJ("click",function(){return a.next()}),e.qZA(),e.qZA(),e.TgZ(6,"p-table",5,6),e.YNc(8,zt,4,0,"ng-template",7),e.YNc(9,$t,11,0,"ng-template",8),e.YNc(10,Ht,9,5,"ng-template",9),e.YNc(11,Wt,7,1,"ng-template",10),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("disabled",a.isFirstPage()),e.xp6(2),e.Q6J("disabled",a.isLastPage()),e.xp6(1),e.Q6J("lazy",!0)("value",a.venta)("rows",10)("paginator",!0)("rowsPerPageOptions",e.DdM(9,Kt))("globalFilterFields",e.DdM(10,eo))("tableStyle",e.DdM(11,to)))},directives:[O.zx,Z.iA,q.jx,ie.o,Z.lQ,Z.fz,O.Hq,V.H,Z.jB],styles:[""]}),o})(),ao=(()=>{class o{constructor(t){this.http=t}GetCoberturas(t,a){var n=this;return(0,u.Z)(function*(){return yield(0,h.z)(n.http.get(`${f.N.MarketMastery}Cobertura/GetCoberturas/${t}/${a}`))})()}GetCoberturaNuevo(t,a,n,i){var d=this;return(0,u.Z)(function*(){return yield(0,h.z)(d.http.get(`${f.N.MarketMastery}Cobertura/Nuevo/${n}/${i}/${t}/${a}`))})()}GetCoberturaDetalleNuevo(t,a,n,i,d){var m=this;return(0,u.Z)(function*(){return yield(0,h.z)(m.http.get(`${f.N.MarketMastery}DetalleSubCategoria/get/${a}/${n}/${t}/${i}/${d}`))})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(G.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var no=C(209);const ro=["tabView"],io=["class","cobertura sc"];function lo(o,r){if(1&o&&e._UZ(0,"skeleton-table-component",5),2&o){const t=e.oxw();e.Q6J("title",t.Title)}}function co(o,r){1&o&&(e.TgZ(0,"small",32),e._uU(1,"El Rango de fecha es requerido"),e.qZA())}function so(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,co,2,0,"small",31),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formFil.controls.rangeDate.errors.required)}}function uo(o,r){1&o&&(e.TgZ(0,"small",35),e._uU(1,"El asesor es requerido"),e.qZA())}function po(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,uo,2,0,"small",34),e.qZA()),2&o){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",t.formFil.controls.codAgt.errors.required)}}function _o(o,r){if(1&o&&(e.TgZ(0,"div",24),e.TgZ(1,"label",25),e._uU(2,"Seleccione un Asesor"),e.qZA(),e._UZ(3,"p-dropdown",33),e.YNc(4,po,2,1,"div",27),e.qZA()),2&o){const t=e.oxw(3);e.xp6(3),e.Q6J("options",t.AsesoresDDL),e.xp6(1),e.Q6J("ngIf",t.formFil.controls.codAgt.invalid&&t.formFil.controls.codAgt.dirty)}}function mo(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"form",22),e.TgZ(1,"div",23),e.TgZ(2,"div",24),e.TgZ(3,"label",25),e._uU(4,"Seleccione un rango de fecha"),e.qZA(),e._UZ(5,"p-calendar",26),e.YNc(6,so,2,1,"div",27),e.qZA(),e.YNc(7,_o,5,2,"div",28),e.TgZ(8,"div",24),e.TgZ(9,"label",29),e._uU(10,"\u200e "),e.qZA(),e.TgZ(11,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).getFilter()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("formGroup",t.formFil),e.xp6(5),e.Q6J("readonlyInput",!0),e.xp6(1),e.Q6J("ngIf",t.formFil.controls.rangeDate.invalid&&t.formFil.controls.rangeDate.dirty),e.xp6(1),e.Q6J("ngIf",t.IsAdmin)}}function go(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",36),e._uU(2,"Nombre Asesor"),e._UZ(3,"p-column",37),e.qZA(),e.TgZ(4,"th",38),e._uU(5,"Sub-Cat."),e._UZ(6,"p-column",39),e.qZA(),e.TgZ(7,"th",40),e._uU(8,"Meta Clientes"),e._UZ(9,"p-column",41),e.qZA(),e.TgZ(10,"th",42),e._uU(11,"Cobertura del Periodo"),e._UZ(12,"p-column",43),e.qZA(),e.TgZ(13,"th",44),e._uU(14,"%Cumplimiento"),e._UZ(15,"p-column",43),e.qZA(),e.TgZ(16,"th",45),e._uU(17,"Cobertura del Periodo + Tuberia"),e._UZ(18,"p-column",43),e.qZA(),e.TgZ(19,"th",46),e._uU(20,"Cobertura del Periodo Tuberia"),e._UZ(21,"p-column",43),e.qZA(),e.TgZ(22,"th",46),e._uU(23,"% Cumplimiento + Tuberia"),e._UZ(24,"p-column",43),e.qZA(),e.TgZ(25,"th",47),e._uU(26,"Entregado Despacho"),e._UZ(27,"p-column",43),e.qZA(),e.TgZ(28,"th",48),e._uU(29,"En Proceso"),e._UZ(30,"p-column",43),e.qZA(),e.TgZ(31,"th",46),e._uU(32,"Pendiente Fac."),e._UZ(33,"p-column",43),e.qZA(),e.TgZ(34,"th",49),e._uU(35,"Zona"),e._UZ(36,"p-column",43),e.qZA(),e.qZA())}function Zo(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",50),e._uU(2),e.qZA(),e.TgZ(3,"td",50),e._uU(4),e.qZA(),e.TgZ(5,"td",50),e._uU(6),e.qZA(),e.TgZ(7,"td",50),e._uU(8),e.qZA(),e.TgZ(9,"td",50),e._uU(10),e.ALo(11,"number"),e.qZA(),e.TgZ(12,"td",50),e._uU(13),e.qZA(),e.TgZ(14,"td",50),e._uU(15),e.qZA(),e.TgZ(16,"td",50),e._uU(17),e.ALo(18,"number"),e.qZA(),e.TgZ(19,"td",50),e._uU(20),e.qZA(),e.TgZ(21,"td",50),e._uU(22),e.qZA(),e.TgZ(23,"td",50),e._uU(24),e.qZA(),e.TgZ(25,"td",50),e._uU(26),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.asesor),e.xp6(2),e.Oqu(t.subCategoria),e.xp6(2),e.Oqu(t.meta),e.xp6(2),e.Oqu(t.clientes),e.xp6(2),e.hij("",e.xi3(11,12,t.clientes/t.meta*100,"1.0-0")," %"),e.xp6(3),e.Oqu(t.clientes+t.clientes_EntregadoDespacho+t.clientes_EnProceso+t.clientes_PendienteFac),e.xp6(2),e.Oqu(t.clientes_EntregadoDespacho+t.clientes_EnProceso+t.clientes_PendienteFac),e.xp6(2),e.hij("",e.xi3(18,15,(t.clientes+t.clientes_EntregadoDespacho+t.clientes_EnProceso+t.clientes_PendienteFac)/t.meta*100,"1.0-0")," %"),e.xp6(3),e.Oqu(t.clientes_EnProceso),e.xp6(2),e.Oqu(t.clientes_EntregadoDespacho),e.xp6(2),e.Oqu(t.clientes_EnProceso),e.xp6(2),e.Oqu(t.zona)}}function To(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",51),e._uU(2,"Nombre de Vendedor"),e._UZ(3,"p-column",52),e.qZA(),e.TgZ(4,"th",53),e._uU(5,"Codigo de Cliente"),e._UZ(6,"p-column",54),e.qZA(),e.TgZ(7,"th",55),e._uU(8,"Nombre de Cliente"),e._UZ(9,"p-column",56),e.qZA(),e.TgZ(10,"th",57),e._uU(11,"Codigo de Producto"),e._UZ(12,"p-column",58),e.qZA(),e.TgZ(13,"th",59),e._uU(14,"Nombre de Producto"),e._UZ(15,"p-column",60),e.qZA(),e.TgZ(16,"th",61),e._uU(17,"Marca"),e._UZ(18,"p-column",62),e.qZA(),e.TgZ(19,"th",63),e._uU(20,"Cantidad de Pedido"),e._UZ(21,"p-column",64),e.qZA(),e.qZA())}function Ao(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",65),e._uU(2),e.qZA(),e.TgZ(3,"td",65),e._uU(4),e.qZA(),e.TgZ(5,"td",65),e._uU(6),e.qZA(),e.TgZ(7,"td",65),e._uU(8),e.qZA(),e.TgZ(9,"td",65),e._uU(10),e.qZA(),e.TgZ(11,"td",65),e._uU(12),e.qZA(),e.TgZ(13,"td",65),e._uU(14),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombre_Vendedor),e.xp6(2),e.Oqu(t.codigo_Cliente),e.xp6(2),e.Oqu(t.nombre_Cliente),e.xp6(2),e.Oqu(t.itemCode),e.xp6(2),e.Oqu(t.nombreProducto),e.xp6(2),e.Oqu(t.marca),e.xp6(2),e.Oqu(t.cantidadPedido)}}function bo(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",51),e._uU(2,"Nombre de Vendedor"),e._UZ(3,"p-column",52),e.qZA(),e.TgZ(4,"th",53),e._uU(5,"Codigo de Cliente"),e._UZ(6,"p-column",54),e.qZA(),e.TgZ(7,"th",55),e._uU(8,"Nombre de Cliente"),e._UZ(9,"p-column",56),e.qZA(),e.TgZ(10,"th",57),e._uU(11,"Codigo de Producto"),e._UZ(12,"p-column",58),e.qZA(),e.TgZ(13,"th",59),e._uU(14,"Nombre de Producto"),e._UZ(15,"p-column",60),e.qZA(),e.TgZ(16,"th",61),e._uU(17,"Marca"),e._UZ(18,"p-column",62),e.qZA(),e.TgZ(19,"th",63),e._uU(20,"Cantidad de Pedido"),e._UZ(21,"p-column",64),e.qZA(),e.qZA())}function fo(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",65),e._uU(2),e.qZA(),e.TgZ(3,"td",65),e._uU(4),e.qZA(),e.TgZ(5,"td",65),e._uU(6),e.qZA(),e.TgZ(7,"td",65),e._uU(8),e.qZA(),e.TgZ(9,"td",65),e._uU(10),e.qZA(),e.TgZ(11,"td",65),e._uU(12),e.qZA(),e.TgZ(13,"td",65),e._uU(14),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.hij("",t.nombre_Vendedor," "),e.xp6(2),e.Oqu(t.codigo_Cliente),e.xp6(2),e.Oqu(t.nombre_Cliente),e.xp6(2),e.Oqu(t.itemCode),e.xp6(2),e.Oqu(t.nombreProducto),e.xp6(2),e.Oqu(t.marca),e.xp6(2),e.Oqu(t.cantidadPedido)}}function ho(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",51),e._uU(2,"Nombre de Vendedor"),e._UZ(3,"p-column",52),e.qZA(),e.TgZ(4,"th",53),e._uU(5,"Codigo de Cliente"),e._UZ(6,"p-column",54),e.qZA(),e.TgZ(7,"th",55),e._uU(8,"Nombre de Cliente"),e._UZ(9,"p-column",56),e.qZA(),e.TgZ(10,"th",57),e._uU(11,"Codigo de Producto"),e._UZ(12,"p-column",58),e.qZA(),e.TgZ(13,"th",59),e._uU(14,"Nombre de Producto"),e._UZ(15,"p-column",60),e.qZA(),e.TgZ(16,"th",61),e._uU(17,"Marca"),e._UZ(18,"p-column",62),e.qZA(),e.TgZ(19,"th",63),e._uU(20,"Cantidad de Pedido"),e._UZ(21,"p-column",64),e.qZA(),e.qZA())}function Co(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",65),e._uU(2),e.qZA(),e.TgZ(3,"td",65),e._uU(4),e.qZA(),e.TgZ(5,"td",65),e._uU(6),e.qZA(),e.TgZ(7,"td",65),e._uU(8),e.qZA(),e.TgZ(9,"td",65),e._uU(10),e.qZA(),e.TgZ(11,"td",65),e._uU(12),e.qZA(),e.TgZ(13,"td",65),e._uU(14),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.hij("",t.nombre_Vendedor," "),e.xp6(2),e.Oqu(t.codigo_Cliente),e.xp6(2),e.Oqu(t.nombre_Cliente),e.xp6(2),e.Oqu(t.itemCode),e.xp6(2),e.Oqu(t.nombreProducto),e.xp6(2),e.Oqu(t.marca),e.xp6(2),e.Oqu(t.cantidadPedido)}}function qo(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",51),e._uU(2,"Nombre de Vendedor"),e._UZ(3,"p-column",52),e.qZA(),e.TgZ(4,"th",53),e._uU(5,"Codigo de Cliente"),e._UZ(6,"p-column",54),e.qZA(),e.TgZ(7,"th",55),e._uU(8,"Nombre de Cliente"),e._UZ(9,"p-column",56),e.qZA(),e.TgZ(10,"th",57),e._uU(11,"Codigo de Producto"),e._UZ(12,"p-column",58),e.qZA(),e.TgZ(13,"th",59),e._uU(14,"Nombre de Producto"),e._UZ(15,"p-column",60),e.qZA(),e.TgZ(16,"th",61),e._uU(17,"Marca"),e._UZ(18,"p-column",62),e.qZA(),e.TgZ(19,"th",63),e._uU(20,"Cantidad de Pedido"),e._UZ(21,"p-column",64),e.qZA(),e.qZA())}function vo(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",65),e._uU(2),e.qZA(),e.TgZ(3,"td",65),e._uU(4),e.qZA(),e.TgZ(5,"td",65),e._uU(6),e.qZA(),e.TgZ(7,"td",65),e._uU(8),e.qZA(),e.TgZ(9,"td",65),e._uU(10),e.qZA(),e.TgZ(11,"td",65),e._uU(12),e.qZA(),e.TgZ(13,"td",65),e._uU(14),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.hij("",t.nombre_Vendedor," "),e.xp6(2),e.Oqu(t.codigo_Cliente),e.xp6(2),e.Oqu(t.nombre_Cliente),e.xp6(2),e.Oqu(t.itemCode),e.xp6(2),e.Oqu(t.nombreProducto),e.xp6(2),e.Oqu(t.marca),e.xp6(2),e.Oqu(t.cantidadPedido)}}function xo(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",51),e._uU(2,"Nombre de Vendedor"),e._UZ(3,"p-column",52),e.qZA(),e.TgZ(4,"th",53),e._uU(5,"Codigo de Cliente"),e._UZ(6,"p-column",54),e.qZA(),e.TgZ(7,"th",55),e._uU(8,"Nombre de Cliente"),e._UZ(9,"p-column",56),e.qZA(),e.TgZ(10,"th",57),e._uU(11,"Codigo de Producto"),e._UZ(12,"p-column",58),e.qZA(),e.TgZ(13,"th",59),e._uU(14,"Nombre de Producto"),e._UZ(15,"p-column",60),e.qZA(),e.TgZ(16,"th",61),e._uU(17,"Marca"),e._UZ(18,"p-column",62),e.qZA(),e.TgZ(19,"th",63),e._uU(20,"Cantidad de Pedido"),e._UZ(21,"p-column",64),e.qZA(),e.qZA())}function Uo(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",65),e._uU(2),e.qZA(),e.TgZ(3,"td",65),e._uU(4),e.qZA(),e.TgZ(5,"td",65),e._uU(6),e.qZA(),e.TgZ(7,"td",65),e._uU(8),e.qZA(),e.TgZ(9,"td",65),e._uU(10),e.qZA(),e.TgZ(11,"td",65),e._uU(12),e.qZA(),e.TgZ(13,"td",65),e._uU(14),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.hij("",t.nombre_Vendedor," "),e.xp6(2),e.Oqu(t.codigo_Cliente),e.xp6(2),e.Oqu(t.nombre_Cliente),e.xp6(2),e.Oqu(t.itemCode),e.xp6(2),e.Oqu(t.nombreProducto),e.xp6(2),e.Oqu(t.marca),e.xp6(2),e.Oqu(t.cantidadPedido)}}function Fo(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",51),e._uU(2,"Nombre de Vendedor"),e._UZ(3,"p-column",52),e.qZA(),e.TgZ(4,"th",53),e._uU(5,"Codigo de Cliente"),e._UZ(6,"p-column",54),e.qZA(),e.TgZ(7,"th",55),e._uU(8,"Nombre de Cliente"),e._UZ(9,"p-column",56),e.qZA(),e.TgZ(10,"th",57),e._uU(11,"Codigo de Producto"),e._UZ(12,"p-column",58),e.qZA(),e.TgZ(13,"th",59),e._uU(14,"Nombre de Producto"),e._UZ(15,"p-column",60),e.qZA(),e.TgZ(16,"th",61),e._uU(17,"Marca"),e._UZ(18,"p-column",62),e.qZA(),e.TgZ(19,"th",63),e._uU(20,"Cantidad de Pedido"),e._UZ(21,"p-column",64),e.qZA(),e.qZA())}function yo(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",65),e._uU(2),e.qZA(),e.TgZ(3,"td",65),e._uU(4),e.qZA(),e.TgZ(5,"td",65),e._uU(6),e.qZA(),e.TgZ(7,"td",65),e._uU(8),e.qZA(),e.TgZ(9,"td",65),e._uU(10),e.qZA(),e.TgZ(11,"td",65),e._uU(12),e.qZA(),e.TgZ(13,"td",65),e._uU(14),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.hij("",t.nombre_Vendedor," "),e.xp6(2),e.Oqu(t.codigo_Cliente),e.xp6(2),e.Oqu(t.nombre_Cliente),e.xp6(2),e.Oqu(t.itemCode),e.xp6(2),e.Oqu(t.nombreProducto),e.xp6(2),e.Oqu(t.marca),e.xp6(2),e.Oqu(t.cantidadPedido)}}function Do(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",51),e._uU(2,"Nombre de Vendedor"),e._UZ(3,"p-column",52),e.qZA(),e.TgZ(4,"th",53),e._uU(5,"Codigo de Cliente"),e._UZ(6,"p-column",54),e.qZA(),e.TgZ(7,"th",55),e._uU(8,"Nombre de Cliente"),e._UZ(9,"p-column",56),e.qZA(),e.TgZ(10,"th",57),e._uU(11,"Codigo de Producto"),e._UZ(12,"p-column",58),e.qZA(),e.TgZ(13,"th",59),e._uU(14,"Nombre de Producto"),e._UZ(15,"p-column",60),e.qZA(),e.TgZ(16,"th",61),e._uU(17,"Marca"),e._UZ(18,"p-column",62),e.qZA(),e.TgZ(19,"th",63),e._uU(20,"Cantidad de Pedido"),e._UZ(21,"p-column",64),e.qZA(),e.qZA())}function So(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",65),e._uU(2),e.qZA(),e.TgZ(3,"td",65),e._uU(4),e.qZA(),e.TgZ(5,"td",65),e._uU(6),e.qZA(),e.TgZ(7,"td",65),e._uU(8),e.qZA(),e.TgZ(9,"td",65),e._uU(10),e.qZA(),e.TgZ(11,"td",65),e._uU(12),e.qZA(),e.TgZ(13,"td",65),e._uU(14),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.hij("",t.nombre_Vendedor," "),e.xp6(2),e.Oqu(t.codigo_Cliente),e.xp6(2),e.Oqu(t.nombre_Cliente),e.xp6(2),e.Oqu(t.itemCode),e.xp6(2),e.Oqu(t.nombreProducto),e.xp6(2),e.Oqu(t.marca),e.xp6(2),e.Oqu(t.cantidadPedido)}}function Oo(o,r){if(1&o){const t=e.EpF();e._UZ(0,"p-toast"),e.TgZ(1,"center"),e.TgZ(2,"h1",6),e._uU(3),e.qZA(),e.qZA(),e._UZ(4,"hr"),e._UZ(5,"br"),e.YNc(6,mo,12,4,"form",7),e.TgZ(7,"p-tabView",8,9),e.NdJ("onChange",function(n){return e.CHM(t),e.oxw().handleChange(n)}),e.TgZ(9,"p-tabPanel",10),e.TgZ(10,"p-table",11,12),e.YNc(12,go,37,0,"ng-template",13),e.YNc(13,Zo,27,18,"ng-template",14),e.qZA(),e.qZA(),e.TgZ(14,"p-tabPanel",15),e.TgZ(15,"p-table",11,12),e.YNc(17,To,22,0,"ng-template",13),e.YNc(18,Ao,15,7,"ng-template",14),e.qZA(),e.qZA(),e.TgZ(19,"p-tabPanel",16),e.TgZ(20,"p-table",11,12),e.YNc(22,bo,22,0,"ng-template",13),e.YNc(23,fo,15,7,"ng-template",14),e.qZA(),e.qZA(),e.TgZ(24,"p-tabPanel",17),e.TgZ(25,"p-table",11,12),e.YNc(27,ho,22,0,"ng-template",13),e.YNc(28,Co,15,7,"ng-template",14),e.qZA(),e.qZA(),e.TgZ(29,"p-tabPanel",18),e.TgZ(30,"p-table",11,12),e.YNc(32,qo,22,0,"ng-template",13),e.YNc(33,vo,15,7,"ng-template",14),e.qZA(),e.qZA(),e.TgZ(34,"p-tabPanel",19),e.TgZ(35,"p-table",11,12),e.YNc(37,xo,22,0,"ng-template",13),e.YNc(38,Uo,15,7,"ng-template",14),e.qZA(),e.qZA(),e.TgZ(39,"p-tabPanel",20),e.TgZ(40,"p-table",11,12),e.YNc(42,Fo,22,0,"ng-template",13),e.YNc(43,yo,15,7,"ng-template",14),e.qZA(),e.qZA(),e.TgZ(44,"p-tabPanel",21),e.TgZ(45,"p-table",11,12),e.YNc(47,Do,22,0,"ng-template",13),e.YNc(48,So,15,7,"ng-template",14),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.Title),e.xp6(3),e.Q6J("ngIf",t.formFil&&t.IsAdmin),e.xp6(1),e.Q6J("activeIndex",t.activeTabIndex),e.xp6(3),e.Q6J("value",t.avance)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40),e.xp6(5),e.Q6J("value",t.CuidadoCorporal)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40),e.xp6(5),e.Q6J("value",t.DesodoranteCorpotal)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40),e.xp6(5),e.Q6J("value",t.QuitaEsmalte)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40),e.xp6(5),e.Q6J("value",t.TalcoDesodorante)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40),e.xp6(5),e.Q6J("value",t.TinteParaElCabello)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40),e.xp6(5),e.Q6J("value",t.ToallaHumeda)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40),e.xp6(5),e.Q6J("value",t.BybeNutrine)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40)}}let Io=(()=>{class o{constructor(t,a,n,i,d){this.fromG=t,this.AvanceCoberturaSC=a,this.generalService=n,this.messageService=i,this.indexedDBService=d,this.activeTabIndex=0,this.Title="Avance Sub-Categoria",this.avanceCobertura=[],this.avance=[],this.coberturaDetalle=[],this.detalle=[],this.CuidadoCorporal=[],this.DesodoranteCorpotal=[],this.QuitaEsmalte=[],this.TalcoDesodorante=[],this.TinteParaElCabello=[],this.ToallaHumeda=[],this.BybeNutrine=[],this.first=0,this.rows=10,this.AsesorEncabezado=[],this.Accessor=[],this.TablaFechaEncabezado=[],this.TablaFecha=[],this.AsesoresDDL=[]}ngOnInit(){const t=localStorage.getItem("currentUser");this.UsuarioData=JSON.parse(t),this.IsAdmin="Administrador"==this.UsuarioData.role,this.getAll()}getAll(){var t=this;return(0,u.Z)(function*(){yield t.getTable(),yield t.getAsesores(),yield t.BuildForm(t.TablaFecha[0].fechaInicial,t.TablaFecha[0].fechaFinal),yield t.BuildFormFilter(),yield t.get()})()}BuildForm(t,a){var n=this;return(0,u.Z)(function*(){n.formFilter=n.fromG.group({fechaInicio:[new Date(t).toISOString().substring(0,10),s.kI.required],fechaFin:[new Date(a).toISOString().substring(0,10),s.kI.required],op:[1==n.IsAdmin?2:1],codAgt:[1==n.IsAdmin?0:1,s.kI.required]})})()}BuildFormFilter(){var t=this;return(0,u.Z)(function*(){t.formFil=t.fromG.group({rangeDate:["",s.kI.required],op:[1==t.IsAdmin?2:1],codAgt:[1==t.IsAdmin?0:t.UsuarioData.saleId,s.kI.required]})})()}getAsesores(){var t=this;return(0,u.Z)(function*(){t.AsesorEncabezado=yield t.generalService.getAsesores(),t.Accessor=t.AsesorEncabezado.dataResult,t.AsesoresDDL=t.Accessor.map(a=>({salesPrson:a.salesPrson,nombreUsuario:a.nombreUsuario})),t.AsesoresDDL.unshift({salesPrson:0,nombreUsuario:"Seleccionar todos"})})()}getTable(){var t=this;return(0,u.Z)(function*(){t.TablaFechaEncabezado=yield t.generalService.getTableFecha(),t.TablaFecha=t.TablaFechaEncabezado.dataResult})()}get(){var t=this;return(0,u.Z)(function*(){try{t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription);const a=1==t.IsAdmin?2:1,n=1==t.IsAdmin?0:t.UsuarioData.saleId,i=t.formFilter.value.fechaInicio,d=t.formFilter.value.fechaFin;t.avanceCobertura=yield t.indexedDBService.getRecord("records",`AvanceCoberturaSubacategotria-${a}-${n}-${i}-${d}`),t.avanceCobertura||(t.avanceCobertura=yield t.AvanceCoberturaSC.GetCoberturaNuevo(a,n,i,d),t.indexedDBService.addRecord("records",{id:`AvanceCoberturaSubacategotria-${a}-${n}-${i}-${d}`,dataResult:t.avanceCobertura.dataResult})),t.avance=t.avanceCobertura.dataResult,c.V.closeLoading(),t.Loading=!1}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}handleChange(t){var a=this;return(0,u.Z)(function*(){switch(t.index){case 1:a.CuidadoCorporal=yield a.GetDetalle(148),a.activeTabIndex=1;break;case 2:a.DesodoranteCorpotal=yield a.GetDetalle(150),a.activeTabIndex=2;break;case 3:a.QuitaEsmalte=yield a.GetDetalle(167),a.activeTabIndex=3;break;case 4:a.TalcoDesodorante=yield a.GetDetalle(172),a.activeTabIndex=4;break;case 5:a.TinteParaElCabello=yield a.GetDetalle(174),a.activeTabIndex=5;break;case 6:a.ToallaHumeda=yield a.GetDetalle(175),a.activeTabIndex=6;break;case 7:a.BybeNutrine=yield a.GetDetalle(404),a.activeTabIndex=7}})()}GetDetalle(t){var a=this;return(0,u.Z)(function*(){try{a.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription);let n=a.formFil.value.rangeDate?new Date(a.formFil.value.rangeDate[0]).toISOString().substring(0,10):"",i=a.formFil.value.rangeDate?new Date(a.formFil.value.rangeDate[1]).toISOString().substring(0,10):"";return console.log(a.formFil.value.codAgt),console.log(1==a.IsAdmin?a.formFil.value.codAgt?a.formFil.value.codAgt:0:a.UsuarioData.saleId),console.log(1==a.IsAdmin?a.formFil.value.codAgt?1:2:1),a.coberturaDetalle=yield a.AvanceCoberturaSC.GetCoberturaDetalleNuevo(t,n||a.formFilter.value.fechaInicio,i||a.formFilter.value.fechaFin,1==a.IsAdmin?a.formFil.value.codAgt?a.formFil.value.codAgt:0:a.UsuarioData.saleId,1==a.IsAdmin?a.formFil.value.codAgt?1:2:1),a.detalle=a.coberturaDetalle.dataResult,console.log(a.formFilter),console.log(a.detalle),c.V.closeLoading(),a.Loading=!1,a.detalle}catch(n){return c.V.closeLoading(),c.V.warning(n),console.log(n),[]}})()}getFilter(){var t=this;return(0,u.Z)(function*(){try{""==t.formFil.value.rangeDate?t.messageService.add({severity:"warn",summary:"Warn",detail:p.G.FormularioInvalido}):(t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),0!=t.formFil.value.codAgt&&(t.formFil.value.op=1),t.avanceCobertura=yield t.AvanceCoberturaSC.GetCoberturaNuevo(t.formFil.value.op,t.formFil.value.codAgt,new Date(t.formFil.value.rangeDate[0]).toISOString().substring(0,10),new Date(t.formFil.value.rangeDate[1]).toISOString().substring(0,10)),t.avance=t.avanceCobertura.dataResult,c.V.closeLoading(),t.Loading=!1)}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(ao),e.Y36(I.m),e.Y36(q.ez),e.Y36(no.H))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-avance",8,"cobertura","sc"]],viewQuery:function(t,a){if(1&t&&e.Gf(ro,5),2&t){let n;e.iGM(n=e.CRH())&&(a.tabView=n.first)}},attrs:io,decls:6,vars:2,consts:[[1,"grid"],[1,"col-12","xl:col-12"],[1,"card"],[3,"ngIf","ngIfElse"],["showTable",""],[3,"title"],[1,"mt-2"],["class","mb-5",3,"formGroup",4,"ngIf"],[3,"activeIndex","onChange"],["tabView",""],["header","Global"],["responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","scrollHeight","450px",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],["dt",""],["pTemplate","header"],["pTemplate","body"],["header","Cuidado Corporal",2,"display","block"],["header","Desodorantes Corporales"],["header","Quitaesmaltes"],["header","Talco Desodorante"],["header","Tintes Para El Cabello"],["header","Toallas Humedas"],["header","Baby Nutrine"],[1,"mb-5",3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],["for","AsesoresDDL"],["formControlName","rangeDate","selectionMode","range",3,"readonlyInput"],[4,"ngIf"],["class","col-12 md:col-6",4,"ngIf"],["for","sub"],["pButton","","type","button","label","Buscar",1,"p-button-secondary","p-button-outlined",3,"click"],["id","rangeDate","class","p-error block",4,"ngIf"],["id","rangeDate",1,"p-error","block"],["formControlName","codAgt","optionValue","salesPrson","optionLabel","nombreUsuario",3,"options"],["id","codAgt","class","p-error block",4,"ngIf"],["id","codAgt",1,"p-error","block"],["pSortableColumn","asesor",2,"width","70rem"],["type","text","field","nombreAsesor","display","menu",1,"ml-auto"],["pSortableColumn","subCategoria"],["type","text","field","totalAvanceVta","display","menu",1,"ml-auto"],["pSortableColumn","meta"],["type","text","field","totalVta","display","menu",1,"ml-auto"],["pSortableColumn","clientes"],["type","text","field","zona","display","menu",1,"ml-auto"],["pSortableColumn","Cumplimiento"],["pSortableColumn","TotalTuberiaPeriodo"],["pSortableColumn","clientes_PendienteFac"],["pSortableColumn","clientes_EntregadoDespacho"],["pSortableColumn","clientes_EnProceso"],["pSortableColumn","Zona"],[2,"width","15%","min-width","2rem"],["pSortableColumn","nombre_Vendedor",2,"width","70rem"],["type","text","field","nombre_Vendedor","display","menu",1,"ml-auto"],["pSortableColumn","codigo_Cliente"],["type","text","field","codigo_Cliente","display","menu",1,"ml-auto"],["pSortableColumn","nombre_Cliente"],["type","text","field","nombre_Cliente","display","menu",1,"ml-auto"],["pSortableColumn","itemCode"],["type","text","field","itemCode","display","menu",1,"ml-auto"],["pSortableColumn","nombreProducto"],["type","text","field","nombreProducto","display","menu",1,"ml-auto"],["pSortableColumn","marca"],["type","text","field","marca","display","menu",1,"ml-auto"],["pSortableColumn","cantidadPedido"],["type","text","field","cantidadPedido","display","menu",1,"ml-auto"],[2,"width","10%","min-width","2rem"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,lo,1,1,"ng-template",3),e.YNc(4,Oo,49,51,"ng-template",null,4,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(5);e.xp6(3),e.Q6J("ngIf",a.Loading)("ngIfElse",n)}},directives:[T.O5,w.FN,S.xf,S.x4,Z.iA,q.jx,s._Y,s.JL,s.sg,P.f,s.JJ,s.u,O.Hq,L.Lt,Z.lQ],pipes:[T.JJ],styles:[""]}),o})(),wo=(()=>{class o{constructor(t){this.http=t}getGrupo(t,a,n,i){var d=this;return(0,u.Z)(function*(){return yield(0,h.z)(d.http.get(`${f.N.MarketMastery}Grupo/Get/${t}/${a}/${n}/${i}`))})()}getGrupoDetalle(t,a,n){var i=this;return(0,u.Z)(function*(){return yield(0,h.z)(i.http.get(`${f.N.MarketMastery}Grupo/Detalle/${t}/${a}/${n}`))})()}getGrupoPromedio(t,a,n,i){var d=this;return(0,u.Z)(function*(){return yield(0,h.z)(d.http.get(`${f.N.MarketMastery}Grupo/DetallePromedio/${t}/${a}/${n}/${i}`))})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(G.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Go=["tabView"];function Lo(o,r){if(1&o&&e._UZ(0,"skeleton-table-component",5),2&o){const t=e.oxw();e.Q6J("title",t.Title)}}function Po(o,r){1&o&&(e.TgZ(0,"small",33),e._uU(1,"El Rango de fecha es requerido"),e.qZA())}function No(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Po,2,0,"small",32),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formFil.controls.rangeDate.errors.required)}}function Mo(o,r){1&o&&(e.TgZ(0,"small",36),e._uU(1,"El asesor es requerido"),e.qZA())}function Vo(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Mo,2,0,"small",35),e.qZA()),2&o){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",t.formFil.controls.codAgt.errors.required)}}function Ro(o,r){if(1&o&&(e.TgZ(0,"div",25),e.TgZ(1,"label",26),e._uU(2,"Seleccione un Asesor"),e.qZA(),e._UZ(3,"p-dropdown",34),e.YNc(4,Vo,2,1,"div",28),e.qZA()),2&o){const t=e.oxw(3);e.xp6(3),e.Q6J("options",t.AsesoresDDL),e.xp6(1),e.Q6J("ngIf",t.formFil.controls.codAgt.invalid&&t.formFil.controls.codAgt.dirty)}}function ko(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"form",23),e.TgZ(1,"div",24),e.TgZ(2,"div",25),e.TgZ(3,"label",26),e._uU(4,"Seleccione un rango de fecha"),e.qZA(),e._UZ(5,"p-calendar",27),e.YNc(6,No,2,1,"div",28),e.qZA(),e.YNc(7,Ro,5,2,"div",29),e.TgZ(8,"div",25),e.TgZ(9,"label",30),e._uU(10,"\u200e "),e.qZA(),e.TgZ(11,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).getFilter()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("formGroup",t.formFil),e.xp6(5),e.Q6J("readonlyInput",!0),e.xp6(1),e.Q6J("ngIf",t.formFil.controls.rangeDate.invalid&&t.formFil.controls.rangeDate.dirty),e.xp6(1),e.Q6J("ngIf",t.IsAdmin)}}function Jo(o,r){1&o&&(e.TgZ(0,"tr"),e._UZ(1,"th",37),e.TgZ(2,"th",38),e._uU(3,"Nombre Asesor"),e._UZ(4,"p-column",39),e.qZA(),e.TgZ(5,"th",40),e._uU(6,"Meta Global"),e._UZ(7,"p-column",41),e.qZA(),e.TgZ(8,"th",42),e._uU(9,"Total Av. Venta"),e._UZ(10,"p-column",43),e.qZA(),e.TgZ(11,"th",44),e._uU(12,"Total N/C"),e._UZ(13,"p-column",45),e.qZA(),e.TgZ(14,"th",46),e._uU(15,"Total Venta"),e._UZ(16,"p-column",47),e.qZA(),e.TgZ(17,"th",48),e._uU(18,"% Total"),e._UZ(19,"p-column",49),e.qZA(),e.TgZ(20,"th",50),e._uU(21,"Zona"),e._UZ(22,"p-column",51),e.qZA(),e.qZA())}function Eo(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",52),e.TgZ(2,"button",53),e.NdJ("click",function(){const i=e.CHM(t).$implicit,d=e.oxw(2);return d.getDetalle(i.idAsesor,d.expanded)}),e.qZA(),e.qZA(),e.TgZ(3,"td",54),e._uU(4),e.qZA(),e.TgZ(5,"td",55),e._uU(6),e.ALo(7,"number"),e.qZA(),e.TgZ(8,"td",55),e._uU(9),e.ALo(10,"number"),e.qZA(),e.TgZ(11,"td",55),e._uU(12),e.ALo(13,"number"),e.qZA(),e.TgZ(14,"td",55),e._uU(15),e.ALo(16,"number"),e.qZA(),e.TgZ(17,"td",55),e._uU(18),e.ALo(19,"number"),e.qZA(),e.TgZ(20,"td",55),e._uU(21),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit,a=e.oxw(2);e.xp6(2),e.Q6J("pRowToggler",t)("icon",a.expanded?"pi pi-chevron-down":"pi pi-chevron-right"),e.xp6(2),e.Oqu(t.nombreAsesor),e.xp6(2),e.hij("Lps. ",e.xi3(7,9,t.metaGlobal,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(10,12,t.avanceG1+t.avanceG2+t.avanceG3,"1.0-0"),""),e.xp6(3),e.hij("Lps. ",e.xi3(13,15,t.ncG1+t.ncG2+t.ncG3,"1.0-0"),""),e.xp6(3),e.hij("Lps. ",e.xi3(16,18,t.avanceG1+t.avanceG2+t.avanceG3-(t.ncG1+t.ncG2+t.ncG3),"1.0-0"),""),e.xp6(3),e.hij("",(t.avanceG1+t.avanceG2+t.avanceG3-(t.ncG1+t.ncG2+t.ncG3))/t.metaGlobal*100<0?0:e.xi3(19,21,(t.avanceG1+t.avanceG2+t.avanceG3-(t.ncG1+t.ncG2+t.ncG3))/t.metaGlobal*100,"1.0-0")," %"),e.xp6(3),e.Oqu(t.zona)}}function Yo(o,r){if(1&o&&(e.TgZ(0,"tr"),e._UZ(1,"td",37),e.TgZ(2,"td",56),e._uU(3,"Total:"),e.qZA(),e.TgZ(4,"td",56),e._uU(5),e.ALo(6,"number"),e.qZA(),e.TgZ(7,"td",56),e._uU(8),e.ALo(9,"number"),e.qZA(),e.TgZ(10,"td",56),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td",56),e._uU(14),e.ALo(15,"number"),e.qZA(),e._UZ(16,"td",56),e._UZ(17,"td",56),e.qZA()),2&o){const t=e.oxw(2);e.xp6(5),e.Oqu(e.xi3(6,4,t.TMetaG,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(9,7,t.TAvanceA,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(12,10,t.TNC,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(15,13,t.TVenta,"1.0-0"))}}function Qo(o,r){1&o&&(e.TgZ(0,"tr",57),e.TgZ(1,"th",38),e._uU(2,"Nombre Asesor"),e._UZ(3,"p-column",39),e.qZA(),e.TgZ(4,"th",58),e._uU(5,"Meta"),e._UZ(6,"p-columnFilter",59),e.qZA(),e.TgZ(7,"th",60),e._uU(8,"Avance"),e._UZ(9,"p-columnFilter",61),e.qZA(),e.TgZ(10,"th",62),e._uU(11,"N/C"),e._UZ(12,"p-columnFilter",63),e.qZA(),e.TgZ(13,"th",64),e._uU(14,"V/N"),e._UZ(15,"p-columnFilter",65),e.qZA(),e.TgZ(16,"th",66),e._uU(17,"% Grupo"),e._UZ(18,"p-columnFilter",67),e.qZA(),e.TgZ(19,"th",68),e._uU(20,"Entregado a Despacho "),e._UZ(21,"p-columnFilter",69),e.qZA(),e.TgZ(22,"th",70),e._uU(23,"En proceso "),e._UZ(24,"p-columnFilter",71),e.qZA(),e.TgZ(25,"th",72),e._uU(26,"Pendiente Fac. "),e._UZ(27,"p-columnFilter",73),e.qZA(),e.TgZ(28,"th",74),e._uU(29,"T. Tuberia "),e._UZ(30,"p-columnFilter",75),e.qZA(),e.TgZ(31,"th",76),e._uU(32,"T. Venta Tuberia "),e._UZ(33,"p-columnFilter",77),e.qZA(),e.TgZ(34,"th",78),e._uU(35,"% Tuberia "),e._UZ(36,"p-columnFilter",79),e.qZA(),e.TgZ(37,"th",80),e._uU(38,"Total Pendiente Fac. "),e._UZ(39,"p-columnFilter",81),e.qZA(),e.TgZ(40,"th",82),e._uU(41,"% Pendiente Fac."),e._UZ(42,"p-columnFilter",83),e.qZA(),e.qZA())}function zo(o,r){if(1&o&&(e.TgZ(0,"tr",57),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"number"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"number"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"number"),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.ALo(17,"number"),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.ALo(20,"number"),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.ALo(23,"number"),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.ALo(26,"number"),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.ALo(29,"number"),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.ALo(32,"number"),e.qZA(),e.TgZ(33,"td"),e._uU(34),e.ALo(35,"number"),e.qZA(),e.TgZ(36,"td"),e._uU(37),e.ALo(38,"number"),e.qZA(),e.TgZ(39,"td"),e._uU(40),e.ALo(41,"number"),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombreAsesor),e.xp6(2),e.hij("Lps.",e.xi3(5,14,t.metaGrupo1,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(8,17,t.avanceG1,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(11,20,t.ncG1,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(14,23,t.avanceG1-t.ncG1,"1.0-0"),""),e.xp6(3),e.hij("",e.xi3(17,26,(t.avanceG1-t.ncG1)/t.metaGrupo1*100,"1.0-0")," %"),e.xp6(3),e.hij("Lps.",e.xi3(20,29,t.entregadO_DESPACHO_G1,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(23,32,t.eN_PROCESO_G1,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(26,35,t.pendientE_DE_FACTURACION_G1,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(29,38,t.entregadO_DESPACHO_G1+t.eN_PROCESO_G1+t.pendientE_DE_FACTURACION_G1,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(32,41,t.avanceG1-t.ncG1+(t.entregadO_DESPACHO_G1+t.eN_PROCESO_G1+t.pendientE_DE_FACTURACION_G1),"1.0-0"),""),e.xp6(3),e.hij("",e.xi3(35,44,(t.avanceG1-t.ncG1+(t.entregadO_DESPACHO_G1+t.eN_PROCESO_G1+t.pendientE_DE_FACTURACION_G1))/t.metaGrupo1*100,"1.0-0")," %"),e.xp6(3),e.hij("Lps.",e.xi3(38,47,t.avanceG1-t.ncG1+t.pendientE_DE_FACTURACION_G1,"1.0-0"),""),e.xp6(3),e.hij("",e.xi3(41,50,(t.avanceG1-t.ncG1+t.pendientE_DE_FACTURACION_G1)/t.metaGrupo1*100,"1.0-0")," %")}}function $o(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",56),e._uU(2,"Total:"),e.qZA(),e.TgZ(3,"td",56),e._uU(4),e.ALo(5,"number"),e.qZA(),e.TgZ(6,"td",56),e._uU(7),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"td",56),e._uU(10),e.ALo(11,"number"),e.qZA(),e.TgZ(12,"td",56),e._uU(13),e.ALo(14,"number"),e.qZA(),e._UZ(15,"td",56),e.TgZ(16,"td",56),e._uU(17),e.ALo(18,"number"),e.qZA(),e.TgZ(19,"td",56),e._uU(20),e.ALo(21,"number"),e.qZA(),e.TgZ(22,"td",56),e._uU(23),e.ALo(24,"number"),e.qZA(),e.TgZ(25,"td",56),e._uU(26),e.ALo(27,"number"),e.qZA(),e.TgZ(28,"td",56),e._uU(29),e.ALo(30,"number"),e.qZA(),e._UZ(31,"td",56),e.TgZ(32,"td",56),e._uU(33),e.ALo(34,"number"),e.qZA(),e._UZ(35,"td",56),e.qZA()),2&o){const t=e.oxw(2);e.xp6(4),e.Oqu(e.xi3(5,10,t.TMeta1,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(8,13,t.TAvance1,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(11,16,t.TNC1,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(14,19,t.TVN1,"1.0-0")),e.xp6(4),e.Oqu(e.xi3(18,22,t.TEntreDesp1,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(21,25,t.TProce1,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(24,28,t.TPeFac1,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(27,31,t.TTube1,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(30,34,t.TVTube1,"1.0-0")),e.xp6(4),e.Oqu(e.xi3(34,37,t.TPenVen1,"1.0-0"))}}function Ho(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",38),e._uU(2,"Nombre Asesor"),e._UZ(3,"p-column",39),e.qZA(),e.TgZ(4,"th",84),e._uU(5,"Meta"),e._UZ(6,"p-columnFilter",85),e.qZA(),e.TgZ(7,"th",86),e._uU(8,"Avance"),e._UZ(9,"p-columnFilter",87),e.qZA(),e.TgZ(10,"th",88),e._uU(11,"N/C"),e._UZ(12,"p-columnFilter",89),e.qZA(),e.TgZ(13,"th",90),e._uU(14,"V/N"),e._UZ(15,"p-columnFilter",91),e.qZA(),e.TgZ(16,"th",92),e._uU(17,"% Grupo"),e._UZ(18,"p-columnFilter",93),e.qZA(),e.TgZ(19,"th",94),e._uU(20,"Entregado a Despacho"),e._UZ(21,"p-columnFilter",95),e.qZA(),e.TgZ(22,"th",96),e._uU(23,"En proceso"),e._UZ(24,"p-columnFilter",97),e.qZA(),e.TgZ(25,"th",98),e._uU(26,"Pendiente Fac."),e._UZ(27,"p-columnFilter",99),e.qZA(),e.TgZ(28,"th",100),e._uU(29,"T. Tuberia"),e._UZ(30,"p-columnFilter",101),e.qZA(),e.TgZ(31,"th",102),e._uU(32,"T. Venta Tuberia"),e._UZ(33,"p-columnFilter",103),e.qZA(),e.TgZ(34,"th",104),e._uU(35,"% Tuberia"),e._UZ(36,"p-columnFilter",105),e.qZA(),e.TgZ(37,"th",106),e._uU(38,"Total Pendiente Fac."),e._UZ(39,"p-columnFilter",107),e.qZA(),e.TgZ(40,"th",108),e._uU(41,"% Pendiente Fac."),e._UZ(42,"p-columnFilter",109),e.qZA(),e.qZA())}function Bo(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"number"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"number"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"number"),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.ALo(17,"number"),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.ALo(20,"number"),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.ALo(23,"number"),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.ALo(26,"number"),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.ALo(29,"number"),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.ALo(32,"number"),e.qZA(),e.TgZ(33,"td"),e._uU(34),e.ALo(35,"number"),e.qZA(),e.TgZ(36,"td"),e._uU(37),e.ALo(38,"number"),e.qZA(),e.TgZ(39,"td"),e._uU(40),e.ALo(41,"number"),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombreAsesor),e.xp6(2),e.hij("Lps.",e.xi3(5,14,t.metaGrupo2,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(8,17,t.avanceG2,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(11,20,t.ncG2,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(14,23,t.avanceG2-t.ncG2,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(17,26,(t.avanceG2-t.ncG2)/t.metaGrupo2*100,"1.0-2")," %"),e.xp6(3),e.hij("Lps.",e.xi3(20,29,t.entregadO_DESPACHO_G2,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(23,32,t.eN_PROCESO_G2,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(26,35,t.pendientE_DE_FACTURACION_G2,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(29,38,t.entregadO_DESPACHO_G2+t.eN_PROCESO_G2+t.pendientE_DE_FACTURACION_G2,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(32,41,t.avanceG2-t.ncG2+(t.entregadO_DESPACHO_G2+t.eN_PROCESO_G2+t.pendientE_DE_FACTURACION_G2),"1.0-0"),""),e.xp6(3),e.hij("",e.xi3(35,44,(t.avanceG2-t.ncG2+(t.entregadO_DESPACHO_G2+t.eN_PROCESO_G2+t.pendientE_DE_FACTURACION_G2))/t.metaGrupo2*100,"1.0-0"),"%"),e.xp6(3),e.hij("Lps. ",e.xi3(38,47,t.avanceG2-t.ncG2+t.pendientE_DE_FACTURACION_G2,"1.0-0"),""),e.xp6(3),e.hij("",e.xi3(41,50,(t.avanceG2-t.ncG2+t.pendientE_DE_FACTURACION_G2)/t.metaGrupo2*100,"1.0-0")," %")}}function jo(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",56),e._uU(2,"Total:"),e.qZA(),e.TgZ(3,"td",56),e._uU(4),e.ALo(5,"number"),e.qZA(),e.TgZ(6,"td",56),e._uU(7),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"td",56),e._uU(10),e.ALo(11,"number"),e.qZA(),e.TgZ(12,"td",56),e._uU(13),e.ALo(14,"number"),e.qZA(),e._UZ(15,"td",56),e.TgZ(16,"td",56),e._uU(17),e.ALo(18,"number"),e.qZA(),e.TgZ(19,"td",56),e._uU(20),e.ALo(21,"number"),e.qZA(),e.TgZ(22,"td",56),e._uU(23),e.ALo(24,"number"),e.qZA(),e.TgZ(25,"td",56),e._uU(26),e.ALo(27,"number"),e.qZA(),e.TgZ(28,"td",56),e._uU(29),e.ALo(30,"number"),e.qZA(),e._UZ(31,"td",56),e.TgZ(32,"td",56),e._uU(33),e.ALo(34,"number"),e.qZA(),e._UZ(35,"td",56),e.qZA()),2&o){const t=e.oxw(2);e.xp6(4),e.Oqu(e.xi3(5,10,t.TMeta2,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(8,13,t.TAvance2,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(11,16,t.TNC2,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(14,19,t.TVN2,"1.0-0")),e.xp6(4),e.Oqu(e.xi3(18,22,t.TEntreDesp2,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(21,25,t.TProce2,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(24,28,t.TPeFac2,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(27,31,t.TTube2,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(30,34,t.TVTube2,"1.0-0")),e.xp6(4),e.Oqu(e.xi3(34,37,t.TPenVen2,"1.0-0"))}}function Xo(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",38),e._uU(2,"Nombre Asesor"),e._UZ(3,"p-column",39),e.qZA(),e.TgZ(4,"th",110),e._uU(5,"Meta"),e._UZ(6,"p-columnFilter",111),e.qZA(),e.TgZ(7,"th",112),e._uU(8,"Avance"),e._UZ(9,"p-columnFilter",113),e.qZA(),e.TgZ(10,"th",114),e._uU(11,"N/C"),e._UZ(12,"p-columnFilter",115),e.qZA(),e.TgZ(13,"th",116),e._uU(14,"V/N"),e._UZ(15,"p-columnFilter",117),e.qZA(),e.TgZ(16,"th",118),e._uU(17,"% Grupo"),e._UZ(18,"p-columnFilter",119),e.qZA(),e.TgZ(19,"th",120),e._uU(20,"Entregado a Despacho "),e._UZ(21,"p-columnFilter",121),e.qZA(),e.TgZ(22,"th",122),e._uU(23,"En proceso"),e._UZ(24,"p-columnFilter",123),e.qZA(),e.TgZ(25,"th",124),e._uU(26,"Pendiente Fac."),e._UZ(27,"p-columnFilter",125),e.qZA(),e.TgZ(28,"th",126),e._uU(29,"T. Tuberia"),e._UZ(30,"p-columnFilter",127),e.qZA(),e.TgZ(31,"th",128),e._uU(32,"T. Venta Tuberia"),e._UZ(33,"p-columnFilter",129),e.qZA(),e.TgZ(34,"th",130),e._uU(35,"% Tuberia"),e._UZ(36,"p-columnFilter",131),e.qZA(),e.TgZ(37,"th",132),e._uU(38,"Total Pendiente Fac."),e._UZ(39,"p-columnFilter",133),e.qZA(),e.TgZ(40,"th",134),e._uU(41,"% Pendiente Fac."),e._UZ(42,"p-columnFilter",135),e.qZA(),e.qZA())}function Wo(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"number"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"number"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"number"),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.ALo(17,"number"),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.ALo(20,"number"),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.ALo(23,"number"),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.ALo(26,"number"),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.ALo(29,"number"),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.ALo(32,"number"),e.qZA(),e.TgZ(33,"td"),e._uU(34),e.ALo(35,"number"),e.qZA(),e.TgZ(36,"td"),e._uU(37),e.ALo(38,"number"),e.qZA(),e.TgZ(39,"td"),e._uU(40),e.ALo(41,"number"),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombreAsesor),e.xp6(2),e.hij("Lps.",e.xi3(5,14,t.metaGrupo3,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(8,17,t.avanceG3,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(11,20,t.ncG3,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(14,23,t.avanceG3-t.ncG3,"1.0-0"),""),e.xp6(3),e.hij("",e.xi3(17,26,(t.avanceG3-t.ncG3)/t.metaGrupo3*100,"1.0-0"),"%"),e.xp6(3),e.hij("Lps.",e.xi3(20,29,t.entregadO_DESPACHO_G3,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(23,32,t.eN_PROCESO_G3,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(26,35,t.pendientE_DE_FACTURACION_G3,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(29,38,t.entregadO_DESPACHO_G3+t.eN_PROCESO_G3+t.pendientE_DE_FACTURACION_G3,"1.0-0"),""),e.xp6(3),e.hij("Lps.",e.xi3(32,41,t.avanceG3-t.ncG3+(t.entregadO_DESPACHO_G3+t.eN_PROCESO_G3+t.pendientE_DE_FACTURACION_G3),"1.0-0"),""),e.xp6(3),e.hij("",e.xi3(35,44,(t.avanceG3-t.ncG3+(t.entregadO_DESPACHO_G3+t.eN_PROCESO_G3+t.pendientE_DE_FACTURACION_G3))/t.metaGrupo3*100,"1.0-0"),"%"),e.xp6(3),e.hij("Lps.",e.xi3(38,47,t.avanceG3-t.ncG3+t.pendientE_DE_FACTURACION_G3,"1.0-0"),""),e.xp6(3),e.hij("",e.xi3(41,50,(t.avanceG3-t.ncG3+t.pendientE_DE_FACTURACION_G3)/t.metaGrupo3*100,"1.0-0"),"%")}}function Ko(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",56),e._uU(2,"Total:"),e.qZA(),e.TgZ(3,"td",56),e._uU(4),e.ALo(5,"number"),e.qZA(),e.TgZ(6,"td",56),e._uU(7),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"td",56),e._uU(10),e.ALo(11,"number"),e.qZA(),e.TgZ(12,"td",56),e._uU(13),e.ALo(14,"number"),e.qZA(),e._UZ(15,"td",56),e.TgZ(16,"td",56),e._uU(17),e.ALo(18,"number"),e.qZA(),e.TgZ(19,"td",56),e._uU(20),e.ALo(21,"number"),e.qZA(),e.TgZ(22,"td",56),e._uU(23),e.ALo(24,"number"),e.qZA(),e.TgZ(25,"td",56),e._uU(26),e.ALo(27,"number"),e.qZA(),e.TgZ(28,"td",56),e._uU(29),e.ALo(30,"number"),e.qZA(),e._UZ(31,"td",56),e.TgZ(32,"td",56),e._uU(33),e.ALo(34,"number"),e.qZA(),e._UZ(35,"td",56),e.qZA()),2&o){const t=e.oxw(2);e.xp6(4),e.Oqu(e.xi3(5,10,t.TMeta3,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(8,13,t.TAvance3,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(11,16,t.TNC3,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(14,19,t.TVN3,"1.0-0")),e.xp6(4),e.Oqu(e.xi3(18,22,t.TEntreDesp3,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(21,25,t.TProce3,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(24,28,t.TPeFac3,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(27,31,t.TTube3,"1.0-0")),e.xp6(3),e.Oqu(e.xi3(30,34,t.TVTube3,"1.0-0")),e.xp6(4),e.Oqu(e.xi3(34,37,t.TPenVen3,"1.0-0"))}}function ea(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",136),e._uU(2,"Grupo"),e._UZ(3,"p-columnFilter",137),e.qZA(),e.TgZ(4,"th",138),e._uU(5,"Marca"),e._UZ(6,"p-columnFilter",139),e.qZA(),e.TgZ(7,"th",140),e._uU(8,"Venta Mes Actual"),e._UZ(9,"p-columnFilter",141),e.qZA(),e.TgZ(10,"th",142),e._uU(11,"Promedio"),e._UZ(12,"p-columnFilter",143),e.qZA(),e.TgZ(13,"th",144),e._uU(14,"Ultima Compra"),e._UZ(15,"p-columnFilter",145),e.qZA(),e.qZA())}function ta(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.nombreGrupo),e.xp6(2),e.Oqu(t.nombreMarca),e.xp6(2),e.Oqu(t.slpCode2),e.xp6(2),e.Oqu(t.promedio_6_meses),e.xp6(2),e.Oqu(null==t.ultCompra?"N/A":e.xi3(11,5,t.ultCompra,"dd/MM/yyyy"))}}function oa(o,r){if(1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"center"),e.TgZ(2,"h1",6),e._uU(3),e.qZA(),e.qZA(),e._UZ(4,"hr"),e._UZ(5,"br"),e.YNc(6,ko,12,4,"form",7),e.TgZ(7,"p-tabView",8,9),e.TgZ(9,"p-tabPanel",10),e.TgZ(10,"p-table",11,12),e.YNc(12,Jo,23,0,"ng-template",13),e.YNc(13,Eo,22,24,"ng-template",14),e.YNc(14,Yo,18,16,"ng-template",15),e.qZA(),e.qZA(),e.TgZ(15,"p-tabPanel",16),e.TgZ(16,"p-table",17,12),e.YNc(18,Qo,43,0,"ng-template",13),e.YNc(19,zo,42,53,"ng-template",14),e.YNc(20,$o,36,40,"ng-template",15),e.qZA(),e.qZA(),e.TgZ(21,"p-tabPanel",18),e.TgZ(22,"p-table",19,12),e.YNc(24,Ho,43,0,"ng-template",13),e.YNc(25,Bo,42,53,"ng-template",14),e.YNc(26,jo,36,40,"ng-template",15),e.qZA(),e.qZA(),e.TgZ(27,"p-tabPanel",20),e.TgZ(28,"p-table",21,12),e.YNc(30,Xo,43,0,"ng-template",13),e.YNc(31,Wo,42,53,"ng-template",14),e.YNc(32,Ko,36,40,"ng-template",15),e.qZA(),e.qZA(),e.TgZ(33,"p-tabPanel",22),e.TgZ(34,"p-table",21,12),e.YNc(36,ea,16,0,"ng-template",13),e.YNc(37,ta,12,8,"ng-template",14),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.Title),e.xp6(3),e.Q6J("ngIf",t.formFil),e.xp6(1),e.Q6J("activeIndex",t.activeTabIndex),e.xp6(3),e.Q6J("value",t.ventaGrupo2)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40),e.xp6(6),e.Q6J("value",t.ventaGrupo2)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40),e.xp6(6),e.Q6J("value",t.ventaGrupo2)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40),e.xp6(6),e.Q6J("value",t.ventaGrupo2)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40),e.xp6(6),e.Q6J("value",t.PromedioGrupo)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40)}}let aa=(()=>{class o{constructor(t,a,n,i){this.fromG=t,this.ventaService=a,this.generalService=n,this.messageService=i,this.activeTabIndex=0,this.Title="Venta Grupo Marca",this.VentaGrupo=[],this.ventaGrupo2=[],this.VentaGrupoDetalle=[],this.ventaDetalle=[],this.AsesorEncabezado=[],this.Accessor=[],this.TablaFechaEncabezado=[],this.TablaFecha=[],this.PromedioEncabezado=[],this.PromedioGrupo=[],this.AsesoresDDL=[],this.TMetaG=0,this.TAvanceA=0,this.TNC=0,this.TVenta=0,this.TMeta1=0,this.TAvance1=0,this.TNC1=0,this.TVN1=0,this.TEntreDesp1=0,this.TProce1=0,this.TPeFac1=0,this.TTube1=0,this.TVTube1=0,this.TPenVen1=0,this.TMeta2=0,this.TAvance2=0,this.TNC2=0,this.TVN2=0,this.TEntreDesp2=0,this.TProce2=0,this.TPeFac2=0,this.TTube2=0,this.TVTube2=0,this.TPenVen2=0,this.TMeta3=0,this.TAvance3=0,this.TNC3=0,this.TVN3=0,this.TEntreDesp3=0,this.TProce3=0,this.TPeFac3=0,this.TTube3=0,this.TVTube3=0,this.TPenVen3=0}ngOnInit(){const t=localStorage.getItem("currentUser");this.UsuarioData=JSON.parse(t),this.IsAdmin="Administrador"==this.UsuarioData.role,this.getAll()}getAll(){var t=this;return(0,u.Z)(function*(){yield t.getTable(),yield t.getAsesores(),yield t._BuildForm(t.TablaFecha[0].fechaInicial,t.TablaFecha[0].fechaFinal),yield t.BuildFormFilter(t.TablaFecha[0].fechaInicial,t.TablaFecha[0].fechaFinal),yield t.get()})()}_BuildForm(t,a){var n=this;return(0,u.Z)(function*(){n.formFilter=n.fromG.group({fechaInicio:[new Date(t).toISOString().substring(0,10),s.kI.required],fechaFin:[new Date(a).toISOString().substring(0,10),s.kI.required],op:[1==n.IsAdmin?2:1],codAgt:[1==n.IsAdmin?0:n.UsuarioData.saleId,s.kI.required]})})()}BuildFormFilter(t,a){var n=this;return(0,u.Z)(function*(){n.formFil=n.fromG.group({rangeDate:["",s.kI.required],op:[1==n.IsAdmin?2:1],codAgt:[1==n.IsAdmin?0:n.UsuarioData.saleId,s.kI.required]})})()}getAsesores(){var t=this;return(0,u.Z)(function*(){t.AsesorEncabezado=yield t.generalService.getAsesores(),t.Accessor=t.AsesorEncabezado.dataResult,t.AsesoresDDL=t.Accessor.map(a=>({salesPrson:a.salesPrson,nombreUsuario:a.nombreUsuario})),t.AsesoresDDL.unshift({salesPrson:0,nombreUsuario:"Seleccione un Asesor"})})()}getTable(){var t=this;return(0,u.Z)(function*(){t.TablaFechaEncabezado=yield t.generalService.getTableFecha(),t.TablaFecha=t.TablaFechaEncabezado.dataResult})()}get(){var t=this;return(0,u.Z)(function*(){try{t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),t.VentaGrupo=yield t.ventaService.getGrupo(new Date(t.TablaFecha[0].fechaInicial).toISOString().substring(0,10),new Date(t.TablaFecha[0].fechaFinal).toISOString().substring(0,10),1==t.IsAdmin?2:1,1==t.IsAdmin?0:t.UsuarioData.saleId),t.ventaGrupo2=t.VentaGrupo.dataResult;let a=0,n=0,i=0,d=0,m=0,b=0,A=0,_=0,v=0,U=0,F=0,y=0,D=0,g=0,N=0,M=0,x=0,R=0,k=0,J=0,E=0,Y=0,Q=0,z=0,$=0,H=0,B=0,j=0,X=0,W=0,K=0,ee=0,te=0,oe=0;t.ventaGrupo2.forEach(l=>{a+=l.metaGlobal,n+=l.avanceG1+l.avanceG2+l.avanceG3,i+=l.ncG1+l.ncG2+l.ncG3,d+=l.avanceG1+l.avanceG2+l.avanceG3-(l.ncG1+l.ncG2+l.ncG3),m+=l.metaGrupo1,b+=l.avanceG1,A+=l.ncG1,_+=l.avanceG1-l.ncG1,v+=l.entregadO_DESPACHO_G1,U+=l.eN_PROCESO_G1,F+=l.pendientE_DE_FACTURACION_G1,y+=l.eN_PROCESO_G1+l.entregadO_DESPACHO_G1+l.pendientE_DE_FACTURACION_G1,D+=l.avanceG1-l.ncG1+(l.eN_PROCESO_G1+l.entregadO_DESPACHO_G1+l.pendientE_DE_FACTURACION_G1),g+=l.avanceG1-l.ncG1+l.pendientE_DE_FACTURACION_G1,N+=l.metaGrupo2,M+=l.avanceG2,x+=l.ncG2,R+=l.avanceG2-l.ncG2,k+=l.entregadO_DESPACHO_G2,J+=l.eN_PROCESO_G2,E+=l.pendientE_DE_FACTURACION_G2,Y+=l.eN_PROCESO_G2+l.entregadO_DESPACHO_G2+l.pendientE_DE_FACTURACION_G2,Q+=l.avanceG2-l.ncG2+(l.eN_PROCESO_G2+l.entregadO_DESPACHO_G2+l.pendientE_DE_FACTURACION_G2),z+=l.avanceG2-l.ncG2+l.pendientE_DE_FACTURACION_G2,$+=l.metaGrupo3,H+=l.avanceG3,B+=l.ncG3,j+=l.avanceG3-l.ncG3,X+=l.entregadO_DESPACHO_G3,W+=l.eN_PROCESO_G3,K+=l.pendientE_DE_FACTURACION_G3,ee+=l.eN_PROCESO_G3+l.entregadO_DESPACHO_G3+l.pendientE_DE_FACTURACION_G3,te+=l.avanceG3-l.ncG3+(l.eN_PROCESO_G3+l.entregadO_DESPACHO_G3+l.pendientE_DE_FACTURACION_G3),oe+=l.avanceG3-l.ncG3+l.pendientE_DE_FACTURACION_G3}),t.TMetaG=a,t.TAvanceA=n,t.TNC=i,t.TVenta=d,t.TMeta1=m,t.TAvance1=b,t.TNC1=A,t.TVN1=_,t.TEntreDesp1=v,t.TProce1=U,t.TPeFac1=F,t.TTube1=y,t.TVTube1=D,t.TPenVen1=g,t.TMeta2=N,t.TAvance2=M,t.TNC2=x,t.TVN2=R,t.TEntreDesp2=k,t.TProce2=J,t.TPeFac2=E,t.TTube2=Y,t.TVTube2=Q,t.TPenVen2=z,t.TMeta3=$,t.TAvance3=H,t.TNC3=B,t.TVN3=j,t.TEntreDesp3=X,t.TProce3=W,t.TPeFac3=K,t.TTube3=ee,t.TVTube3=te,t.TPenVen3=oe,c.V.closeLoading(),t.Loading=!1}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}getFilter(){var t=this;return(0,u.Z)(function*(){try{if(""==t.formFil.value.rangeDate)t.messageService.add({severity:"warn",summary:"Warn",detail:p.G.FormularioInvalido});else{t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),0!=t.formFil.value.codAgt&&(t.formFil.value.op=1),console.log(t.formFil.value),t.VentaGrupo=yield t.ventaService.getGrupo(new Date(t.formFil.value.rangeDate[0]).toISOString().substring(0,10),new Date(t.formFil.value.rangeDate[1]).toISOString().substring(0,10),t.formFil.value.op,t.formFil.value.codAgt),t.ventaGrupo2=t.VentaGrupo.dataResult;let a=0,n=0,i=0,d=0,m=0,b=0,A=0,_=0,v=0,U=0,F=0,y=0,D=0,g=0,N=0,M=0,x=0,R=0,k=0,J=0,E=0,Y=0,Q=0,z=0,$=0,H=0,B=0,j=0,X=0,W=0,K=0,ee=0,te=0,oe=0;t.ventaGrupo2.forEach(l=>{a+=l.metaGlobal,n+=l.avanceG1+l.avanceG2+l.avanceG3,i+=l.ncG1+l.ncG2+l.ncG3,d+=l.avanceG1+l.avanceG2+l.avanceG3-(l.ncG1+l.ncG2+l.ncG3),m+=l.metaGrupo1,b+=l.avanceG1,A+=l.ncG1,_+=l.avanceG1-l.ncG1,v+=l.entregadO_DESPACHO_G1,U+=l.eN_PROCESO_G1,F+=l.pendientE_DE_FACTURACION_G1,y+=l.eN_PROCESO_G1+l.entregadO_DESPACHO_G1+l.pendientE_DE_FACTURACION_G1,D+=l.avanceG1-l.ncG1+(l.eN_PROCESO_G1+l.entregadO_DESPACHO_G1+l.pendientE_DE_FACTURACION_G1),g+=l.avanceG1-l.ncG1+l.pendientE_DE_FACTURACION_G1,N+=l.metaGrupo2,M+=l.avanceG2,x+=l.ncG2,R+=l.avanceG2-l.ncG2,k+=l.entregadO_DESPACHO_G2,J+=l.eN_PROCESO_G2,E+=l.pendientE_DE_FACTURACION_G2,Y+=l.eN_PROCESO_G2+l.entregadO_DESPACHO_G2+l.pendientE_DE_FACTURACION_G2,Q+=l.avanceG2-l.ncG2+(l.eN_PROCESO_G2+l.entregadO_DESPACHO_G2+l.pendientE_DE_FACTURACION_G2),z+=l.avanceG2-l.ncG2+l.pendientE_DE_FACTURACION_G2,$+=l.metaGrupo3,H+=l.avanceG3,B+=l.ncG3,j+=l.avanceG3-l.ncG3,X+=l.entregadO_DESPACHO_G3,W+=l.eN_PROCESO_G3,K+=l.pendientE_DE_FACTURACION_G3,ee+=l.eN_PROCESO_G3+l.entregadO_DESPACHO_G3+l.pendientE_DE_FACTURACION_G3,te+=l.avanceG3-l.ncG3+(l.eN_PROCESO_G3+l.entregadO_DESPACHO_G3+l.pendientE_DE_FACTURACION_G3),oe+=l.avanceG3-l.ncG3+l.pendientE_DE_FACTURACION_G3}),t.TMetaG=a,t.TAvanceA=n,t.TNC=i,t.TVenta=d,t.TMeta1=m,t.TAvance1=b,t.TNC1=A,t.TVN1=_,t.TEntreDesp1=v,t.TProce1=U,t.TPeFac1=F,t.TTube1=y,t.TVTube1=D,t.TPenVen1=g,t.TMeta2=N,t.TAvance2=M,t.TNC2=x,t.TVN2=R,t.TEntreDesp2=k,t.TProce2=J,t.TPeFac2=E,t.TTube2=Y,t.TVTube2=Q,t.TPenVen2=z,t.TMeta3=$,t.TAvance3=H,t.TNC3=B,t.TVN3=j,t.TEntreDesp3=X,t.TProce3=W,t.TPeFac3=K,t.TTube3=ee,t.TVTube3=te,t.TPenVen3=oe,c.V.closeLoading(),t.Loading=!1}}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}getDetalle(t){var a=this;return(0,u.Z)(function*(){try{a.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),a.PromedioEncabezado=yield a.ventaService.getGrupoPromedio(""==a.formFil.value.rangeDate?new Date(a.TablaFecha[0].fechaInicial).toISOString().substring(0,10):new Date(a.formFil.value.rangeDate[0]).toISOString().substring(0,10),""==a.formFil.value.rangeDate?new Date(a.TablaFecha[0].fechaFinal).toISOString().substring(0,10):new Date(a.formFil.value.rangeDate[1]).toISOString().substring(0,10),1,t),a.PromedioGrupo=a.PromedioEncabezado.dataResult,a.activeTabIndex=4,console.log(a.PromedioEncabezado.dataResult),c.V.closeLoading(),a.Loading=!1}catch(n){c.V.closeLoading(),c.V.warning(n)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(wo),e.Y36(I.m),e.Y36(q.ez))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-venta-grupo-marca"]],viewQuery:function(t,a){if(1&t&&e.Gf(Go,5),2&t){let n;e.iGM(n=e.CRH())&&(a.tabView=n.first)}},decls:6,vars:2,consts:[[1,"grid"],[1,"col-12","xl:col-12"],[1,"card"],[3,"ngIf","ngIfElse"],["showTable",""],[3,"title"],[1,"mt-2"],["class","mb-5",3,"formGroup",4,"ngIf"],[1,"responsive-table",3,"activeIndex"],["tabView",""],["header","Todos"],["dataKey","idAsesor","responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","scrollHeight","450px",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["header","Grupo #1"],["responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","scrollHeight","450px",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],["header","Grupo #2"],["autoLayout","true","responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","scrollHeight","450px",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],["header","Grupo #3"],["responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","autoLayout","true","scrollHeight","450px",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],["header","Detalle"],[1,"mb-5",3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],["for","AsesoresDDL"],["formControlName","rangeDate","selectionMode","range",3,"readonlyInput"],[4,"ngIf"],["class","col-12 md:col-6",4,"ngIf"],["for","sub"],["pButton","","type","button","label","Buscar",1,"p-button-secondary","p-button-outlined",3,"click"],["id","rangeDate","class","p-error block",4,"ngIf"],["id","rangeDate",1,"p-error","block"],["formControlName","codAgt","optionValue","salesPrson","optionLabel","nombreUsuario",3,"options"],["id","codAgt","class","p-error block",4,"ngIf"],["id","codAgt",1,"p-error","block"],[2,"width","2rem"],["pSortableColumn","nombreAsesor",2,"width","70rem"],["type","text","field","nombreAsesor","display","menu",1,"ml-auto"],["pSortableColumn","metaGlobal",2,"width","15%"],["type","text","field","metaGlobal","display","menu",1,"ml-auto"],["pSortableColumn","totalAvanceVta",2,"width","15%"],["type","text","field","totalAvanceVta","display","menu",1,"ml-auto"],["pSortableColumn","totalNC",2,"width","15%"],["type","text","field","totalNC","display","menu",1,"ml-auto"],["pSortableColumn","totalVta",2,"width","15%"],["type","text","field","totalVta","display","menu",1,"ml-auto"],["pSortableColumn","porcenTotal",2,"width","15%"],["type","text","field","porcenTotal","display","menu",1,"ml-auto"],["pSortableColumn","zona",2,"width","15%"],["type","text","field","zona","display","menu",1,"ml-auto"],[2,"width","5%","min-width","2rem"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon","click"],[2,"width","70rem"],[2,"width","15%","min-width","2rem"],[2,"width","15%","min-width","12rem"],[1,"text"],["pSortableColumn","metaGrupo1"],["type","text","field","metaGrupo1","display","menu",1,"ml-auto"],["pSortableColumn","avanceG1"],["type","text","field","avanceG1","display","menu",1,"ml-auto"],["pSortableColumn","ncG1"],["type","text","field","ncG1","display","menu",1,"ml-auto"],["pSortableColumn","vtaNetaG1"],["type","text","field","vtaNetaG1","display","menu",1,"ml-auto"],["pSortableColumn","porcenG1"],["type","text","field","porcenG1","display","menu",1,"ml-auto"],["pSortableColumn","entregadO_DESPACHO_G1"],["type","text","field","entregadO_DESPACHO_G1","display","menu",1,"ml-auto"],["pSortableColumn","eN_PROCESO_G1"],["type","text","field","eN_PROCESO_G1","display","menu",1,"ml-auto"],["pSortableColumn","pendientE_DE_FACTURACION_G1"],["type","text","field","pendientE_DE_FACTURACION_G1","display","menu",1,"ml-auto"],["pSortableColumn","totaTuberiaG1"],["type","text","field","totaTuberiaG1","display","menu",1,"ml-auto"],["pSortableColumn","totalVtaTuberiaG1"],["type","text","field","totalVtaTuberiaG1","display","menu",1,"ml-auto"],["pSortableColumn","porcenTuberiaG1"],["type","text","field","porcenTuberiaG1","display","menu",1,"ml-auto"],["pSortableColumn","totalVtaPendienteG1"],["type","text","field","totalVtaPendienteG1","display","menu",1,"ml-auto"],["pSortableColumn","porcenVtaPendienteG1"],["type","text","field","porcenVtaPendienteG1","display","menu",1,"ml-auto"],["pSortableColumn","metaGrupo2"],["type","text","field","metaGrupo2","display","menu",1,"ml-auto"],["pSortableColumn","avanceG2"],["type","text","field","avanceG2","display","menu",1,"ml-auto"],["pSortableColumn","ncG2"],["type","text","field","ncG2","display","menu",1,"ml-auto"],["pSortableColumn","vtaNetaG2"],["type","text","field","vtaNetaG2","display","menu",1,"ml-auto"],["pSortableColumn","porcenG2"],["type","text","field","porcenG2","display","menu",1,"ml-auto"],["pSortableColumn","entregadO_DESPACHO_G2"],["type","text","field","entregadO_DESPACHO_G2","display","menu",1,"ml-auto"],["pSortableColumn","eN_PROCESO_G2"],["type","text","field","eN_PROCESO_G2","display","menu",1,"ml-auto"],["pSortableColumn","pendientE_DE_FACTURACION_G2"],["type","text","field","pendientE_DE_FACTURACION_G2","display","menu",1,"ml-auto"],["pSortableColumn","totaTuberiaG2"],["type","text","field","totaTuberiaG2","display","menu",1,"ml-auto"],["pSortableColumn","totalVtaTuberiaG2"],["type","text","field","totalVtaTuberiaG2","display","menu",1,"ml-auto"],["pSortableColumn","porcenTuberiaG2"],["type","text","field","porcenTuberiaG2","display","menu",1,"ml-auto"],["pSortableColumn","totalVtaPendienteG2"],["type","text","field","totalVtaPendienteG2","display","menu",1,"ml-auto"],["pSortableColumn","porcenVtaPendienteG2"],["type","text","field","porcenVtaPendienteG2","display","menu",1,"ml-auto"],["pSortableColumn","metaGrupo3"],["type","text","field","metaGrupo3","display","menu",1,"ml-auto"],["pSortableColumn","avanceG3"],["type","text","field","avanceG3","display","menu",1,"ml-auto"],["pSortableColumn","ncG3"],["type","text","field","ncG3","display","menu",1,"ml-auto"],["pSortableColumn","vtaNetaG3"],["type","text","field","vtaNetaG3","display","menu",1,"ml-auto"],["pSortableColumn","porcenG3"],["type","text","field","porcenG3","display","menu",1,"ml-auto"],["pSortableColumn","entregadO_DESPACHO_G3"],["type","text","field","entregadO_DESPACHO_G3","display","menu",1,"ml-auto"],["pSortableColumn","eN_PROCESO_G3"],["type","text","field","eN_PROCESO_G3","display","menu",1,"ml-auto"],["pSortableColumn","pendientE_DE_FACTURACION_G3"],["type","text","field","pendientE_DE_FACTURACION_G3","display","menu",1,"ml-auto"],["pSortableColumn","totaTuberiaG3"],["type","text","field","totaTuberiaG3","display","menu",1,"ml-auto"],["pSortableColumn","totalVtaTuberiaG3"],["type","text","field","totalVtaTuberiaG3","display","menu",1,"ml-auto"],["pSortableColumn","porcenTuberiaG3"],["type","text","field","porcenTuberiaG3","display","menu",1,"ml-auto"],["pSortableColumn","totalVtaPendienteG3"],["type","text","field","totalVtaPendienteG3","display","menu",1,"ml-auto"],["pSortableColumn","porcenVtaPendienteG3"],["type","text","field","porcenVtaPendienteG3","display","menu",1,"ml-auto"],["pSortableColumn","nombreGrupo"],["type","text","field","nombreGrupo","display","menu",1,"ml-auto"],["pSortableColumn","nombreMarca"],["type","text","field","nombreMarca","display","menu",1,"ml-auto"],["pSortableColumn","slpCode2"],["type","text","field","slpCode2","display","menu",1,"ml-auto"],["pSortableColumn","promedio_6_meses"],["type","text","field","promedio_6_meses","display","menu",1,"ml-auto"],["pSortableColumn","ultCompra"],["type","text","field","ultCompra","display","menu",1,"ml-auto"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,Lo,1,1,"ng-template",3),e.YNc(4,oa,38,33,"ng-template",null,4,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(5);e.xp6(3),e.Q6J("ngIf",a.Loading)("ngIfElse",n)}},directives:[T.O5,w.FN,S.xf,S.x4,Z.iA,q.jx,s._Y,s.JL,s.sg,P.f,s.JJ,s.u,O.Hq,L.Lt,Z.lQ,V.H,Z.jB,Z.xl],pipes:[T.JJ,T.uU],styles:[".responsive-table[_ngcontent-%COMP%]{display:block;width:100%;overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px;text-align:left;border-bottom:1px solid #ddd}th[_ngcontent-%COMP%]{background-color:#f2f2f2}"]}),o})(),na=(()=>{class o{constructor(t){this.http=t}getMargen(t,a,n){var i=this;return(0,u.Z)(function*(){return yield(0,h.z)(i.http.get(`${f.N.MarketMastery}Margen/Get/${t}/${a}/${n}`))})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(G.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function ra(o,r){if(1&o&&e._UZ(0,"skeleton-table-component",5),2&o){const t=e.oxw();e.Q6J("title",t.Title)}}function ia(o,r){1&o&&(e.TgZ(0,"small",33),e._uU(1,"El Rango de fecha es requerido"),e.qZA())}function la(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ia,2,0,"small",32),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formFil.controls.rangeDate.errors.required)}}function ca(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"form",24),e.TgZ(1,"div",25),e.TgZ(2,"div",26),e.TgZ(3,"label",27),e._uU(4,"Seleccione un rango de fecha"),e.qZA(),e._UZ(5,"p-calendar",28),e.YNc(6,la,2,1,"div",29),e.qZA(),e.TgZ(7,"div",26),e.TgZ(8,"label",30),e._uU(9,"\u200e "),e.qZA(),e.TgZ(10,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).getFilter()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("formGroup",t.formFil),e.xp6(5),e.Q6J("readonlyInput",!0),e.xp6(1),e.Q6J("ngIf",t.formFil.controls.rangeDate.invalid&&t.formFil.controls.rangeDate.dirty)}}function sa(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",34),e._UZ(1,"h5",35),e.TgZ(2,"span",36),e._UZ(3,"i",37),e.TgZ(4,"input",38),e.NdJ("input",function(n){return e.CHM(t),e.oxw(),e.MAs(27).filterGlobal(n.target.value,"contains")}),e.qZA(),e.qZA(),e.qZA()}}function ua(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",39),e._uU(2,"Codigo "),e._UZ(3,"p-columnFilter",40),e.qZA(),e.TgZ(4,"th",41),e._uU(5,"Producto "),e._UZ(6,"p-column",42),e.qZA(),e.TgZ(7,"th",43),e._uU(8,"Total Uds "),e._UZ(9,"p-columnFilter",44),e.qZA(),e.TgZ(10,"th",45),e._uU(11,"Total Ventas "),e._UZ(12,"p-columnFilter",46),e.qZA(),e.TgZ(13,"th",47),e._uU(14,"Venta al Costo"),e._UZ(15,"p-columnFilter",48),e.qZA(),e.TgZ(16,"th",49),e._uU(17,"Margen Bruto"),e._UZ(18,"p-columnFilter",50),e.qZA(),e.TgZ(19,"th",51),e._uU(20,"grupo"),e._UZ(21,"p-columnFilter",52),e.qZA(),e.qZA())}function da(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",53),e._uU(2),e.qZA(),e.TgZ(3,"td",53),e._uU(4),e.qZA(),e.TgZ(5,"td",53),e._uU(6),e.qZA(),e.TgZ(7,"td",53),e._uU(8),e.ALo(9,"currency"),e.qZA(),e.TgZ(10,"td",53),e._uU(11),e.ALo(12,"currency"),e.qZA(),e.TgZ(13,"td",53),e._uU(14),e.ALo(15,"currency"),e.qZA(),e.TgZ(16,"td",53),e._uU(17),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.codigo),e.xp6(2),e.Oqu(t.producto),e.xp6(2),e.Oqu(t.total_uds),e.xp6(2),e.Oqu(e.xi3(9,7,t.total_Ventas,"Lps.")),e.xp6(3),e.Oqu(e.xi3(12,10,t.venta_al_costo,"Lps.")),e.xp6(3),e.Oqu(e.xi3(15,13,t.margen_bruto,"Lps.")),e.xp6(3),e.Oqu(t.grupo)}}const pa=function(){return["numeroDocumento","unidadMedida"]};function _a(o,r){if(1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"center"),e.TgZ(2,"h1",6),e._uU(3,"Margen"),e.qZA(),e.qZA(),e._UZ(4,"hr"),e._UZ(5,"br"),e.YNc(6,ca,11,3,"form",7),e.TgZ(7,"div",8),e.TgZ(8,"div",9),e.TgZ(9,"span"),e.O4$(),e.TgZ(10,"svg",10),e.TgZ(11,"path",11),e._uU(12," --\x3e "),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(13,"p",12),e._uU(14,"Margen"),e.qZA(),e.TgZ(15,"p",13),e.O4$(),e.TgZ(16,"svg",14),e._UZ(17,"path",15),e.qZA(),e._uU(18),e.ALo(19,"number"),e.qZA(),e.qZA(),e.kcU(),e.TgZ(20,"div",16),e.TgZ(21,"p"),e._uU(22),e.ALo(23,"number"),e.qZA(),e.TgZ(24,"div",17),e._UZ(25,"div",18),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"p-table",19,20),e.YNc(28,sa,5,0,"ng-template",21),e.YNc(29,ua,22,0,"ng-template",22),e.YNc(30,da,18,16,"ng-template",23),e.qZA()),2&o){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",t.formFil&&t.IsAdmin),e.xp6(12),e.hij(" ",e.xi3(19,7,t.MargenPor,"1.0-0"),"% "),e.xp6(4),e.hij("Lps.",e.xi3(23,10,t.MargenTotal,"1.0-0"),""),e.xp6(4),e.Q6J("value",t.margenDetalle)("globalFilterFields",e.DdM(13,pa))("paginator",!0)("rows",10)}}let ma=(()=>{class o{constructor(t,a,n,i){this.fromG=t,this.margenServices=a,this.generalService=n,this.messageService=i,this.title="Margen ",this.margen=[],this.margenDetalle=[],this.first=0,this.rows=10,this.AsesorEncabezado=[],this.Accessor=[],this.TablaFechaEncabezado=[],this.TablaFecha=[],this.AsesoresDDL=[]}ngOnInit(){const t=localStorage.getItem("currentUser");this.UsuarioData=JSON.parse(t),this.IsAdmin="Administrador"==this.UsuarioData.role,this.getAll()}getAll(){var t=this;return(0,u.Z)(function*(){yield t.getTable(),yield t._BuildForm(),t.BuildFormFilter(),yield t.get()})()}getTable(){var t=this;return(0,u.Z)(function*(){t.TablaFechaEncabezado=yield t.generalService.getTableFecha(),t.TablaFecha=t.TablaFechaEncabezado.dataResult,console.log(t.TablaFecha)})()}_BuildForm(){var t=this;return(0,u.Z)(function*(){t.formFilter=t.fromG.group({fechaInicio:[new Date("2024-06-01").toISOString().substring(0,10),s.kI.required],fechaFin:[new Date("2024-06-12").toISOString().substring(0,10),s.kI.required],userId:[31,s.kI.required]})})()}BuildFormFilter(){this.formFil=this.fromG.group({rangeDate:["",s.kI.required],userId:[31,s.kI.required]})}get(){var t=this;return(0,u.Z)(function*(){try{t.loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),console.log(t.formFilter),t.margen=yield t.margenServices.getMargen(new Date(t.TablaFecha[0].fechaInicial).toISOString().substring(0,10),new Date(t.TablaFecha[0].fechaFinal).toISOString().substring(0,10),31),t.margenDetalle=t.margen.dataResult;let a=0,n=0;t.margenDetalle.forEach(d=>{a+=d.margen_bruto,n+=d.total_Ventas});const i=0!==n?a/n*100:0;t.MargenTotal=a,t.MargenPor=i,c.V.closeLoading(),t.loading=!1}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}getFilter(){var t=this;return(0,u.Z)(function*(){try{if(""==t.formFil.value.rangeDate)t.messageService.add({severity:"warn",summary:"Warn",detail:p.G.SeleccioneCampo});else{t.loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),t.margen=yield t.margenServices.getMargen(t.formFil.value.rangeDate[0].toISOString().substring(0,10),t.formFil.value.rangeDate[1].toISOString().substring(0,10),31),t.margenDetalle=t.margen.dataResult;let a=0,n=0;t.margenDetalle.forEach(d=>{a+=d.margen_bruto,n+=d.total_Ventas});const i=0!==n?a/n*100:0;t.MargenTotal=a,t.MargenPor=i,c.V.closeLoading(),t.loading=!1}}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(na),e.Y36(I.m),e.Y36(q.ez))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-margen"]],decls:6,vars:2,consts:[[1,"grid"],[1,"col-12","xl:col-12"],[1,"card"],[3,"ngIf","ngIfElse"],["showTable",""],[3,"title"],[1,"mt-2"],["class","mb-5",3,"formGroup",4,"ngIf"],[1,"classtwo"],[1,"title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1792 1792","height","20","fill","currentColor","width","20"],["d","M1362 1185q0 153-99.5 263.5t-258.5 136.5v175q0 14-9 23t-23 9h-135q-13 0-22.5-9.5t-9.5-22.5v-175q-66-9-127.5-31t-101.5-44.5-74-48-46.5-37.5-17.5-18q-17-21-2-41l103-135q7-10 23-12 15-2 24 9l2 2q113 99 243 125 37 8 74 8 81 0 142.5-43t61.5-122q0-28-15-53t-33.5-42-58.5-37.5-66-32-80-32.5q-39-16-61.5-25t-61.5-26.5-62.5-31-56.5-35.5-53.5-42.5-43.5-49-35.5-58-21-66.5-8.5-78q0-138 98-242t255-134v-180q0-13 9.5-22.5t22.5-9.5h135q14 0 23 9t9 23v176q57 6 110.5 23t87 33.5 63.5 37.5 39 29 15 14q17 18 5 38l-81 146q-8 15-23 16-14 3-27-7-3-3-14.5-12t-39-26.5-58.5-32-74.5-26-85.5-11.5q-95 0-155 43t-60 111q0 26 8.5 48t29.5 41.5 39.5 33 56 31 60.5 27 70 27.5q53 20 81 31.5t76 35 75.5 42.5 62 50 53 63.5 31.5 76.5 13 94z"],[1,"title-text"],[1,"percent"],["width","20","height","20","fill","currentColor","viewBox","0 0 1792 1792","xmlns","http://www.w3.org/2000/svg"],["d","M1408 1216q0 26-19 45t-45 19h-896q-26 0-45-19t-19-45 19-45l448-448q19-19 45-19t45 19l448 448q19 19 19 45z"],[1,"data"],[1,"range"],[1,"fill"],["responsiveLayout","scroll","autoLayout","true","styleClass","p-datatable-sm p-datatable-gridlines",3,"value","globalFilterFields","paginator","rows"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"mb-5",3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],["for","AsesoresDDL"],["formControlName","rangeDate","selectionMode","range",3,"readonlyInput"],[4,"ngIf"],["for","sub"],["pButton","","type","button","label","Buscar",1,"p-button-secondary","p-button-outlined",3,"click"],["id","rangeDate","class","p-error block",4,"ngIf"],["id","rangeDate",1,"p-error","block"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["pSortableColumn","codigo"],["type","text","field","codigo","display","menu",1,"ml-auto"],["pSortableColumn","producto"],["type","text","field","fecha","display","menu",1,"ml-auto"],["pSortableColumn","total_uds"],["type","text","field","total_uds","display","menu",1,"ml-auto"],["pSortableColumn","total_Ventas"],["type","text","field","total_Ventas","display","menu",1,"ml-auto"],["pSortableColumn","venta_al_costo"],["type","text","field","venta_al_costo","display","menu",1,"ml-auto"],["pSortableColumn","margen_bruto"],["type","text","field","margen_bruto","display","menu",1,"ml-auto"],["pSortableColumn","grupo"],["type","text","field","grupo","display","menu",1,"ml-auto"],[2,"width","10%","min-width","2rem"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,ra,1,1,"ng-template",3),e.YNc(4,_a,31,14,"ng-template",null,4,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(5);e.xp6(3),e.Q6J("ngIf",a.loading)("ngIfElse",n)}},directives:[T.O5,w.FN,Z.iA,q.jx,s._Y,s.JL,s.sg,P.f,s.JJ,s.u,O.Hq,ie.o,Z.lQ,Z.xl],pipes:[T.JJ,T.H9],styles:['.classtwo[_ngcontent-%COMP%]   .cardTwo[_ngcontent-%COMP%]{padding:1rem;background-color:#fff;max-width:320px;border-radius:20px;transition:all .4s ease-in;box-shadow:10px 10px #323232;border:3px solid #323232}.classtwo[_ngcontent-%COMP%]   .cardTwo[_ngcontent-%COMP%]:hover{transform:translateY(-1.5rem);border-radius:2.5rem 0}.classtwo[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;align-items:center}.classtwo[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;padding:.5rem;background-color:#10b981;width:1.5rem;height:1.5rem;border-radius:9999px}.classtwo[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:relative;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;height:1rem}.classtwo[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{margin-left:.8rem;color:#374151;font-size:30px}.classtwo[_ngcontent-%COMP%]   .percent[_ngcontent-%COMP%]{margin-left:.5rem;color:#02972f;font-weight:700;font-size:40px;display:flex}.classtwo[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start}.classtwo[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem;color:#1f2937;font-size:2.25rem;line-height:2.5rem;font-weight:700;text-align:left}.classtwo[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .range[_ngcontent-%COMP%]{position:relative;background-color:#e5e7eb;width:100%;height:.5rem;border-radius:.25rem}.classtwo[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .range[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background-color:#10b981;width:76%;height:100%;border-radius:.25rem}.classtwo[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin:0;border:none;background:transparent;color:inherit;font:inherit;text-transform:inherit}.classtwo[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%], .classtwo[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:not(script):not(style), .classtwo[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:before{display:grid}.classtwo[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{grid-gap:2em;grid-template-columns:repeat(auto-fit,min(100%,12rem));place-content:center;margin-left:3%;font:900 1.25em/1.25 sans-serif;text-align:center;text-transform:uppercase}.classtwo[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{--m: calc(.5*(var(--n) - 1));--abs: Max(calc(var(--i) - var(--m)), calc(var(--m) - var(--i)));--val: calc(var(--abs)*(1 + .5*var(--i))/var(--n));--dt0: calc(var(--val)*1s);--dt1: calc((var(--val) + 1)*1s);--dt2: calc((var(--val) + 1.5)*1s);--dt3: calc((var(--val) + 2)*1s);--dt4: calc((var(--val) + 2.5)*1s);--dt5: calc((var(--val) + 3)*1s);overflow:hidden;padding-bottom:1rem;-webkit-backface-visibility:hidden;backface-visibility:hidden;transform:perspective(25em);background:#fff content-box;filter:drop-shadow(4px 4px 13px);animation:card 1s ease-out var(--dt0) backwards,cost 1s var(--dt4) backwards}.classtwo[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:before, .classtwo[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after, .classtwo[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{--j: 1;--sgn-j: calc(2*var(--j) - 1);--not-j: calc(1 - var(--j));--mask: linear-gradient(calc(var(--sgn-j)*90deg), red 33.333%, transparent 66.667%) calc(var(--not-j)*100%)/ 300%}@keyframes card{0%{transform:perspective(25em) rotatey(.5turn)}}.classtwo[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{grid-gap:1rem;padding:2rem .5em 1rem;transform-origin:100% 100%;background:linear-gradient(var(--grad));color:#fff;animation:head 1s ease-out var(--dt1) backwards}.classtwo[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]:before{place-self:center;place-content:center;border:solid 4px currentcolor;width:4rem;height:4rem;border-radius:50%;animation:ring 1s ease-out var(--dt3) backwards;content:"$" counter(cost)}.classtwo[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]:after{height:4px;background:currentcolor;-webkit-clip-path:inset(0 round 4px);clip-path:inset(0 round 4px);animation:line 1s ease-out var(--dt2) backwards;content:""}@keyframes head{0%{transform:translate(-100%) skew(35deg)}}@keyframes ring{0%{transform:scale(0);opacity:0}}@keyframes line{0%{-webkit-clip-path:inset(0 50% round 4px);clip-path:inset(0 50% round 4px)}}.classtwo[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before, .classtwo[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{place-self:center;-webkit-mask:var(--mask);mask:var(--mask);animation:text 1s ease-out var(--dt5) backwards}.classtwo[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{--j: 0;animation-name:text,move;content:attr(data-name)}.classtwo[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{font-size:.6em;font-weight:100;content:"Estado"}@keyframes move{0%{transform:translate(50%)}}.classtwo[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{margin-bottom:-1rem;border-bottom:solid 1rem transparent;background-color:inherit;-webkit-clip-path:polygon(0 0,100% 0,100% calc(100% - 1rem),50% 100%,0 calc(100% - 1rem));clip-path:polygon(0 0,100% 0,100% calc(100% - 1rem),50% 100%,0 calc(100% - 1rem))}.classtwo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{place-content:center;line-height:3;-webkit-mask:var(--mask);mask:var(--mask);cursor:pointer;animation:text 1s ease-out var(--dt2) backwards}@keyframes text{0%{-webkit-mask-position:calc(var(--j) * 100%);mask-position:calc(var(--j) * 100%)}}']}),o})();var ga=C(9091);const Za=["tabView"];function Ta(o,r){if(1&o&&e._UZ(0,"skeleton-table-component",5),2&o){const t=e.oxw();e.Q6J("title",t.Title)}}function Aa(o,r){1&o&&(e.TgZ(0,"small",27),e._uU(1,"El asesor es requerido"),e.qZA())}function ba(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Aa,2,0,"small",26),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formFil.controls.Agt.errors.required)}}function fa(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"form",18),e.TgZ(1,"div",19),e.TgZ(2,"div",20),e.TgZ(3,"label",21),e._uU(4,"Seleccione un Asesor"),e.qZA(),e._UZ(5,"p-dropdown",22),e.YNc(6,ba,2,1,"div",23),e.qZA(),e.TgZ(7,"div",20),e.TgZ(8,"label",24),e._uU(9,"\u200e "),e.qZA(),e.TgZ(10,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).getFilter()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("formGroup",t.formFil),e.xp6(5),e.Q6J("options",t.AsesoresDDL),e.xp6(1),e.Q6J("ngIf",t.formFil.controls.Agt.invalid&&t.formFil.controls.Agt.dirty)}}function ha(o,r){1&o&&(e.TgZ(0,"tr"),e._UZ(1,"th",28),e.TgZ(2,"th",29),e._uU(3,"Nombre Asesor"),e._UZ(4,"p-column",30),e.qZA(),e.TgZ(5,"th",31),e._uU(6,"Codigo Cliente"),e._UZ(7,"p-column",32),e.qZA(),e.TgZ(8,"th",33),e._uU(9,"Nombre Cliente"),e._UZ(10,"p-column",34),e.qZA(),e.TgZ(11,"th",35),e._uU(12,"Pedido"),e._UZ(13,"p-column",34),e.qZA(),e.TgZ(14,"th",36),e._uU(15,"Cant. Unidad Inventario"),e._UZ(16,"p-column",34),e.qZA(),e.TgZ(17,"th",37),e._uU(18,"Total"),e._UZ(19,"p-column",34),e.qZA(),e.qZA())}function Ca(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",28),e.TgZ(2,"button",38),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).GetBack(i.codigo_Vendedor)}),e.qZA(),e.qZA(),e.TgZ(3,"td",39),e._uU(4),e.qZA(),e.TgZ(5,"td",39),e._uU(6),e.qZA(),e.TgZ(7,"td",39),e._uU(8),e.qZA(),e.TgZ(9,"td",39),e._uU(10),e.qZA(),e.TgZ(11,"td",39),e._uU(12),e.qZA(),e.TgZ(13,"td",39),e._uU(14),e.ALo(15,"currency"),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit,a=e.oxw(2);e.xp6(2),e.Q6J("pRowToggler",a.avancesCobro2)("icon",a.expanded?"pi pi-chevron-down":"pi pi-chevron-right"),e.xp6(2),e.Oqu(t.nombre_Vendedor),e.xp6(2),e.Oqu(t.codigo_Cliente),e.xp6(2),e.Oqu(t.nombre_Cliente),e.xp6(2),e.Oqu(t.pedido),e.xp6(2),e.hij("",t.cantidad_Unidad_inventario," "),e.xp6(2),e.hij("",e.xi3(15,8,t.total,"Lps. ")," ")}}function qa(o,r){if(1&o&&(e.TgZ(0,"tr"),e._UZ(1,"td",28),e._UZ(2,"td",39),e._UZ(3,"td",39),e._UZ(4,"td",39),e._UZ(5,"td",39),e.TgZ(6,"td",39),e._uU(7,"Total:"),e.qZA(),e.TgZ(8,"td",39),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(9),e.Oqu(e.xi3(10,1,t.BackTotal,"Lps."))}}function va(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",35),e._uU(2,"N\xb0 Pedido "),e._UZ(3,"p-columnFilter",40),e.qZA(),e.TgZ(4,"th",41),e._uU(5,"Fecha Pedido "),e._UZ(6,"p-column",42),e.qZA(),e.TgZ(7,"th",31),e._uU(8,"Codigo Cliente "),e._UZ(9,"p-columnFilter",43),e.qZA(),e.TgZ(10,"th",33),e._uU(11,"Nombre Cliente "),e._UZ(12,"p-columnFilter",44),e.qZA(),e.TgZ(13,"th",29),e._uU(14,"Asesor "),e._UZ(15,"p-columnFilter",45),e.qZA(),e.TgZ(16,"th",46),e._uU(17,"N\xb0 Producto "),e._UZ(18,"p-columnFilter",47),e.qZA(),e.TgZ(19,"th",48),e._uU(20," Descripcion Producto "),e._UZ(21,"p-columnFilter",49),e.qZA(),e.TgZ(22,"th",36),e._uU(23,"Cant. Unidad Inventario "),e._UZ(24,"p-columnFilter",50),e.qZA(),e.TgZ(25,"th",51),e._uU(26,"Total Linea "),e._UZ(27,"p-columnFilter",52),e.qZA(),e.qZA())}function xa(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",39),e._uU(2),e.qZA(),e.TgZ(3,"td",39),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td",39),e._uU(7),e.qZA(),e.TgZ(8,"td",39),e._uU(9),e.qZA(),e.TgZ(10,"td",39),e._uU(11),e.qZA(),e.TgZ(12,"td",39),e._uU(13),e.qZA(),e.TgZ(14,"td",39),e._uU(15),e.qZA(),e.TgZ(16,"td",39),e._uU(17),e.qZA(),e.TgZ(18,"td",39),e._uU(19),e.ALo(20,"currency"),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.pedido),e.xp6(2),e.Oqu(e.xi3(5,9,t.fecha,"dd/MM/yyyy")),e.xp6(3),e.Oqu(t.codigo_Cliente),e.xp6(2),e.Oqu(t.nombre_Cliente),e.xp6(2),e.Oqu(t.nombre_Vendedor),e.xp6(2),e.Oqu(t.itemCode),e.xp6(2),e.Oqu(t.nombreProducto),e.xp6(2),e.hij(" ",t.cantidad_Unidad_inventario,""),e.xp6(2),e.hij("",e.xi3(20,12,t.total_Linea,"Lps.")," ")}}function Ua(o,r){if(1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"center"),e.TgZ(2,"h1",6),e._uU(3),e.qZA(),e.qZA(),e._UZ(4,"hr"),e._UZ(5,"br"),e.YNc(6,fa,11,3,"form",7),e.TgZ(7,"p-tabView",8,9),e.TgZ(9,"p-tabPanel",10),e.TgZ(10,"p-table",11,12),e.YNc(12,ha,20,0,"ng-template",13),e.YNc(13,Ca,16,11,"ng-template",14),e.YNc(14,qa,11,4,"ng-template",15),e.qZA(),e.qZA(),e.TgZ(15,"p-tabPanel",16),e.TgZ(16,"p-table",17),e.YNc(17,va,28,0,"ng-template",13),e.YNc(18,xa,21,15,"ng-template",14),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.Title),e.xp6(3),e.Q6J("ngIf",t.formFil&&t.IsAdmin),e.xp6(1),e.Q6J("activeIndex",t.activeTabIndex),e.xp6(3),e.Q6J("value",t.EncabDet)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40),e.xp6(6),e.Q6J("value",t.BackOrDetalle)("paginator",!0)("rows",10)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40)}}let Fa=(()=>{class o{constructor(t,a,n,i){this.BackOrdersService=t,this.messageService=a,this.generalService=n,this.fb=i,this.activeTabIndex=0,this.Loading=!1,this.BackOrders=[],this.BackOrDetalle=[],this.BackOrdersEncab=[],this.EncabDet=[],this.Title="BackOrders",this.NumBackOrder=[],this.AsesorEncabezado=[],this.Accessor=[],this.AsesoresDDL=[]}ngOnInit(){const t=localStorage.getItem("currentUser");this.UsuarioData=JSON.parse(t),this.IsAdmin="Administrador"==this.UsuarioData.role,this.createForm(),this.BackEncad(),this.BuildFormFilter(),this.getAsesores()}createForm(){this.formFilter=this.fb.group({op:[1==this.IsAdmin?2:1,s.kI.required],agt:[0,s.kI.required]})}BuildFormFilter(){this.formFil=this.fb.group({Op:[1==this.IsAdmin?2:1],Agt:[1==this.IsAdmin?0:this.UsuarioData.saleId,s.kI.required]})}GetBack(t){var a=this;return(0,u.Z)(function*(){try{a.formFilter.value.codAgt=t,console.log(t),a.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),a.BackOrders=yield a.BackOrdersService.GetBackorders(1==a.IsAdmin?2:1,1==a.IsAdmin?0:a.UsuarioData.saleId),a.BackOrDetalle=a.BackOrders.dataResult,a.activeTabIndex=1,c.V.closeLoading(),a.Loading=!1}catch(n){c.V.closeLoading(),c.V.warning(n)}})()}BackEncad(){var t=this;return(0,u.Z)(function*(){try{t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),t.BackOrdersEncab=yield t.BackOrdersService.EncaBack(1==t.IsAdmin?2:1,1==t.IsAdmin?0:t.UsuarioData.saleId),t.EncabDet=t.BackOrdersEncab.dataResult;let a=0;t.EncabDet.forEach(n=>{a+=n.total}),t.BackTotal=a,console.log(t.EncabDet),c.V.closeLoading(),t.Loading=!1}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}getAsesores(){var t=this;return(0,u.Z)(function*(){t.AsesorEncabezado=yield t.generalService.getAsesores(),t.Accessor=t.AsesorEncabezado.dataResult,t.AsesoresDDL=t.Accessor.map(a=>({salesPrson:a.salesPrson,nombreUsuario:a.nombreUsuario})),t.AsesoresDDL.unshift({salesPrson:0,nombreUsuario:"Seleccione un Asesor"})})()}getFilter(){var t=this;return(0,u.Z)(function*(){try{if(0==t.formFil.value.Agt)t.messageService.add({severity:"warn",summary:"Warn",detail:p.G.SeleccioneCampo});else{t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),0!=t.formFil.value.Agt&&(t.formFil.value.Op=1),t.BackOrdersEncab=yield t.BackOrdersService.EncaBack(t.formFil.value.Op,t.formFil.value.Agt),t.EncabDet=t.BackOrdersEncab.dataResult;let a=0;t.EncabDet.forEach(n=>{a+=n.total}),t.BackTotal=a,c.V.closeLoading(),t.Loading=!1}}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ga.Z),e.Y36(q.ez),e.Y36(I.m),e.Y36(s.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-back-orders"]],viewQuery:function(t,a){if(1&t&&e.Gf(Za,5),2&t){let n;e.iGM(n=e.CRH())&&(a.tabView=n.first)}},decls:6,vars:2,consts:[[1,"grid"],[1,"col-12","xl:col-12"],[1,"card"],[3,"ngIf","ngIfElse"],["showTable",""],[3,"title"],[1,"mt-2"],["class","mb-5",3,"formGroup",4,"ngIf"],[3,"activeIndex"],["tabView",""],["header","Global"],["dataKey","codigo_Vendedor","responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","scrollHeight","450px",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["header","Detalle"],["responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","scrollHeight","450px",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],[1,"mb-5",3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],["for","AsesoresDDL"],["formControlName","Agt","optionValue","salesPrson","optionLabel","nombreUsuario",3,"options"],[4,"ngIf"],["for","sub"],["pButton","","type","button","label","Buscar",1,"p-button-secondary","p-button-outlined",3,"click"],["id","Agt","class","p-error block",4,"ngIf"],["id","Agt",1,"p-error","block"],[2,"width","2rem"],["pSortableColumn","nombre_Vendedor",2,"width","15%","min-width","12rem"],["type","text","field","nombreAsesor","display","menu",1,"ml-auto"],["pSortableColumn","codigo_Cliente",2,"width","15%","min-width","12rem"],["type","text","field","totalVta","display","menu",1,"ml-auto"],["pSortableColumn","nombre_Cliente",2,"width","15%","min-width","12rem"],["type","text","field","zona","display","menu",1,"ml-auto"],["pSortableColumn","pedido",2,"width","15%","min-width","12rem"],["pSortableColumn","cantidad_Unidad_inventario",2,"width","15%","min-width","12rem"],["pSortableColumn","total",2,"width","15%","min-width","12rem"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon","click"],[2,"width","15%","min-width","12rem"],["type","text","field","pedido","display","menu",1,"ml-auto"],["pSortableColumn","fecha",2,"width","15%","min-width","12rem"],["type","text","field","fecha","display","menu",1,"ml-auto"],["type","text","field","codigo_Cliente","display","menu",1,"ml-auto"],["type","text","field","nombre_Cliente","display","menu",1,"ml-auto"],["type","text","field","nombre_Vendedor","display","menu",1,"ml-auto"],["pSortableColumn","itemCode",2,"width","15%","min-width","12rem"],["type","text","field","itemCode","display","menu",1,"ml-auto"],["pSortableColumn","nombreProducto",2,"width","15%","min-width","12rem"],["type","text","field","nombreProducto","display","menu",1,"ml-auto"],["type","text","field","cantidad_Unidad_inventario","display","menu",1,"ml-auto"],["pSortableColumn","total_Linea",2,"width","15%","min-width","12rem"],["type","text","field","total_Linea","display","menu",1,"ml-auto"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,Ta,1,1,"ng-template",3),e.YNc(4,Ua,19,15,"ng-template",null,4,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(5);e.xp6(3),e.Q6J("ngIf",a.Loading)("ngIfElse",n)}},directives:[T.O5,w.FN,S.xf,S.x4,Z.iA,q.jx,s._Y,s.JL,s.sg,L.Lt,s.JJ,s.u,O.Hq,Z.lQ,V.H,Z.jB,Z.xl],pipes:[T.H9,T.uU],styles:[""]}),o})(),ya=(()=>{class o{constructor(t){this.http=t}GetRetenidos(t,a){var n=this;return(0,u.Z)(function*(){return yield(0,h.z)(n.http.get(`${f.N.MarketMastery}Retenidos/Retenidos/${t}/${a}`))})()}RetenidosEncabezado(t,a){var n=this;return(0,u.Z)(function*(){return yield(0,h.z)(n.http.get(`${f.N.MarketMastery}Retenidos/GetEncabezado/${t}/${a}`))})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(G.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Da=["tabView"];function Sa(o,r){if(1&o&&e._UZ(0,"skeleton-table-component",5),2&o){const t=e.oxw();e.Q6J("Title",t.Title)}}function Oa(o,r){1&o&&(e.TgZ(0,"small",27),e._uU(1,"El asesor es requerido"),e.qZA())}function Ia(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Oa,2,0,"small",26),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formFil.controls.Agt.errors.required)}}function wa(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"form",18),e.TgZ(1,"div",19),e.TgZ(2,"div",20),e.TgZ(3,"label",21),e._uU(4,"Seleccione un Asesor"),e.qZA(),e._UZ(5,"p-dropdown",22),e.YNc(6,Ia,2,1,"div",23),e.qZA(),e.TgZ(7,"div",20),e.TgZ(8,"label",24),e._uU(9,"\u200e "),e.qZA(),e.TgZ(10,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).getFilter()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("formGroup",t.formFil),e.xp6(5),e.Q6J("options",t.AsesoresDDL),e.xp6(1),e.Q6J("ngIf",t.formFil.controls.Agt.invalid&&t.formFil.controls.Agt.dirty)}}function Ga(o,r){1&o&&(e.TgZ(0,"tr"),e._UZ(1,"th",28),e.TgZ(2,"th",29),e._uU(3,"Nombre Asesor"),e._UZ(4,"p-column",30),e.qZA(),e.TgZ(5,"th",31),e._uU(6,"Codigo Cliente"),e._UZ(7,"p-column",32),e.qZA(),e.TgZ(8,"th",33),e._uU(9,"Nombre Cliente"),e._UZ(10,"p-column",34),e.qZA(),e.TgZ(11,"th",35),e._uU(12,"N\xb0 Pedido"),e._UZ(13,"p-column",34),e.qZA(),e.TgZ(14,"th",36),e._uU(15,"Fecha"),e._UZ(16,"p-column",34),e.qZA(),e.TgZ(17,"th",37),e._uU(18,"Total"),e._UZ(19,"p-column",34),e.qZA(),e.qZA())}function La(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",28),e.TgZ(2,"button",38),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).GetReten(i.oslp,i.numeroDocumento)}),e.qZA(),e.qZA(),e.TgZ(3,"td",39),e._uU(4),e.qZA(),e.TgZ(5,"td",39),e._uU(6),e.qZA(),e.TgZ(7,"td",39),e._uU(8),e.qZA(),e.TgZ(9,"td",39),e._uU(10),e.qZA(),e.TgZ(11,"td",39),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td",39),e._uU(15),e.ALo(16,"currency"),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit,a=e.oxw(2);e.xp6(2),e.Q6J("pRowToggler",a.avancesCobro2)("icon",a.expanded?"pi pi-chevron-down":"pi pi-chevron-right"),e.xp6(2),e.Oqu(t.nombre_Vendedor),e.xp6(2),e.Oqu(t.cardCode),e.xp6(2),e.Oqu(t.cardName),e.xp6(2),e.Oqu(t.docNum),e.xp6(2),e.Oqu(e.xi3(13,8,t.docDate,"dd/MM/yyyy")),e.xp6(3),e.Oqu(e.xi3(16,11,t.docTotal,"Lps. "))}}function Pa(o,r){if(1&o&&(e.TgZ(0,"tr"),e._UZ(1,"td",40),e._UZ(2,"td",41),e._UZ(3,"td",41),e._UZ(4,"td",41),e._UZ(5,"td",41),e.TgZ(6,"td",42),e._uU(7,"Total:"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(9),e.Oqu(e.xi3(10,1,t.TRetenTotal,"Lps."))}}function Na(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",43),e._uU(2,"N\xb0 Pedido "),e._UZ(3,"p-columnFilter",44),e.qZA(),e.TgZ(4,"th",45),e._uU(5,"Fecha Pedido "),e._UZ(6,"p-column",46),e.qZA(),e.TgZ(7,"th",47),e._uU(8,"Codigo Cliente "),e._UZ(9,"p-columnFilter",48),e.qZA(),e.TgZ(10,"th",49),e._uU(11,"Nombre Cliente "),e._UZ(12,"p-columnFilter",50),e.qZA(),e.TgZ(13,"th",51),e._uU(14,"Total Documento "),e._UZ(15,"p-columnFilter",52),e.qZA(),e.TgZ(16,"th",53),e._uU(17,"N\xb0 Producto"),e._UZ(18,"p-columnFilter",54),e.qZA(),e.TgZ(19,"th",55),e._uU(20,"Descripcion Producto "),e._UZ(21,"p-columnFilter",56),e.qZA(),e.TgZ(22,"th",57),e._uU(23,"Cantidad"),e._UZ(24,"p-columnFilter",58),e.qZA(),e.TgZ(25,"th",59),e._uU(26,"unidad Medida "),e._UZ(27,"p-columnFilter",60),e.qZA(),e.TgZ(28,"th",61),e._uU(29,"Precio "),e._UZ(30,"p-columnFilter",62),e.qZA(),e.TgZ(31,"th",63),e._uU(32,"ISV "),e._UZ(33,"p-columnFilter",64),e.qZA(),e.TgZ(34,"th",65),e._uU(35,"Total Linea "),e._UZ(36,"p-columnFilter",66),e.qZA(),e.TgZ(37,"th",67),e._uU(38,"Comentario "),e._UZ(39,"p-columnFilter",68),e.qZA(),e.qZA())}function Ma(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",39),e._uU(2),e.qZA(),e.TgZ(3,"td",39),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td",39),e._uU(7),e.qZA(),e.TgZ(8,"td",39),e._uU(9),e.qZA(),e.TgZ(10,"td",39),e._uU(11),e.ALo(12,"currency"),e.qZA(),e.TgZ(13,"td",39),e._uU(14),e.qZA(),e.TgZ(15,"td",39),e._uU(16),e.qZA(),e.TgZ(17,"td",39),e._uU(18),e.qZA(),e.TgZ(19,"td",39),e._uU(20),e.qZA(),e.TgZ(21,"td",39),e._uU(22),e.ALo(23,"currency"),e.qZA(),e.TgZ(24,"td",39),e._uU(25),e.qZA(),e.TgZ(26,"td",39),e._uU(27),e.ALo(28,"currency"),e.qZA(),e.TgZ(29,"td",39),e._uU(30),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.numeroDocumento),e.xp6(2),e.Oqu(e.xi3(5,13,t.fecha,"dd/MM/yyyy")),e.xp6(3),e.Oqu(t.codigoCliente),e.xp6(2),e.Oqu(t.cliente),e.xp6(2),e.Oqu(e.xi3(12,16,t.totalDocumento,"Lps.")),e.xp6(3),e.Oqu(t.codigoProducto),e.xp6(2),e.Oqu(t.nombreProducto),e.xp6(2),e.Oqu(t.cantidad),e.xp6(2),e.Oqu(t.unidadMedida),e.xp6(2),e.Oqu(e.xi3(23,19,t.precio,"Lps.")),e.xp6(3),e.Oqu(t.isv),e.xp6(2),e.hij("",e.xi3(28,22,t.totalXLinea,"Lps.")," "),e.xp6(3),e.Oqu(t.comentario)}}const Va=function(){return["numeroDocumento","unidadMedida"]};function Ra(o,r){if(1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"center"),e.TgZ(2,"h1",6),e._uU(3),e.qZA(),e.qZA(),e._UZ(4,"hr"),e._UZ(5,"br"),e.YNc(6,wa,11,3,"form",7),e.TgZ(7,"p-tabView",8,9),e.TgZ(9,"p-tabPanel",10),e.TgZ(10,"p-table",11,12),e.YNc(12,Ga,20,0,"ng-template",13),e.YNc(13,La,17,14,"ng-template",14),e.YNc(14,Pa,11,4,"ng-template",15),e.qZA(),e.qZA(),e.TgZ(15,"p-tabPanel",16),e.TgZ(16,"p-table",17,12),e.YNc(18,Na,40,0,"ng-template",13),e.YNc(19,Ma,31,25,"ng-template",14),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.Title),e.xp6(3),e.Q6J("ngIf",t.formFil&&t.IsAdmin),e.xp6(1),e.Q6J("activeIndex",t.activeTabIndex),e.xp6(3),e.Q6J("value",t.RetenResult)("paginator",!0)("rows",20)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40),e.xp6(6),e.Q6J("value",t.RetenidosResult)("globalFilterFields",e.DdM(16,Va))("paginator",!0)("rows",10)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40)}}let ka=(()=>{class o{constructor(t,a,n,i){this.RetenidosService=t,this.fb=a,this.generalService=n,this.messageService=i,this.activeTabIndex=0,this.Title="Retenidos",this.Loading=!1,this.Retenidos=[],this.RetenidosResult=[],this.RetenidosEncabezado=[],this.RetenResult=[],this.AsesorEncabezado=[],this.Accessor=[],this.AsesoresDDL=[],this.TRetenTotal=0}ngOnInit(){const t=localStorage.getItem("currentUser");this.UsuarioData=JSON.parse(t),this.IsAdmin="Administrador"==this.UsuarioData.role,this.BuildFormFilter(),this.createForm(),this.getAsesores(),this.DetRetenido()}createForm(){this.formFilter=this.fb.group({Op:[1==this.IsAdmin?2:1],Agt:[0,s.kI.required]})}BuildFormFilter(){this.formFil=this.fb.group({Op:[1==this.IsAdmin?2:1],Agt:[0,s.kI.required]})}getAsesores(){var t=this;return(0,u.Z)(function*(){t.AsesorEncabezado=yield t.generalService.getAsesores(),t.Accessor=t.AsesorEncabezado.dataResult,t.AsesoresDDL=t.Accessor.map(a=>({salesPrson:a.salesPrson,nombreUsuario:a.nombreUsuario})),t.AsesoresDDL.unshift({salesPrson:0,nombreUsuario:"Seleccionar Todos"})})()}GetReten(t,a){var n=this;return(0,u.Z)(function*(){try{n.formFilter.value.codAgt=t,n.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),n.Retenidos=yield n.RetenidosService.GetRetenidos(1,t),n.RetenidosResult=n.Retenidos.dataResult,console.log("Datos completos:",n.RetenidosResult),n.RetenidosResult.length>0&&(console.log("Primer elemento:",n.RetenidosResult[0]),console.log("numeroDocumento buscado:",a));let i=[];n.RetenidosResult.forEach((m,b)=>{m.numeroDocumento===a||(console.log(m.numeroDocumento),i.push(m))}),n.RetenidosResult=i;let d=0;n.RetenidosResult.forEach(m=>{d+=m.totalDocumento}),console.log(d),n.TRetenTotal=d,console.log("Resultado filtrado:",n.RetenidosResult),n.activeTabIndex=1,c.V.closeLoading(),n.Loading=!1}catch(i){c.V.closeLoading(),c.V.warning(i)}})()}DetRetenido(){var t=this;return(0,u.Z)(function*(){try{t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),t.RetenidosEncabezado=yield t.RetenidosService.RetenidosEncabezado(1==t.IsAdmin?2:1,1==t.IsAdmin?0:t.UsuarioData.saleId),t.RetenResult=t.RetenidosEncabezado.dataResult;let a=0;t.RetenResult.forEach(n=>{a+=n.docTotal}),console.log(a),t.TRetenTotal=a,c.V.closeLoading(),t.Loading=!1}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}getFilter(){var t=this;return(0,u.Z)(function*(){try{t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),0!=t.formFil.value.Agt&&(t.formFil.value.Op=1),t.RetenidosEncabezado=yield t.RetenidosService.RetenidosEncabezado(t.formFil.value.Op,t.formFil.value.Agt),t.RetenResult=t.RetenidosEncabezado.dataResult,c.V.closeLoading(),t.Loading=!1}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ya),e.Y36(s.qu),e.Y36(I.m),e.Y36(q.ez))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-retenidos"]],viewQuery:function(t,a){if(1&t&&e.Gf(Da,5),2&t){let n;e.iGM(n=e.CRH())&&(a.tabView=n.first)}},decls:6,vars:2,consts:[[1,"grid"],[1,"col-12","xl:col-12"],[1,"card"],[3,"ngIf","ngIfElse"],["showTable",""],[3,"Title"],[1,"mt-2"],["class","mb-5",3,"formGroup",4,"ngIf"],[3,"activeIndex"],["tabView",""],["header","Global"],["dataKey","oslp","responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","scrollHeight","450px",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["header","Detalle"],["responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","scrollHeight","450px",3,"value","globalFilterFields","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],[1,"mb-5",3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],["for","AsesoresDDL"],["formControlName","Agt","optionValue","salesPrson","optionLabel","nombreUsuario",3,"options"],[4,"ngIf"],["for","sub"],["pButton","","type","button","label","Buscar",1,"p-button-secondary","p-button-outlined",3,"click"],["id","Agt","class","p-error block",4,"ngIf"],["id","Agt",1,"p-error","block"],[2,"width","2rem"],["pSortableColumn","nombre_Vendedor",2,"width","15%","min-width","12rem"],["type","text","field","nombreAsesor","display","menu",1,"ml-auto"],["pSortableColumn","cardCode",2,"width","15%","min-width","12rem"],["type","text","field","totalVta","display","menu",1,"ml-auto"],["pSortableColumn","cardName",2,"width","15%","min-width","12rem"],["type","text","field","zona","display","menu",1,"ml-auto"],["pSortableColumn","docNum",2,"width","15%","min-width","12rem"],["pSortableColumn","docDate",2,"width","15%","min-width","12rem"],["pSortableColumn","docTotal",2,"width","15%","min-width","12rem"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon","click"],[2,"width","15%","min-width","12rem"],["colspan","2",1,"text-right"],[2,"width","15%","min-width","2rem"],["colspan","3",1,"text-Left"],["pSortableColumn","numeroDocumento",2,"width","15%","min-width","12rem"],["type","text","field","numeroDocumento","display","menu",1,"ml-auto"],["pSortableColumn","fecha",2,"width","15%","min-width","12rem"],["type","text","field","fecha","display","menu",1,"ml-auto"],["pSortableColumn","codigoCliente",2,"width","15%","min-width","12rem"],["type","text","field","codigoCliente","display","menu",1,"ml-auto"],["pSortableColumn","cliente",2,"width","15%","min-width","12rem"],["type","text","field","cliente","display","menu",1,"ml-auto"],["pSortableColumn","totalDocumento",2,"width","15%","min-width","12rem"],["type","text","field","totalDocumento","display","menu",1,"ml-auto"],["pSortableColumn","codigoProducto",2,"width","15%","min-width","12rem"],["type","text","field","codigoProducto","display","menu",1,"ml-auto"],["pSortableColumn","nombreProducto",2,"width","15%","min-width","12rem"],["type","text","field","nombreProducto","display","menu",1,"ml-auto"],["pSortableColumn","cantidad",2,"width","15%","min-width","12rem"],["type","text","field","cantidad","display","menu",1,"ml-auto"],["pSortableColumn","unidadMedida",2,"width","15%","min-width","12rem"],["type","text","field","unidadMedida","display","menu",1,"ml-auto"],["pSortableColumn","precio",2,"width","15%","min-width","12rem"],["type","text","field","precio","display","menu",1,"ml-auto"],["pSortableColumn","isv",2,"width","15%","min-width","12rem"],["type","text","field","isv","display","menu",1,"ml-auto"],["pSortableColumn","totalXLinea",2,"width","15%","min-width","12rem"],["type","text","field","totalXLinea","display","menu",1,"ml-auto"],["pSortableColumn","comentario",2,"width","15%","min-width","12rem"],["type","text","field","comentario","display","menu",1,"ml-auto"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,Sa,1,1,"ng-template",3),e.YNc(4,Ra,20,17,"ng-template",null,4,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(5);e.xp6(3),e.Q6J("ngIf",a.Loading)("ngIfElse",n)}},directives:[T.O5,w.FN,S.xf,S.x4,Z.iA,q.jx,s._Y,s.JL,s.sg,L.Lt,s.JJ,s.u,O.Hq,Z.lQ,V.H,Z.jB,Z.xl],pipes:[T.uU,T.H9],styles:[""]}),o})(),Ja=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sub-categoria-dash"]],decls:2,vars:0,template:function(t,a){1&t&&(e.TgZ(0,"p"),e._uU(1,"sub-categoria-dash works!"),e.qZA())},styles:[""]}),o})(),Ea=(()=>{class o{constructor(t){this.http=t}GetStatusPedidos(t,a,n,i){var d=this;return(0,u.Z)(function*(){return yield(0,h.z)(d.http.get(`${f.N.MarketMastery}StatusPedido/Get/${t}/${a}/${n}/${i}`))})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(G.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Ya(o,r){if(1&o&&e._UZ(0,"skeleton-table-component",5),2&o){const t=e.oxw();e.Q6J("title",t.Title)}}function Qa(o,r){1&o&&(e.TgZ(0,"small",21),e._uU(1,"El Rango de fecha es requerido"),e.qZA())}function za(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Qa,2,0,"small",20),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.rangeDate.errors.required)}}function $a(o,r){1&o&&(e.TgZ(0,"small",24),e._uU(1,"El asesor es requerido"),e.qZA())}function Ha(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,$a,2,0,"small",23),e.qZA()),2&o){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.codAgt.errors.required)}}function Ba(o,r){if(1&o&&(e.TgZ(0,"div",13),e.TgZ(1,"label",14),e._uU(2,"Seleccione un Asesor"),e.qZA(),e._UZ(3,"p-dropdown",22),e.YNc(4,Ha,2,1,"div",16),e.qZA()),2&o){const t=e.oxw(3);e.xp6(3),e.Q6J("options",t.AsesoresDDL),e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.codAgt.invalid&&t.formFilter.controls.codAgt.dirty)}}function ja(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"form",11),e.TgZ(1,"div",12),e.TgZ(2,"div",13),e.TgZ(3,"label",14),e._uU(4,"Seleccione un rango de fecha"),e.qZA(),e._UZ(5,"p-calendar",15),e.YNc(6,za,2,1,"div",16),e.qZA(),e.YNc(7,Ba,5,2,"div",17),e.TgZ(8,"div",13),e.TgZ(9,"label",18),e._uU(10,"\u200e "),e.qZA(),e.TgZ(11,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).getFilter()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("formGroup",t.formFilter),e.xp6(5),e.Q6J("readonlyInput",!0),e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.rangeDate.invalid&&t.formFilter.controls.rangeDate.dirty),e.xp6(1),e.Q6J("ngIf",t.IsAdmin)}}function Xa(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th"),e._uU(2,"Dias del Pedido"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Asesor"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Nombre cliente"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"N\xb0 Pedido"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Entregado a Despacho"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"En proceso"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Pendiente en facturacion"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Total General"),e.qZA(),e.qZA())}function Wa(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",25),e._uU(2),e.qZA(),e.TgZ(3,"td",25),e._uU(4),e.qZA(),e.TgZ(5,"td",25),e._uU(6),e.qZA(),e.TgZ(7,"td",25),e._uU(8),e.qZA(),e.TgZ(9,"td",25),e._uU(10),e.qZA(),e.TgZ(11,"td",25),e._uU(12),e.qZA(),e.TgZ(13,"td",25),e._uU(14),e.qZA(),e.TgZ(15,"td",25),e._uU(16),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.dia_pedidos),e.xp6(2),e.Oqu(t.nombre_Vendedor),e.xp6(2),e.Oqu(t.nombre_Cliente),e.xp6(2),e.Oqu(t.pedido),e.xp6(2),e.Oqu(t.entregado_a_Despacho),e.xp6(2),e.Oqu(t.en_Proceso),e.xp6(2),e.Oqu(t.pendiente_de_Facturacion),e.xp6(2),e.Oqu(t.pendiente_de_Facturacion+t.en_Proceso+t.entregado_a_Despacho)}}function Ka(o,r){if(1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"center"),e.TgZ(2,"h1",6),e._uU(3),e.qZA(),e.qZA(),e._UZ(4,"hr"),e._UZ(5,"br"),e.YNc(6,ja,12,4,"form",7),e.TgZ(7,"p-table",8),e.YNc(8,Xa,17,0,"ng-template",9),e.YNc(9,Wa,17,8,"ng-template",10),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.Title),e.xp6(3),e.Q6J("ngIf",t.formFilter),e.xp6(1),e.Q6J("value",t.StatusPedidosDet)("paginator",!0)("rows",10)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40)}}let en=(()=>{class o{constructor(t,a,n,i){this.fb=t,this.generalService=a,this.messageservice=n,this.StatusService=i,this.StatusPedidosEnc=[],this.StatusPedidosDet=[],this.Title="Status de Pedido",this.first=0,this.rows=10,this.AsesorEncabezado=[],this.Accessor=[],this.AsesoresDDL=[],this.TablaFechaEncabezado=[],this.TablaFecha=[]}ngOnInit(){const t=localStorage.getItem("currentUser");this.UsuarioData=JSON.parse(t),this.IsAdmin="Administrador"==this.UsuarioData.role,this.getAll()}getAll(){var t=this;return(0,u.Z)(function*(){yield t.getTable(),yield t.getAsesores(),yield t.BuildFormFilter(t.TablaFecha[0].fechaInicial,t.TablaFecha[0].fechaFinal),yield t._BuildForm(t.TablaFecha[0].fechaInicial,t.TablaFecha[0].fechaFinal),yield t.getStatus()})()}getAsesores(){var t=this;return(0,u.Z)(function*(){t.AsesorEncabezado=yield t.generalService.getAsesores(),t.Accessor=t.AsesorEncabezado.dataResult,t.AsesoresDDL=t.Accessor.map(a=>({salesPrson:a.salesPrson,nombreUsuario:a.nombreUsuario})),t.AsesoresDDL.unshift({salesPrson:0,nombreUsuario:"Seleccionar Todos"})})()}getTable(){var t=this;return(0,u.Z)(function*(){t.TablaFechaEncabezado=yield t.generalService.getTableFecha(),t.TablaFecha=t.TablaFechaEncabezado.dataResult})()}BuildFormFilter(t,a){var n=this;return(0,u.Z)(function*(){n.formFilter=n.fb.group({rangeDate:["",s.kI.required],op:[1==n.IsAdmin?2:1],codAgt:[1==n.IsAdmin?0:n.UsuarioData.saleId,s.kI.required]})})()}_BuildForm(t,a){var n=this;return(0,u.Z)(function*(){n.formFil=n.fb.group({fechaInicio:[new Date(t).toISOString().substring(0,10),s.kI.required],fechaFin:[new Date(a).toISOString().substring(0,10),s.kI.required],op:[1==n.IsAdmin?2:1],codAgt:[1==n.IsAdmin?0:1,s.kI.required]})})()}getFilter(){var t=this;return(0,u.Z)(function*(){try{""==t.formFilter.value.rangeDate?t.messageservice.add({severity:"warn",summary:"Warn",detail:p.G.FormularioInvalido}):(t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),0!=t.formFilter.value.codAgt&&(t.formFilter.value.op=1),t.StatusPedidosEnc=yield t.StatusService.GetStatusPedidos(new Date(t.formFilter.value.rangeDate[0]).toISOString().substring(0,10),new Date(t.formFilter.value.rangeDate[1]).toISOString().substring(0,10),t.formFilter.value.op,t.formFilter.value.codAgt),t.StatusPedidosDet=t.StatusPedidosEnc.dataResult,c.V.closeLoading(),t.Loading=!1)}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}getStatus(){var t=this;return(0,u.Z)(function*(){try{t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),t.StatusPedidosEnc=yield t.StatusService.GetStatusPedidos(new Date(t.TablaFecha[0].fechaInicial).toISOString().substring(0,10),new Date(t.TablaFecha[0].fechaFinal).toDateString().substring(0,10),1==t.IsAdmin?2:1,1==t.IsAdmin?0:t.UsuarioData.saleId),t.StatusPedidosDet=t.StatusPedidosEnc.dataResult,c.V.closeLoading(),t.Loading=!1}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(I.m),e.Y36(q.ez),e.Y36(Ea))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-status-pedidos"]],decls:6,vars:2,consts:[[1,"grid"],[1,"col-12","xl:col-12"],[1,"card"],[3,"ngIf","ngIfElse"],["showTable",""],[3,"title"],[1,"mt-2"],["class","mb-5",3,"formGroup",4,"ngIf"],["responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","autoLayout","true","scrollHeight","450px",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],["pTemplate","header"],["pTemplate","body"],[1,"mb-5",3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],["for","AsesoresDDL"],["formControlName","rangeDate","selectionMode","range",3,"readonlyInput"],[4,"ngIf"],["class","col-12 md:col-6",4,"ngIf"],["for","sub"],["pButton","","type","button","label","Buscar",1,"p-button-secondary","p-button-outlined",3,"click"],["id","rangeDate","class","p-error block",4,"ngIf"],["id","rangeDate",1,"p-error","block"],["formControlName","codAgt","optionValue","salesPrson","optionLabel","nombreUsuario",3,"options"],["id","codAgt","class","p-error block",4,"ngIf"],["id","codAgt",1,"p-error","block"],[2,"width","15%","min-width","12rem"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,Ya,1,1,"ng-template",3),e.YNc(4,Ka,10,8,"ng-template",null,4,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(5);e.xp6(3),e.Q6J("ngIf",a.Loading)("ngIfElse",n)}},directives:[T.O5,w.FN,Z.iA,q.jx,s._Y,s.JL,s.sg,P.f,s.JJ,s.u,O.Hq,L.Lt],styles:[""]}),o})(),tn=(()=>{class o{constructor(t){this.http=t}GetDashCobros(t,a,n,i){var d=this;return(0,u.Z)(function*(){return yield(0,h.z)(d.http.get(`${f.N.MarketMastery}AsesorCarteraCobros/Get/${t}/${a}/${n}/${i}`))})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(G.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const on=["tabView"];function an(o,r){if(1&o&&e._UZ(0,"skeleton-table-component",5),2&o){const t=e.oxw();e.Q6J("title",t.Title)}}function nn(o,r){1&o&&(e.TgZ(0,"small",21),e._uU(1,"El Rango de fecha es requerido"),e.qZA())}function rn(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,nn,2,0,"small",20),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.rangeDate.errors.required)}}function ln(o,r){1&o&&(e.TgZ(0,"small",24),e._uU(1,"El asesor es requerido"),e.qZA())}function cn(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ln,2,0,"small",23),e.qZA()),2&o){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.codAgt.errors.required)}}function sn(o,r){if(1&o&&(e.TgZ(0,"div",13),e.TgZ(1,"label",14),e._uU(2,"Seleccione un Asesor"),e.qZA(),e._UZ(3,"p-dropdown",22),e.YNc(4,cn,2,1,"div",16),e.qZA()),2&o){const t=e.oxw(3);e.xp6(3),e.Q6J("options",t.AsesoresDDL),e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.codAgt.invalid&&t.formFilter.controls.codAgt.dirty)}}function un(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"form",11),e.TgZ(1,"div",12),e.TgZ(2,"div",13),e.TgZ(3,"label",14),e._uU(4,"Seleccione un rango de fecha"),e.qZA(),e._UZ(5,"p-calendar",15),e.YNc(6,rn,2,1,"div",16),e.qZA(),e.YNc(7,sn,5,2,"div",17),e.TgZ(8,"div",13),e.TgZ(9,"label",18),e._uU(10,"\u200e "),e.qZA(),e.TgZ(11,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).getFilter()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("formGroup",t.formFilter),e.xp6(5),e.Q6J("readonlyInput",!0),e.xp6(1),e.Q6J("ngIf",t.formFilter.controls.rangeDate.invalid&&t.formFilter.controls.rangeDate.dirty),e.xp6(1),e.Q6J("ngIf",t.IsAdmin)}}function dn(o,r){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",25),e._uU(2,"Asesor"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"cartera Total"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Meta Corriente"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Meta Proyectada"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"% Global"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"% Meta"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Contado"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Corriente"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"De 01 a 30"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"De 31 a 60"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"De 61 a 90"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"De 91 a 120"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Mas de 120"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Avance Cobros"),e.qZA(),e.qZA())}function pn(o,r){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",25),e._uU(2),e.qZA(),e.TgZ(3,"td",25),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"td",25),e._uU(7),e.ALo(8,"currency"),e.qZA(),e.TgZ(9,"td",25),e._uU(10),e.ALo(11,"currency"),e.qZA(),e.TgZ(12,"td",25),e._UZ(13,"progress",26),e._uU(14),e.ALo(15,"number"),e.qZA(),e.TgZ(16,"td",25),e._UZ(17,"progress",26),e._uU(18),e.ALo(19,"number"),e.qZA(),e.TgZ(20,"td",25),e._uU(21),e.ALo(22,"currency"),e.qZA(),e.TgZ(23,"td",25),e._uU(24),e.ALo(25,"currency"),e.qZA(),e.TgZ(26,"td",25),e._uU(27),e.ALo(28,"currency"),e.qZA(),e.TgZ(29,"td",25),e._uU(30),e.ALo(31,"currency"),e.qZA(),e.TgZ(32,"td",25),e._uU(33),e.ALo(34,"currency"),e.qZA(),e.TgZ(35,"td",25),e._uU(36),e.ALo(37,"currency"),e.qZA(),e.TgZ(38,"td",25),e._uU(39),e.ALo(40,"currency"),e.qZA(),e.TgZ(41,"td",25),e._uU(42),e.ALo(43,"currency"),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.asesor),e.xp6(2),e.Oqu(e.xi3(5,16,t.cartera_Total,"Lps.")),e.xp6(3),e.Oqu(e.xi3(8,19,t.meta_Corriente,"Lps.")),e.xp6(3),e.Oqu(e.xi3(11,22,t.meta_Proyectada,"Lps.")),e.xp6(3),e.s9C("value",t.avance_Cobros/t.cartera_Total*100),e.xp6(1),e.hij(" ",e.xi3(15,25,t.avance_Cobros/t.cartera_Total*100,"1.0-0"),"% "),e.xp6(3),e.s9C("value",t.avance_Cobros/t.meta_Proyectada*100),e.xp6(1),e.hij(" ",e.xi3(19,28,t.avance_Cobros/t.meta_Proyectada*100,"1.0-0"),"% "),e.xp6(3),e.Oqu(e.xi3(22,31,t.contado,"Lps.")),e.xp6(3),e.Oqu(e.xi3(25,34,t.corriente,"Lps.")),e.xp6(3),e.Oqu(e.xi3(28,37,t.de01a30,"Lps.")),e.xp6(3),e.Oqu(e.xi3(31,40,t.de31a60,"Lps.")),e.xp6(3),e.Oqu(e.xi3(34,43,t.de61a90,"Lps.")),e.xp6(3),e.Oqu(e.xi3(37,46,t.de91a120,"Lps.")),e.xp6(3),e.Oqu(e.xi3(40,49,t.masDe120,"Lps.")),e.xp6(3),e.Oqu(e.xi3(43,52,t.avance_Cobros,"Lps."))}}function _n(o,r){if(1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"center"),e.TgZ(2,"h1",6),e._uU(3),e.qZA(),e.qZA(),e._UZ(4,"hr"),e._UZ(5,"br"),e.YNc(6,un,12,4,"form",7),e.TgZ(7,"p-table",8),e.YNc(8,dn,29,0,"ng-template",9),e.YNc(9,pn,44,55,"ng-template",10),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.Title),e.xp6(3),e.Q6J("ngIf",t.formFilter),e.xp6(1),e.Q6J("value",t.DashCobrosDet)("paginator",!0)("rows",10)("scrollable",!0)("virtualScroll",t.False)("virtualRowHeight",40)}}const mn=[{path:"",children:[{path:"listado-AvancesCobros",component:he},{path:"listado-AvanceCobertura-Subcategoria",component:Io},{path:"listado-Margen",component:ma},{path:"listado-Cobertura-Premio",component:$e},{path:"listado-Venta-Grupo-Marca",component:aa},{path:"listado-Salud-Financiera",component:Dt},{path:"listado-Incentivo-Miscelaneo",component:At},{path:"listado-venta-gm",component:Ot},{path:"listado-ventas",component:Qt},{path:"listado-venta-asesor",component:oo},{path:"listado-BackOrders",component:Fa},{path:"listado-Retenidos",component:ka},{path:"listado-SubCategoriaDash",component:Ja},{path:"listado-StatusPedidos",component:en},{path:"listado-DashCobrosAvance",component:(()=>{class o{constructor(t,a,n,i){this.CobrosDashService=t,this.fb=a,this.generalService=n,this.messageservice=i,this.activeTabIndex=0,this.DashCobrosEn=[],this.DashCobrosDet=[],this.Title="DashBoard Cobros",this.TablaFechaEncabezado=[],this.TablaFecha=[],this.AsesorEncabezado=[],this.Accessor=[],this.AsesoresDDL=[]}ngOnInit(){const t=localStorage.getItem("currentUser");this.UsuarioData=JSON.parse(t),this.IsAdmin="Administrador"==this.UsuarioData.role,console.log(this.UsuarioData.saleId),this.getAll()}getAll(){var t=this;return(0,u.Z)(function*(){yield t.getTable(),yield t.getAsesores(),yield t.BuildFormFilter(t.TablaFecha[0].fechaInicial,t.TablaFecha[0].fechaFinal),yield t._BuildForm(t.TablaFecha[0].fechaInicial,t.TablaFecha[0].fechaFinal),yield t.getDashCobros()})()}getAsesores(){var t=this;return(0,u.Z)(function*(){t.AsesorEncabezado=yield t.generalService.getAsesores(),t.Accessor=t.AsesorEncabezado.dataResult,t.AsesoresDDL=t.Accessor.map(a=>({salesPrson:a.salesPrson,nombreUsuario:a.nombreUsuario})),t.AsesoresDDL.unshift({salesPrson:0,nombreUsuario:"Seleccionar Todos"})})()}getTable(){var t=this;return(0,u.Z)(function*(){t.TablaFechaEncabezado=yield t.generalService.getTableFecha(),t.TablaFecha=t.TablaFechaEncabezado.dataResult})()}BuildFormFilter(t,a){var n=this;return(0,u.Z)(function*(){n.formFilter=n.fb.group({rangeDate:["",s.kI.required],op:[1==n.IsAdmin?2:1],codAgt:[1==n.IsAdmin?0:n.UsuarioData.saleId,s.kI.required]})})()}_BuildForm(t,a){var n=this;return(0,u.Z)(function*(){n.formFil=n.fb.group({fechaInicio:[new Date(t).toISOString().substring(0,10),s.kI.required],fechaFin:[new Date(a).toISOString().substring(0,10),s.kI.required],op:[1==n.IsAdmin?2:1],codAgt:[1==n.IsAdmin?0:1,s.kI.required]})})()}getFilter(){var t=this;return(0,u.Z)(function*(){try{if(""==t.formFilter.value.rangeDate)t.messageservice.add({severity:"warn",summary:"Warn",detail:p.G.FormularioInvalido});else{t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),0!=t.formFilter.value.codAgt&&(t.formFilter.value.op=1),t.DashCobrosEn=yield t.CobrosDashService.GetDashCobros(t.formFilter.value.op,t.formFilter.value.codAgt,new Date(t.formFilter.value.rangeDate[0]).toISOString().substring(0,10),new Date(t.formFilter.value.rangeDate[1]).toISOString().substring(0,10)),t.DashCobrosDet=t.DashCobrosEn.dataResult;let a=0,n=0,i=0,d=0,m=0,b=0,A=0,_=0,v=0,U=0,F=0,y=0,D=0;t.DashCobrosDet.forEach(g=>{a+=g.cartera_Total,n+=g.meta_Corriente,i+=g.meta_Proyectada,d+=g.avance_Cobros/g.cartera_Total*100,m+=g.avance_Cobros/g.meta_Proyectada*100,b+=g.contado,A+=g.corriente,_+=g.de01a30,v+=g.de31a60,U+=g.de61a90,F+=g.de91a120,y+=g.masDe120,D+=g.avance_Cobros}),t.SumCarTo=a,t.SumMerCor=n,t.SumMetPro=i,t.PGlobal=d,t.PMeta=m,t.SumCon=b,t.SumCor=A,t.SumDe1a30=_,t.SumDe31a60=v,t.SumDe61a90=U,t.SumDe91a120=F,t.MasDe120=y,t.SumAvaCob=D,c.V.closeLoading(),t.Loading=!1}}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}getDashCobros(){var t=this;return(0,u.Z)(function*(){try{t.Loading=!0,c.V.loading(p.G.LoadingTitle,p.G.LoadingDescription),t.DashCobrosEn=yield t.CobrosDashService.GetDashCobros(1==t.IsAdmin?2:1,1==t.IsAdmin?0:t.UsuarioData.saleId,new Date(t.TablaFecha[0].fechaInicial).toISOString().substring(0,10),new Date(t.TablaFecha[0].fechaFinal).toDateString().substring(0,10)),t.DashCobrosDet=t.DashCobrosEn.dataResult;let a=0,n=0,i=0,d=0,m=0,b=0,A=0,_=0,v=0,U=0,F=0,y=0,D=0;t.DashCobrosDet.forEach(g=>{a+=g.cartera_Total,n+=g.meta_Corriente,i+=g.meta_Proyectada,d+=g.avance_Cobros/g.cartera_Total*100,m+=g.avance_Cobros/g.meta_Proyectada*100,b+=g.contado,A+=g.corriente,_+=g.de01a30,v+=g.de31a60,U+=g.de61a90,F+=g.de91a120,y+=g.masDe120,D+=g.avance_Cobros}),t.SumCarTo=a,t.SumMerCor=n,t.SumMetPro=i,t.PGlobal=d,t.PMeta=m,t.SumCon=b,t.SumCor=A,t.SumDe1a30=_,t.SumDe31a60=v,t.SumDe61a90=U,t.SumDe91a120=F,t.MasDe120=y,t.SumAvaCob=D,c.V.closeLoading(),t.Loading=!1}catch(a){c.V.closeLoading(),c.V.warning(a)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(tn),e.Y36(s.qu),e.Y36(I.m),e.Y36(q.ez))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-dash-cobros-avance"]],viewQuery:function(t,a){if(1&t&&e.Gf(on,5),2&t){let n;e.iGM(n=e.CRH())&&(a.tabView=n.first)}},decls:6,vars:2,consts:[[1,"grid"],[1,"col-12","xl:col-12"],[1,"card"],[3,"ngIf","ngIfElse"],["showTable",""],[3,"title"],[1,"mt-2"],["class","mb-5",3,"formGroup",4,"ngIf"],["responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines","autoLayout","true","scrollHeight","450px",3,"value","paginator","rows","scrollable","virtualScroll","virtualRowHeight"],["pTemplate","header"],["pTemplate","body"],[1,"mb-5",3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],["for","AsesoresDDL"],["formControlName","rangeDate","selectionMode","range",3,"readonlyInput"],[4,"ngIf"],["class","col-12 md:col-6",4,"ngIf"],["for","sub"],["pButton","","type","button","label","Buscar",1,"p-button-secondary","p-button-outlined",3,"click"],["id","rangeDate","class","p-error block",4,"ngIf"],["id","rangeDate",1,"p-error","block"],["formControlName","codAgt","optionValue","salesPrson","optionLabel","nombreUsuario",3,"options"],["id","codAgt","class","p-error block",4,"ngIf"],["id","codAgt",1,"p-error","block"],[2,"width","15%","min-width","12rem"],["max","100",3,"value"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,an,1,1,"ng-template",3),e.YNc(4,_n,10,8,"ng-template",null,4,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.MAs(5);e.xp6(3),e.Q6J("ngIf",a.Loading)("ngIfElse",n)}},directives:[T.O5,w.FN,Z.iA,q.jx,s._Y,s.JL,s.sg,P.f,s.JJ,s.u,O.Hq,L.Lt],pipes:[T.H9,T.JJ],styles:[""]}),o})()},{path:"listado-DevolucionVenta",component:(()=>{class o{constructor(){this.DevolucionEnc=[],this.DevolucionDet=[],this.Title="Status de Pedido"}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-devolucion-venta"]],decls:2,vars:0,template:function(t,a){1&t&&(e.TgZ(0,"p"),e._uU(1,"devolucion-venta works!"),e.qZA())},styles:[""]}),o})()},{path:"**",redirectTo:"listado-usuarios"}]}];let gn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[ne.Bz.forChild(mn)],ne.Bz]}),o})();var Zn=C(1148);let Tn=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[q.ez],imports:[[T.ez,gn,Zn.T,s.UX,s.u5]]}),o})()}}]);