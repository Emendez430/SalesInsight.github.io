"use strict";(self.webpackChunkbaseWeb=self.webpackChunkbaseWeb||[]).push([[11],{11:(oe,f,a)=>{a.r(f),a.d(f,{RolesModule:()=>te});var m=a(6019),d=a(8239),s=a(3164);class T{}var e=a(3668),c=a(7537),g=a(1129),u=a(481),C=a(5286),v=a(397),h=a(7043),A=a(7797),y=a(1577),Z=a(4750);function b(o,i){1&o&&e._uU(0," Cargando... ")}function M(o,i){1&o&&(e.TgZ(0,"small",15),e._uU(1,"Descripci\xf3n es requerido"),e.qZA())}function I(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,M,2,0,"small",14),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formRole.controls.description.errors.required)}}function N(o,i){if(1&o&&(e.TgZ(0,"div",16),e._UZ(1,"p-checkbox",17),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("formControl",t.formRole.controls.active)}}const J=function(o){return{"is-invalid":o}};function D(o,i){if(1&o&&(e.TgZ(0,"form",6),e.TgZ(1,"div",7),e.TgZ(2,"div",8),e.TgZ(3,"span",9),e._UZ(4,"i",10),e._UZ(5,"input",11),e.TgZ(6,"label",12),e._uU(7,"Descripci\xf3n"),e.qZA(),e.qZA(),e.YNc(8,I,2,1,"div",5),e.qZA(),e.YNc(9,N,2,1,"div",13),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.Q6J("formGroup",t.formRole),e.xp6(5),e.Q6J("ngClass",e.VKq(4,J,t.submitted&&t.f.name.errors)),e.xp6(3),e.Q6J("ngIf",t.formRole.controls.description.invalid&&t.formRole.controls.description.dirty),e.xp6(1),e.Q6J("ngIf",!t.isAdd)}}function q(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",20),e.TgZ(1,"div",21),e.TgZ(2,"p-checkbox",22),e.NdJ("ngModelChange",function(n){return e.CHM(t).$implicit.active=n}),e.qZA(),e.qZA(),e.TgZ(3,"div"),e.TgZ(4,"b"),e._uU(5),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit;e.xp6(2),e.Q6J("ngModel",t.active),e.xp6(3),e.Oqu(t.label)}}function w(o,i){if(1&o&&(e.TgZ(0,"div"),e.TgZ(1,"p-tree",18),e.YNc(2,q,6,2,"ng-template",19),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("value",t.role.detail)}}function F(o,i){if(1&o&&(e.YNc(0,D,10,6,"form",4),e.TgZ(1,"h6"),e._uU(2,"Permisos"),e.qZA(),e.YNc(3,w,3,1,"div",5)),2&o){const t=e.oxw();e.Q6J("ngIf",t.formRole),e.xp6(3),e.Q6J("ngIf",t.role)}}function U(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).add()}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",t.formRole.invalid||t.loading)}}function L(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).edit()}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",t.formRole.invalid||t.loading)}}function Y(o,i){if(1&o&&(e.YNc(0,U,1,1,"ng-template",1),e.YNc(1,L,1,1,"ng-template",null,23,e.W1O)),2&o){const t=e.MAs(2),l=e.oxw();e.Q6J("ngIf",l.isAdd)("ngIfElse",t)}}const Q=function(){return{width:"50vw"}};let x=(()=>{class o{constructor(t,l,n){this.fb=t,this.roleService=l,this.toastMesage=n,this.roleModify=new e.vpe,this.loading=!1,this.display=!1}ngOnInit(){}_getRoles(){var t=this;return(0,d.Z)(function*(){var l;try{t.loading=!0,t.role=yield t.roleService.getRoleWithDetail(null!==(l=t.role.roleId)&&void 0!==l?l:0),t._createFormBuild(),t.loading=!1}catch(n){s.V.warning("Advertencia",n),t.loading=!1}})()}showDialog(t,l){this.new(),this.isAdd=l,this.role=t,this.display=!0,this._createFormBuild(),this._getRoles()}_createFormBuild(){var t,l,n;this.formRole=this.fb.group({roleId:[null!==(t=this.role.roleId)&&void 0!==t?t:0],description:[null!==(l=this.role.description)&&void 0!==l?l:"",c.kI.required],active:[null!==(n=this.role.active)&&void 0!==n&&n]})}new(){this.role=void 0,this.formRole=void 0}add(){var t=this;return(0,d.Z)(function*(){var l,n;if(t.formRole.valid)try{let r=t.formRole.value;r.detail=null!==(l=t.role.detail)&&void 0!==l?l:[],t.removeCircular(null!==(n=r.detail)&&void 0!==n?n:[]),s.V.loading("Agregando","Agregando Rol");let p=yield t.roleService.add(r);yield s.V.closeLoading(),t.toastMesage.add({severity:"success",summary:"Felicidades",detail:"Agregado correctamente."}),t.roleModify.emit(p),t.display=!1}catch(r){yield s.V.closeLoading(),s.V.warning("Advertencia",r)}})()}edit(){var t=this;return(0,d.Z)(function*(){var l,n;if(t.formRole.valid)try{let r=t.formRole.value;r.detail=null!==(l=t.role.detail)&&void 0!==l?l:[],t.removeCircular(null!==(n=r.detail)&&void 0!==n?n:[]),s.V.loading("Editando","Editando Rol");let p=yield t.roleService.edit(r);yield s.V.closeLoading(),t.toastMesage.add({severity:"success",summary:"Felicidades",detail:"Editado Correctamente."}),t.roleModify.emit(p),t.display=!1}catch(r){yield s.V.closeLoading(),s.V.warning("Advertencia",r)}})()}removeCircular(t){var l=this;return(0,d.Z)(function*(){for(let n in t)t[n].parent=null,l.removeCircular(t[n].children)})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.qu),e.Y36(g.N),e.Y36(u.ez))},o.\u0275cmp=e.Xpm({type:o,selectors:[["role-dialog-component"]],outputs:{roleModify:"roleModify"},features:[e._Bn([g.N])],decls:6,vars:7,consts:[["modal","true","blockScroll","true",3,"header","visible","visibleChange"],[3,"ngIf","ngIfElse"],["data",""],["pTemplate","footer"],["class","mb-5",3,"formGroup",4,"ngIf"],[4,"ngIf"],[1,"mb-5",3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],[1,"mt-4","p-float-label","p-input-icon-left"],[1,"pi","pi-user"],["id","description","type","text","pInputText","","formControlName","description",3,"ngClass"],["for","name"],["class","col-12 md:col-12",4,"ngIf"],["id","description","class","p-error block",4,"ngIf"],["id","description",1,"p-error","block"],[1,"col-12","md:col-12"],["binary","true","label","Activo","name","groupname",3,"formControl"],[3,"value"],["pTemplate","default"],[1,"flex"],[1,"ml-1"],["binary","true","name","groupname",3,"ngModel","ngModelChange"],["addButton",""],["pButton","","type","button","label","Agregar",3,"disabled","click"],["pButton","","type","button","label","Editar",3,"disabled","click"]],template:function(t,l){if(1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(r){return l.display=r}),e._UZ(1,"p-toast"),e.YNc(2,b,1,0,"ng-template",1),e.YNc(3,F,4,2,"ng-template",null,2,e.W1O),e.YNc(5,Y,3,2,"ng-template",3),e.qZA()),2&t){const n=e.MAs(4);e.Akn(e.DdM(6,Q)),e.MGl("header","",l.isAdd?"Agregar":"Editar"," Rol"),e.Q6J("visible",l.display),e.xp6(2),e.Q6J("ngIf",l.loading)("ngIfElse",n)}},directives:[C.V,v.FN,m.O5,u.jx,c._Y,c.JL,c.sg,c.Fj,h.o,c.JJ,c.u,m.mk,A.XZ,c.oH,y.mp,c.On,Z.Hq],encapsulation:2}),o})();var E=a(2592),B=a(5819),_=a(7548),V=a(5759),O=a(9430),S=a(1703);function H(o,i){if(1&o&&e._UZ(0,"skeleton-table-component",6),2&o){const t=e.oxw();e.Q6J("title",t.title)}}function k(o,i){1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",12),e._uU(2,"Id "),e._UZ(3,"p-sortIcon",13),e._UZ(4,"p-columnFilter",14),e.qZA(),e.TgZ(5,"th",15),e._uU(6,"Descripci\xf3n "),e._UZ(7,"p-sortIcon",16),e._UZ(8,"p-columnFilter",17),e.qZA(),e.TgZ(9,"th",18),e._uU(10,"Estado "),e._UZ(11,"p-sortIcon",19),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Acci\xf3n"),e.qZA(),e.qZA())}function G(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"h4",20),e._uU(1),e.qZA(),e.TgZ(2,"div",21),e.TgZ(3,"button",22),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addRole()}),e.qZA(),e.TgZ(4,"span",23),e._UZ(5,"i",24),e.TgZ(6,"input",25),e.NdJ("input",function(n){return e.CHM(t),e.oxw(),e.MAs(2).filterGlobal(n.target.value,"contains")}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.title)}}function W(o,i){1&o&&e._UZ(0,"p-chip",32)}function j(o,i){1&o&&e._UZ(0,"p-chip",33)}function z(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",26),e._uU(2),e.qZA(),e.TgZ(3,"td",27),e._uU(4),e.qZA(),e.TgZ(5,"td",28),e.YNc(6,W,1,0,"ng-template",3),e.YNc(7,j,1,0,"ng-template",null,29,e.W1O),e.qZA(),e.TgZ(9,"td",30),e.TgZ(10,"button",31),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).editRole(r)}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit,l=e.MAs(8);e.xp6(2),e.Oqu(t.roleId),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Q6J("ngIf",t.active)("ngIfElse",l)}}const P=function(){return["userId","name","userName","email"]};function $(o,i){if(1&o&&(e._UZ(0,"p-toast"),e.TgZ(1,"p-table",7,8),e.YNc(3,k,14,0,"ng-template",9),e.YNc(4,G,7,1,"ng-template",10),e.YNc(5,z,11,4,"ng-template",11),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("value",t.roles)("paginator",!0)("rows",5)("globalFilterFields",e.DdM(4,P))}}let X=(()=>{class o{constructor(t,l){this.roleService=t,this.auth=l,this.loading=!1,this.title="Listado de Roles"}ngOnInit(){this._getRoles()}_getRoles(){var t=this;return(0,d.Z)(function*(){try{t.loading=!0,t.roles=yield t.roleService.get(),s.V.closeLoading(),t.loading=!1}catch(l){t.loading=!1,s.V.warning("Advertencia",l)}})()}editRole(t){this.auth.hasPermission("btn_edit_role")?this.RoleDialog.showDialog(t,!1):s.V.warning("No tiene acceso","No puede editar por favor solicite el acceso")}addRole(){this.auth.hasPermission("btn_add_role")?this.RoleDialog.showDialog(new T,!0):s.V.warning("No tiene acceso","No puede agregar por favor solicite el acceso")}roleModify(t){this.roles=t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.N),e.Y36(E.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(t,l){if(1&t&&e.Gf(x,5),2&t){let n;e.iGM(n=e.CRH())&&(l.RoleDialog=n.first)}},features:[e._Bn([g.N])],decls:7,vars:2,consts:[[1,"grid"],[1,"col-12","xl:col-12"],[1,"card"],[3,"ngIf","ngIfElse"],["showTable",""],[3,"roleModify"],[3,"title"],["responsiveLayout","scroll","styleClass","p-datatable-sm p-datatable-gridlines",3,"value","paginator","rows","globalFilterFields"],["dt",""],["pTemplate","header"],["pTemplate","caption"],["pTemplate","body"],["pSortableColumn","roleId"],["field","roleId"],["type","text","field","roleId","display","menu",1,"ml-auto"],["pSortableColumn","description"],["field","description"],["type","text","field","description","display","menu",1,"ml-auto"],["pSortableColumn","active"],["field","active"],[1,"mt-2"],[1,"flex"],["pButton","","pRipple","","type","button","pTooltip","Agregar nuevo rol","tooltipPosition","bottom","label","Agregar",1,"ml-2",3,"click"],[1,"p-input-icon-left","ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar una palabra",3,"input"],[2,"width","10%","min-width","2rem"],[2,"width","35%","min-width","7rem"],[2,"width","15%","min-width","4rem"],["inactive",""],[2,"width","20%"],["pButton","","pRipple","","type","button","icon","pi pi-pencil",1,"p-button","p-component","p-button-text","p-button-icon-only",3,"click"],["label","Activo","styleClass","custom-chip","icon","pi pi-check"],["label","Inactivo","icon","pi pi-check"]],template:function(t,l){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,H,1,1,"ng-template",3),e.YNc(4,$,6,5,"ng-template",null,4,e.W1O),e.qZA(),e.qZA(),e.TgZ(6,"role-dialog-component",5),e.NdJ("roleModify",function(r){return l.roleModify(r)}),e.qZA(),e.qZA()),2&t){const n=e.MAs(5);e.xp6(3),e.Q6J("ngIf",l.loading)("ngIfElse",n)}},directives:[m.O5,x,B.i,v.FN,_.iA,u.jx,_.lQ,_.fz,_.xl,Z.Hq,V.H,O.u,h.o,S.A],styles:["[_nghost-%COMP%]     .p-chip.custom-chip{background:var(--primary-color)!important;color:var(--primary-color-text)!important}"]}),o})();var R=a(1654);const K=[{path:"",children:[{path:"listado-roles",component:X},{path:"**",redirectTo:"listado-roles"}]}];let ee=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[R.Bz.forChild(K)],R.Bz]}),o})(),te=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[m.ez,ee]]}),o})()}}]);