"use strict";(self.webpackChunkbaseWeb=self.webpackChunkbaseWeb||[]).push([[319],{319:(ai,x,s)=>{s.r(x),s.d(x,{PermissionsModule:()=>mi});var u=s(6019),p=s(8239),m=s(3164),c=s(8260),d=s(2394),i=s(3668),A=s(4522);let f=(()=>{class t{constructor(o){this.http=o}get(){var o=this;return(0,p.Z)(function*(){return yield(0,d.z)(o.http.get(`${c.N.uriLogistic}/Permission`))})()}getTypePermission(){var o=this;return(0,p.Z)(function*(){return yield(0,d.z)(o.http.get(`${c.N.uriLogistic}/Permission/GetTypePermission`))})()}getById(o){var e=this;return(0,p.Z)(function*(){return yield(0,d.z)(e.http.get(`${c.N.uriLogistic}/Permission/ById/${o}`))})()}add(o){var e=this;return(0,p.Z)(function*(){return yield(0,d.z)(e.http.post(`${c.N.uriLogistic}/Permission`,o))})()}edit(o){var e=this;return(0,p.Z)(function*(){return yield(0,d.z)(e.http.put(`${c.N.uriLogistic}/Permission`,o))})()}}return t.\u0275fac=function(o){return new(o||t)(i.LFG(A.eN))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();var l=s(7537),b=s(1129),N=s(5286),T=s(397),y=s(481),q=s(7043),J=s(6898),D=s(925),M=s(7797),_=s(4750);function Q(t,n){1&t&&i._uU(0," Cargando... ")}function L(t,n){1&t&&(i.TgZ(0,"small",26),i._uU(1,"Descripci\xf3n es requerido"),i.qZA())}function U(t,n){if(1&t&&(i.TgZ(0,"div"),i.YNc(1,L,2,0,"small",25),i.qZA()),2&t){const o=i.oxw(3);i.xp6(1),i.Q6J("ngIf",o.formPermission.controls.description.errors.required)}}function Y(t,n){1&t&&(i.TgZ(0,"small",28),i._uU(1,"Tipo es requerido"),i.qZA())}function k(t,n){if(1&t&&(i.TgZ(0,"div"),i.YNc(1,Y,2,0,"small",27),i.qZA()),2&t){const o=i.oxw(3);i.xp6(1),i.Q6J("ngIf",o.formPermission.controls.typeId.errors.required)}}function w(t,n){1&t&&(i.TgZ(0,"small",30),i._uU(1,"Icono es requerido"),i.qZA())}function V(t,n){if(1&t&&(i.TgZ(0,"div"),i.YNc(1,w,2,0,"small",29),i.qZA()),2&t){const o=i.oxw(3);i.xp6(1),i.Q6J("ngIf",o.formPermission.controls.icon.errors.required)}}function F(t,n){1&t&&(i.TgZ(0,"small",32),i._uU(1,"Ruta es requerido"),i.qZA())}function B(t,n){if(1&t&&(i.TgZ(0,"div"),i.YNc(1,F,2,0,"small",31),i.qZA()),2&t){const o=i.oxw(3);i.xp6(1),i.Q6J("ngIf",o.formPermission.controls.path.errors.required)}}function E(t,n){1&t&&(i.TgZ(0,"small",34),i._uU(1,"Posicion es requerido"),i.qZA())}function S(t,n){if(1&t&&(i.TgZ(0,"div"),i.YNc(1,E,2,0,"small",33),i.qZA()),2&t){const o=i.oxw(3);i.xp6(1),i.Q6J("ngIf",o.formPermission.controls.position.errors.required)}}function R(t,n){if(1&t&&(i.TgZ(0,"div",35),i._UZ(1,"p-checkbox",36),i.qZA()),2&t){const o=i.oxw(3);i.xp6(1),i.Q6J("formControl",o.formPermission.controls.active)}}const v=function(t){return{"is-invalid":t}};function z(t,n){if(1&t&&(i.TgZ(0,"form",5),i.TgZ(1,"div",6),i.TgZ(2,"div",7),i.TgZ(3,"span",8),i._UZ(4,"i",9),i._UZ(5,"input",10),i.TgZ(6,"label",11),i._uU(7,"Descripci\xf3n"),i.qZA(),i.qZA(),i.YNc(8,U,2,1,"div",12),i.qZA(),i.TgZ(9,"div",7),i.TgZ(10,"span",8),i._UZ(11,"i",13),i._UZ(12,"p-dropdown",14),i.TgZ(13,"label",15),i._uU(14,"Tipo"),i.qZA(),i.qZA(),i.YNc(15,k,2,1,"div",12),i.qZA(),i.TgZ(16,"div",7),i.TgZ(17,"span",8),i._UZ(18,"i",16),i._UZ(19,"input",17),i.TgZ(20,"label",18),i._uU(21,"Icono"),i.qZA(),i.qZA(),i.YNc(22,V,2,1,"div",12),i.qZA(),i.TgZ(23,"div",7),i.TgZ(24,"span",8),i._UZ(25,"i",19),i._UZ(26,"input",20),i.TgZ(27,"label",21),i._uU(28,"Ruta"),i.qZA(),i.qZA(),i.YNc(29,B,2,1,"div",12),i.qZA(),i.TgZ(30,"div",7),i.TgZ(31,"span",8),i.TgZ(32,"label",22),i._uU(33,"Posicion"),i.qZA(),i._UZ(34,"p-inputNumber",23),i.qZA(),i.YNc(35,S,2,1,"div",12),i.qZA(),i.YNc(36,R,2,1,"div",24),i.qZA(),i.qZA()),2&t){const o=i.oxw(2);i.Q6J("formGroup",o.formPermission),i.xp6(5),i.Q6J("ngClass",i.VKq(14,v,o.submitted&&o.f.description.errors)),i.xp6(3),i.Q6J("ngIf",o.formPermission.controls.description.invalid&&o.formPermission.controls.description.dirty),i.xp6(4),i.Q6J("options",o.typePermissions),i.xp6(3),i.Q6J("ngIf",o.formPermission.controls.typeId.invalid&&o.formPermission.controls.typeId.dirty),i.xp6(4),i.Q6J("ngClass",i.VKq(16,v,o.submitted&&o.f.icon.errors)),i.xp6(3),i.Q6J("ngIf",o.formPermission.controls.icon.invalid&&o.formPermission.controls.icon.dirty),i.xp6(4),i.Q6J("ngClass",i.VKq(18,v,o.submitted&&o.f.path.errors)),i.xp6(3),i.Q6J("ngIf",o.formPermission.controls.path.invalid&&o.formPermission.controls.path.dirty),i.xp6(5),i.Q6J("showButtons",!0)("min",0)("max",100),i.xp6(1),i.Q6J("ngIf",o.formPermission.controls.position.invalid&&o.formPermission.controls.position.dirty),i.xp6(1),i.Q6J("ngIf",!o.isAdd)}}function H(t,n){if(1&t&&i.YNc(0,z,37,20,"form",4),2&t){const o=i.oxw();i.Q6J("ngIf",o.formPermission)}}function G(t,n){if(1&t){const o=i.EpF();i.TgZ(0,"button",38),i.NdJ("click",function(){return i.CHM(o),i.oxw(2).add()}),i.qZA()}if(2&t){const o=i.oxw(2);i.Q6J("disabled",o.formPermission.invalid||o.loading)}}function O(t,n){if(1&t){const o=i.EpF();i.TgZ(0,"button",39),i.NdJ("click",function(){return i.CHM(o),i.oxw(2).edit()}),i.qZA()}if(2&t){const o=i.oxw(2);i.Q6J("disabled",o.formPermission.invalid||o.loading)}}function $(t,n){if(1&t&&(i.YNc(0,G,1,1,"ng-template",1),i.YNc(1,O,1,1,"ng-template",null,37,i.W1O)),2&t){const o=i.MAs(2),e=i.oxw();i.Q6J("ngIf",e.isAdd)("ngIfElse",o)}}const j=function(){return{width:"50vw"}};let I=(()=>{class t{constructor(o,e){this.fb=o,this.permissionService=e,this.permissionModify=new i.vpe,this.typePermissions=[],this.loading=!1,this.display=!1}ngOnInit(){}_getRoles(){var o=this;return(0,p.Z)(function*(){try{o.loading=!0,o.typePermissions=yield o.permissionService.getTypePermission(),o.typePermissions.unshift({typeId:0,description:"Seleccione un Tipo"}),o._createFormBuild(),o.loading=!1}catch(e){m.V.warning("Advertencia",e),o.loading=!1}})()}showDialog(o,e){this.new(),this.isAdd=e,this.permission=o,this.display=!0,this._createFormBuild(),this._getRoles()}_createFormBuild(){var o,e,r,a,g,h,Z,P;this.formPermission=this.fb.group({permissionId:[null!==(o=this.permission.permissionId)&&void 0!==o?o:0],description:[null!==(e=this.permission.description)&&void 0!==e?e:"",l.kI.required],path:[null!==(r=this.permission.path)&&void 0!==r?r:"",l.kI.required],fatherId:[null!==(a=this.permission.fatherId)&&void 0!==a?a:0,l.kI.required],icon:[null!==(g=this.permission.icon)&&void 0!==g?g:"",l.kI.required],typeId:[null!==(h=this.permission.typeId)&&void 0!==h?h:0,l.kI.compose([l.kI.required,l.kI.min(1)])],position:[null!==(Z=this.permission.position)&&void 0!==Z?Z:0,l.kI.required],active:[null!==(P=this.permission.active)&&void 0!==P&&P]})}new(){this.permission=void 0,this.formPermission=void 0}add(){var o=this;return(0,p.Z)(function*(){if(o.formPermission.valid)try{let e=o.formPermission.value;m.V.loading("Agregando","Agregando Permiso");let r=yield o.permissionService.add(e);yield m.V.closeLoading(),m.V.Toas("Agregando Correctamente"),o.permissionModify.emit(r),o.display=!1}catch(e){yield m.V.closeLoading(),m.V.warning("Advertencia",e)}})()}edit(){var o=this;return(0,p.Z)(function*(){if(o.formPermission.valid)try{let e=o.formPermission.value;m.V.loading("Editando","Editando Permiso");let r=yield o.permissionService.edit(e);yield m.V.closeLoading(),m.V.Toas("Editado Correctamente"),o.permissionModify.emit(r),o.display=!1}catch(e){yield m.V.closeLoading(),m.V.warning("Advertencia",e)}})()}removeCircular(o){var e=this;return(0,p.Z)(function*(){for(let r in o)o[r].parent=null,e.removeCircular(o[r].children)})()}}return t.\u0275fac=function(o){return new(o||t)(i.Y36(l.qu),i.Y36(f))},t.\u0275cmp=i.Xpm({type:t,selectors:[["permission-dialog-component"]],outputs:{permissionModify:"permissionModify"},features:[i._Bn([b.N])],decls:6,vars:7,consts:[["modal","true","blockScroll","true",3,"header","visible","visibleChange"],[3,"ngIf","ngIfElse"],["data",""],["pTemplate","footer"],["class","mb-5",3,"formGroup",4,"ngIf"],[1,"mb-5",3,"formGroup"],[1,"grid","p-fluid"],[1,"col-12","md:col-6"],[1,"mt-4","p-float-label","p-input-icon-left"],[1,"pi","pi-user"],["id","description","type","text","pInputText","","formControlName","description",3,"ngClass"],["for","name"],[4,"ngIf"],[1,"pi","pi-table"],["formControlName","typeId","optionValue","typeId","optionLabel","description",3,"options"],["for","typeId"],[1,"pi","pi-bolt"],["id","icon","type","text","pInputText","","formControlName","icon",3,"ngClass"],["for","icon"],[1,"pi","pi-directions"],["id","path","type","text","pInputText","","formControlName","path",3,"ngClass"],["for","path"],["for","position"],["formControlName","position","mode","decimal","inputId","minmax-buttons",3,"showButtons","min","max"],["class","col-12 md:col-12",4,"ngIf"],["id","description","class","p-error block",4,"ngIf"],["id","description",1,"p-error","block"],["id","typeId","class","p-error block",4,"ngIf"],["id","typeId",1,"p-error","block"],["id","icon","class","p-error block",4,"ngIf"],["id","icon",1,"p-error","block"],["id","path","class","p-error block",4,"ngIf"],["id","path",1,"p-error","block"],["id","position","class","p-error block",4,"ngIf"],["id","position",1,"p-error","block"],[1,"col-12","md:col-12"],["binary","true","label","Activo","name","groupname",3,"formControl"],["addButton",""],["pButton","","type","button","label","Agregar",3,"disabled","click"],["pButton","","type","button","label","Editar",3,"disabled","click"]],template:function(o,e){if(1&o&&(i.TgZ(0,"p-dialog",0),i.NdJ("visibleChange",function(a){return e.display=a}),i._UZ(1,"p-toast"),i.YNc(2,Q,1,0,"ng-template",1),i.YNc(3,H,1,1,"ng-template",null,2,i.W1O),i.YNc(5,$,3,2,"ng-template",3),i.qZA()),2&o){const r=i.MAs(4);i.Akn(i.DdM(6,j)),i.MGl("header","",e.isAdd?"Agregar":"Editar"," Permiso"),i.Q6J("visible",e.display),i.xp6(2),i.Q6J("ngIf",e.loading)("ngIfElse",r)}},directives:[N.V,T.FN,u.O5,y.jx,l._Y,l.JL,l.sg,l.Fj,q.o,l.JJ,l.u,u.mk,J.Lt,D.Rn,M.XZ,l.oH,_.Hq],encapsulation:2}),t})();var W=s(2592),K=s(5819),X=s(5759),ii=s(9430),oi=s(1577);function ti(t,n){if(1&t&&i._UZ(0,"skeleton-table-component",6),2&t){const o=i.oxw();i.Q6J("title",o.title)}}function ei(t,n){if(1&t){const o=i.EpF();i.TgZ(0,"div",10),i.TgZ(1,"div",11),i.TgZ(2,"b"),i._uU(3),i.qZA(),i.qZA(),i.TgZ(4,"div",12),i.TgZ(5,"p-button",13),i.NdJ("click",function(){const a=i.CHM(o).$implicit;return i.oxw(2).editPermission(a)}),i.qZA(),i.TgZ(6,"p-button",14),i.NdJ("click",function(){const a=i.CHM(o).$implicit;return i.oxw(2).addPermission(a.permissionId)}),i.qZA(),i.qZA(),i.qZA()}if(2&t){const o=n.$implicit;i.xp6(3),i.Oqu(o.label)}}function ni(t,n){if(1&t){const o=i.EpF();i._UZ(0,"p-toast"),i.TgZ(1,"h4"),i._uU(2),i.TgZ(3,"button",7),i.NdJ("click",function(){return i.CHM(o),i.oxw().addPermission(0)}),i.qZA(),i.qZA(),i.TgZ(4,"p-tree",8),i.YNc(5,ei,7,1,"ng-template",9),i.qZA()}if(2&t){const o=i.oxw();i.xp6(2),i.hij("",o.title," "),i.xp6(2),i.Q6J("value",o.permissions)}}let si=(()=>{class t{constructor(o,e){this.permissionService=o,this.auth=e,this.loading=!1,this.title="Listado de Objetos"}ngOnInit(){this._getRoles()}_getRoles(){var o=this;return(0,p.Z)(function*(){try{o.loading=!0,o.permissions=yield o.permissionService.get(),m.V.closeLoading(),o.loading=!1}catch(e){o.loading=!1,m.V.warning("Advertencia",e)}})()}editPermission(o){this.auth.hasPermission("btn_edit_permission")?this.PermissionDialog.showDialog({permissionId:o.permissionId,path:o.data,description:o.label,fatherId:o.fatherId,icon:o.icon,typeId:o.typeId,active:o.active,position:o.positionId},!1):m.V.warning("No tiene acceso","No puede editar por favor solicite el acceso")}addPermission(o){this.auth.hasPermission("btn_add_permission")?this.PermissionDialog.showDialog({permissionId:0,path:"",description:"",fatherId:o,icon:"",typeId:0,active:!0},!0):m.V.warning("No tiene acceso","No puede agregar por favor solicite el acceso")}permissionModify(o){this.permissions=o}}return t.\u0275fac=function(o){return new(o||t)(i.Y36(f),i.Y36(W.e))},t.\u0275cmp=i.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(o,e){if(1&o&&i.Gf(I,5),2&o){let r;i.iGM(r=i.CRH())&&(e.PermissionDialog=r.first)}},features:[i._Bn([f])],decls:7,vars:2,consts:[[1,"grid"],[1,"col-12","xl:col-12"],[1,"card"],[3,"ngIf","ngIfElse"],["showTable",""],[3,"permissionModify"],[3,"title"],["pButton","","pRipple","","type","button","pTooltip","Agregar menu principal","tooltipPosition","bottom","label","Agregar Menu Principal",1,"ml-2","mt-1","p-button-sm",3,"click"],[3,"value"],["pTemplate","default"],[1,"flex"],[1,"mt-2"],[1,"sizes","ml-2"],["label","Editar","icon","pi pi-pencil","styleClass","p-button-sm p-button-link",3,"click"],["label","Agregar Hijo","icon","pi pi-plus-circle","styleClass","p-button-sm p-button-link p-button-warning",3,"click"]],template:function(o,e){if(1&o&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.YNc(3,ti,1,1,"ng-template",3),i.YNc(4,ni,6,2,"ng-template",null,4,i.W1O),i.qZA(),i.qZA(),i.TgZ(6,"permission-dialog-component",5),i.NdJ("permissionModify",function(a){return e.permissionModify(a)}),i.qZA(),i.qZA()),2&o){const r=i.MAs(5);i.xp6(3),i.Q6J("ngIf",e.loading)("ngIfElse",r)}},directives:[u.O5,I,K.i,T.FN,_.Hq,X.H,ii.u,oi.mp,y.jx,_.zx],encapsulation:2}),t})();var C=s(1654);const ri=[{path:"",children:[{path:"listado-permisos",component:si},{path:"**",redirectTo:"listado-permisos"}]}];let li=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[C.Bz.forChild(ri)],C.Bz]}),t})(),mi=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[u.ez,li]]}),t})()}}]);